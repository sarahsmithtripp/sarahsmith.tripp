<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Sarah Smith-Tripp</title>
<link>https://sarahsmithtripp.github.io/posts.html</link>
<atom:link href="https://sarahsmithtripp.github.io/posts.xml" rel="self" type="application/rss+xml"/>
<description>Personal Website for Sarah Smith-Tripp</description>
<generator>quarto-1.6.39</generator>
<lastBuildDate>Tue, 05 Sep 2023 07:00:00 GMT</lastBuildDate>
<item>
  <title>TidyTuesday 36: Visualizing Worker Demographic Information with Treemaps</title>
  <dc:creator>Louise E. Sinks</dc:creator>
  <link>https://sarahsmithtripp.github.io/posts/2023-09-05-TidyTuesday-Labor/labor.html</link>
  <description><![CDATA[ 




<section id="introoverview-to-tidytuesday-36-union-membership-in-the-united-states" class="level2">
<h2 class="anchored" data-anchor-id="introoverview-to-tidytuesday-36-union-membership-in-the-united-states">Intro/Overview to TidyTuesday 36: Union Membership in the United States</h2>
<p><a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-09-05/readme.md">This week’s TidyTuesday</a> presents data taken from the <a href="https://www.unionstats.com/main.htm">Union Membership and Coverage Database from the CPS (<em>Unionstats.com</em>)</a> created by Barry T. Hirsch, David A. Macpherson, and William E. Even. This database contains data about the wages of union and non-union workers from 1973 until today.</p>
<p>There is a <a href="https://onlinelibrary.wiley.com/doi/10.1111/irel.12330">companion paper</a>:</p>
<blockquote class="blockquote">
<p>Macpherson, David A. and Barry T. Hirsch. 2023. “Five decades of CPS wages, methods, and union-nonunion wage gaps at Unionstats.com.” Industrial Relations: A Journal of Economy and Society 62: 439–452. https://doi.org/10.1111/ irel.12330</p>
</blockquote>
<p>I highly recommend reading the paper as it clearly illustrates the challenges of working with real-world data collected by 3rd parties. The source data is government survey data. For some key questions, a third of respondents didn’t answer. Imputation was performed (but not always noted) by the government agency, but in such a way that it obscured the trend about wage gaps between union and non-union labor. (Likely, the survey was designed to study something else, and the imputation method was fine for that question. Some years did not even ask about participation in labor unions.) The survey also didn’t always collect detailed information about the salary of the highest earners, simply marking them as being “above the cap.” The paper details numerous such issues and explains how the data was handled to standardize the results over the five decades the database covers. It is a beautiful example of how to handle messy data.</p>
<p>Today, I will make two types of treemaps using some of the demographic data from this dataset. A treemap is a way of visualizing how various parts relate to the whole. The demographic data seems all related and could be viewed in a treemap form. So, I’m going to pull that out. The <a href="https://www.unionstats.com/">UnionStats website</a> also warns, “Note: CPS sample sizes are very small for some cells.&nbsp; Use such estimates cautiously.” So, we can use the treemap to visualize that caution for the demographic subsets.</p>
</section>
<section id="setting-up" class="level2">
<h2 class="anchored" data-anchor-id="setting-up">Setting Up</h2>
<section id="loading-libraries" class="level3">
<h3 class="anchored" data-anchor-id="loading-libraries">Loading Libraries</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># who doesn't want to be tidy?</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(gt) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for nice tables</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(treemap) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for treemap</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(d3treeR) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for interactive treemaps</span></span></code></pre></div>
</div>
</section>
<section id="loading-data" class="level3">
<h3 class="anchored" data-anchor-id="loading-data">Loading Data</h3>
<p>This week’s data is not loaded in the usual way! While the TidyTuesday page was up on Monday, the TidyTuesday package insisted the data was unavailable by either week number or date. So, instead, I loaded it directly from Git Hub.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">demographics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> readr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-09-05/demographics.csv'</span>)</span>
<span id="cb2-2">wages <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> readr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-09-05/wages.csv'</span>)</span>
<span id="cb2-3">states <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> readr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-09-05/states.csv'</span>)</span></code></pre></div>
</div>
<p>I will work with the 2019 data, since it is recent and pre-pandemic. The demographic data is found in the <code>facet</code> variable and other subcategories (public vs.&nbsp;private sector, industry, etc.).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">wages_2019 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> wages <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2019</span>) </span>
<span id="cb3-3"></span>
<span id="cb3-4">wages_2019 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(facet) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="nqomuqzvek" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nqomuqzvek table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nqomuqzvek thead, #nqomuqzvek tbody, #nqomuqzvek tfoot, #nqomuqzvek tr, #nqomuqzvek td, #nqomuqzvek th {
  border-style: none;
}

#nqomuqzvek p {
  margin: 0;
  padding: 0;
}

#nqomuqzvek .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nqomuqzvek .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nqomuqzvek .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nqomuqzvek .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nqomuqzvek .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nqomuqzvek .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nqomuqzvek .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nqomuqzvek .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nqomuqzvek .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nqomuqzvek .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nqomuqzvek .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nqomuqzvek .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nqomuqzvek .gt_spanner_row {
  border-bottom-style: hidden;
}

#nqomuqzvek .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nqomuqzvek .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nqomuqzvek .gt_from_md > :first-child {
  margin-top: 0;
}

#nqomuqzvek .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nqomuqzvek .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nqomuqzvek .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nqomuqzvek .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nqomuqzvek .gt_row_group_first td {
  border-top-width: 2px;
}

#nqomuqzvek .gt_row_group_first th {
  border-top-width: 2px;
}

#nqomuqzvek .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nqomuqzvek .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nqomuqzvek .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nqomuqzvek .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nqomuqzvek .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nqomuqzvek .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nqomuqzvek .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nqomuqzvek .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nqomuqzvek .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nqomuqzvek .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nqomuqzvek .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nqomuqzvek .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nqomuqzvek .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nqomuqzvek .gt_left {
  text-align: left;
}

#nqomuqzvek .gt_center {
  text-align: center;
}

#nqomuqzvek .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nqomuqzvek .gt_font_normal {
  font-weight: normal;
}

#nqomuqzvek .gt_font_bold {
  font-weight: bold;
}

#nqomuqzvek .gt_font_italic {
  font-style: italic;
}

#nqomuqzvek .gt_super {
  font-size: 65%;
}

#nqomuqzvek .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nqomuqzvek .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nqomuqzvek .gt_indent_1 {
  text-indent: 5px;
}

#nqomuqzvek .gt_indent_2 {
  text-indent: 10px;
}

#nqomuqzvek .gt_indent_3 {
  text-indent: 15px;
}

#nqomuqzvek .gt_indent_4 {
  text-indent: 20px;
}

#nqomuqzvek .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="facet" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">facet</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="facet">all wage and salary workers</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">construction</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">all wage and salary workers</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">wholesale/retail</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">all wage and salary workers</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">all wage and salary workers</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">all wage and salary workers</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">public administration</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">private sector: all</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">private sector: nonagricultural</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">private sector: construction</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">private sector: manufacturing</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">public sector: all</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">public sector: federal</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">public sector: state government</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">public sector: local government</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">demographics: less than college</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">demographics: college or more</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">demographics: male</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">demographics: female</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">demographics: white male</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">demographics: white female</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">demographics: black male</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">demographics: black female</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="facet">demographics: hispanic male</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="facet">demographics: hispanic female</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Interestingly, the overall data (“all&nbsp;wage&nbsp;and&nbsp;salary&nbsp;workers”) appears 5 times.</p>
</section>
</section>
<section id="selecting-the-demographic-data" class="level2">
<h2 class="anchored" data-anchor-id="selecting-the-demographic-data">Selecting the Demographic Data</h2>
<p>I will view how the sample size changes over the sex/race demographics. I’m going to use a treemap to do so.</p>
<p>First, I will select the rows where the facet has “demographics” or the “all wage and salary workers”. This is done with <code>str_detect</code> from the <a href="https://stringr.tidyverse.org/">stringr package</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">wages_2019_demo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> wages_2019 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(</span>
<span id="cb4-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(facet , <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"demographics"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb4-4">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(facet, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"all wage and salary workers"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb4-5">  )</span></code></pre></div>
</div>
<p>Remove the first four rows- this contains duplicate information about all workers. The college data is also removed since it isn’t related to the other demographic data in a way we can define.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">wages_2019_demo2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> wages_2019_demo[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>,]</span>
<span id="cb5-2"></span>
<span id="cb5-3">wages_2019_demo2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> wages_2019_demo2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(facet , <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"college"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb5-5"></span>
<span id="cb5-6">wages_2019_demo2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="neksckudil" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#neksckudil table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#neksckudil thead, #neksckudil tbody, #neksckudil tfoot, #neksckudil tr, #neksckudil td, #neksckudil th {
  border-style: none;
}

#neksckudil p {
  margin: 0;
  padding: 0;
}

#neksckudil .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#neksckudil .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#neksckudil .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#neksckudil .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#neksckudil .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#neksckudil .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#neksckudil .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#neksckudil .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#neksckudil .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#neksckudil .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#neksckudil .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#neksckudil .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#neksckudil .gt_spanner_row {
  border-bottom-style: hidden;
}

#neksckudil .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#neksckudil .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#neksckudil .gt_from_md > :first-child {
  margin-top: 0;
}

#neksckudil .gt_from_md > :last-child {
  margin-bottom: 0;
}

#neksckudil .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#neksckudil .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#neksckudil .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#neksckudil .gt_row_group_first td {
  border-top-width: 2px;
}

#neksckudil .gt_row_group_first th {
  border-top-width: 2px;
}

#neksckudil .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#neksckudil .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#neksckudil .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#neksckudil .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#neksckudil .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#neksckudil .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#neksckudil .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#neksckudil .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#neksckudil .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#neksckudil .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#neksckudil .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#neksckudil .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#neksckudil .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#neksckudil .gt_left {
  text-align: left;
}

#neksckudil .gt_center {
  text-align: center;
}

#neksckudil .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#neksckudil .gt_font_normal {
  font-weight: normal;
}

#neksckudil .gt_font_bold {
  font-weight: bold;
}

#neksckudil .gt_font_italic {
  font-style: italic;
}

#neksckudil .gt_super {
  font-size: 65%;
}

#neksckudil .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#neksckudil .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#neksckudil .gt_indent_1 {
  text-indent: 5px;
}

#neksckudil .gt_indent_2 {
  text-indent: 10px;
}

#neksckudil .gt_indent_3 {
  text-indent: 15px;
}

#neksckudil .gt_indent_4 {
  text-indent: 20px;
}

#neksckudil .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
<th id="sample_size" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">sample_size</th>
<th id="wage" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">wage</th>
<th id="at_cap" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">at_cap</th>
<th id="union_wage" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">union_wage</th>
<th id="nonunion_wage" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">nonunion_wage</th>
<th id="union_wage_premium_raw" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">union_wage_premium_raw</th>
<th id="union_wage_premium_adjusted" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">union_wage_premium_adjusted</th>
<th id="facet" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">facet</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">94818</td>
<td class="gt_row gt_right" headers="wage">28.09587</td>
<td class="gt_row gt_right" headers="at_cap">0.05071279</td>
<td class="gt_row gt_right" headers="union_wage">31.70222</td>
<td class="gt_row gt_right" headers="nonunion_wage">27.64805</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.14663510</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.14290078</td>
<td class="gt_row gt_left" headers="facet">all wage and salary workers</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">48157</td>
<td class="gt_row gt_right" headers="wage">31.31306</td>
<td class="gt_row gt_right" headers="at_cap">0.07093566</td>
<td class="gt_row gt_right" headers="union_wage">34.02119</td>
<td class="gt_row gt_right" headers="nonunion_wage">30.96146</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.09882383</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.17838623</td>
<td class="gt_row gt_left" headers="facet">demographics: male</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">46661</td>
<td class="gt_row gt_right" headers="wage">24.64259</td>
<td class="gt_row gt_right" headers="at_cap">0.02903222</td>
<td class="gt_row gt_right" headers="union_wage">28.99576</td>
<td class="gt_row gt_right" headers="nonunion_wage">24.12817</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.20173885</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.10255232</td>
<td class="gt_row gt_left" headers="facet">demographics: female</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">40352</td>
<td class="gt_row gt_right" headers="wage">31.72107</td>
<td class="gt_row gt_right" headers="at_cap">0.07324656</td>
<td class="gt_row gt_right" headers="union_wage">34.46735</td>
<td class="gt_row gt_right" headers="nonunion_wage">31.36370</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.09895673</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.17714998</td>
<td class="gt_row gt_left" headers="facet">demographics: white male</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">37864</td>
<td class="gt_row gt_right" headers="wage">24.57163</td>
<td class="gt_row gt_right" headers="at_cap">0.02741190</td>
<td class="gt_row gt_right" headers="union_wage">28.91303</td>
<td class="gt_row gt_right" headers="nonunion_wage">24.06818</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.20129693</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.09296709</td>
<td class="gt_row gt_left" headers="facet">demographics: white female</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">3607</td>
<td class="gt_row gt_right" headers="wage">23.72498</td>
<td class="gt_row gt_right" headers="at_cap">0.02696504</td>
<td class="gt_row gt_right" headers="union_wage">30.11012</td>
<td class="gt_row gt_right" headers="nonunion_wage">22.74304</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.32392681</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.17447826</td>
<td class="gt_row gt_left" headers="facet">demographics: black male</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">4577</td>
<td class="gt_row gt_right" headers="wage">21.96607</td>
<td class="gt_row gt_right" headers="at_cap">0.02158116</td>
<td class="gt_row gt_right" headers="union_wage">26.77524</td>
<td class="gt_row gt_right" headers="nonunion_wage">21.29592</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.25729427</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.14210089</td>
<td class="gt_row gt_left" headers="facet">demographics: black female</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">6897</td>
<td class="gt_row gt_right" headers="wage">22.11324</td>
<td class="gt_row gt_right" headers="at_cap">0.02291996</td>
<td class="gt_row gt_right" headers="union_wage">30.18838</td>
<td class="gt_row gt_right" headers="nonunion_wage">21.20103</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.42391109</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.24975224</td>
<td class="gt_row gt_left" headers="facet">demographics: hispanic male</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">5947</td>
<td class="gt_row gt_right" headers="wage">18.81279</td>
<td class="gt_row gt_right" headers="at_cap">0.01247475</td>
<td class="gt_row gt_right" headers="union_wage">25.42001</td>
<td class="gt_row gt_right" headers="nonunion_wage">18.14904</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.40062550</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.15435517</td>
<td class="gt_row gt_left" headers="facet">demographics: hispanic female</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Let’s remove “<code>demographics:</code>” and the all jobs data and then split the <code>facet</code> description into race and sex. I’m replacing <code>"demographics: "</code> with an empty string using <code>str_replace</code>.</p>
<p>From <a href="https://tidyr.tidyverse.org/">tidyR</a>, <code>separate()</code> does a pretty good job of guessing how to split the data, but you can always give it the pattern to split on. Note that <code>separate()</code> has superseded in favour of&nbsp;<a href="https://tidyr.tidyverse.org/reference/separate_wider_delim.html"><code>separate_wider_position()</code></a>&nbsp;and&nbsp;<a href="https://tidyr.tidyverse.org/reference/separate_wider_delim.html"><code>separate_wider_delim()</code></a>, but it still supported.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">wages_2019_demo3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> wages_2019_demo2[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,]</span>
<span id="cb6-2"></span>
<span id="cb6-3">wages_2019_demo3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> wages_2019_demo3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">facet =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace</span>(facet, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"demographics: "</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">separate</span>(facet, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"race"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sex"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 2 pieces. Missing pieces filled with `NA` in 2 rows [1, 2].</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">wages_2019_demo2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="aaypntbqeb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#aaypntbqeb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#aaypntbqeb thead, #aaypntbqeb tbody, #aaypntbqeb tfoot, #aaypntbqeb tr, #aaypntbqeb td, #aaypntbqeb th {
  border-style: none;
}

#aaypntbqeb p {
  margin: 0;
  padding: 0;
}

#aaypntbqeb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#aaypntbqeb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#aaypntbqeb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#aaypntbqeb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#aaypntbqeb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aaypntbqeb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aaypntbqeb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aaypntbqeb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#aaypntbqeb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#aaypntbqeb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#aaypntbqeb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#aaypntbqeb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#aaypntbqeb .gt_spanner_row {
  border-bottom-style: hidden;
}

#aaypntbqeb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#aaypntbqeb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#aaypntbqeb .gt_from_md > :first-child {
  margin-top: 0;
}

#aaypntbqeb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#aaypntbqeb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#aaypntbqeb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#aaypntbqeb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#aaypntbqeb .gt_row_group_first td {
  border-top-width: 2px;
}

#aaypntbqeb .gt_row_group_first th {
  border-top-width: 2px;
}

#aaypntbqeb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aaypntbqeb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#aaypntbqeb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#aaypntbqeb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aaypntbqeb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aaypntbqeb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#aaypntbqeb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#aaypntbqeb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#aaypntbqeb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aaypntbqeb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aaypntbqeb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#aaypntbqeb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aaypntbqeb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#aaypntbqeb .gt_left {
  text-align: left;
}

#aaypntbqeb .gt_center {
  text-align: center;
}

#aaypntbqeb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#aaypntbqeb .gt_font_normal {
  font-weight: normal;
}

#aaypntbqeb .gt_font_bold {
  font-weight: bold;
}

#aaypntbqeb .gt_font_italic {
  font-style: italic;
}

#aaypntbqeb .gt_super {
  font-size: 65%;
}

#aaypntbqeb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#aaypntbqeb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#aaypntbqeb .gt_indent_1 {
  text-indent: 5px;
}

#aaypntbqeb .gt_indent_2 {
  text-indent: 10px;
}

#aaypntbqeb .gt_indent_3 {
  text-indent: 15px;
}

#aaypntbqeb .gt_indent_4 {
  text-indent: 20px;
}

#aaypntbqeb .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
<th id="sample_size" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">sample_size</th>
<th id="wage" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">wage</th>
<th id="at_cap" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">at_cap</th>
<th id="union_wage" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">union_wage</th>
<th id="nonunion_wage" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">nonunion_wage</th>
<th id="union_wage_premium_raw" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">union_wage_premium_raw</th>
<th id="union_wage_premium_adjusted" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">union_wage_premium_adjusted</th>
<th id="facet" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">facet</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">94818</td>
<td class="gt_row gt_right" headers="wage">28.09587</td>
<td class="gt_row gt_right" headers="at_cap">0.05071279</td>
<td class="gt_row gt_right" headers="union_wage">31.70222</td>
<td class="gt_row gt_right" headers="nonunion_wage">27.64805</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.14663510</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.14290078</td>
<td class="gt_row gt_left" headers="facet">all wage and salary workers</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">48157</td>
<td class="gt_row gt_right" headers="wage">31.31306</td>
<td class="gt_row gt_right" headers="at_cap">0.07093566</td>
<td class="gt_row gt_right" headers="union_wage">34.02119</td>
<td class="gt_row gt_right" headers="nonunion_wage">30.96146</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.09882383</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.17838623</td>
<td class="gt_row gt_left" headers="facet">demographics: male</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">46661</td>
<td class="gt_row gt_right" headers="wage">24.64259</td>
<td class="gt_row gt_right" headers="at_cap">0.02903222</td>
<td class="gt_row gt_right" headers="union_wage">28.99576</td>
<td class="gt_row gt_right" headers="nonunion_wage">24.12817</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.20173885</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.10255232</td>
<td class="gt_row gt_left" headers="facet">demographics: female</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">40352</td>
<td class="gt_row gt_right" headers="wage">31.72107</td>
<td class="gt_row gt_right" headers="at_cap">0.07324656</td>
<td class="gt_row gt_right" headers="union_wage">34.46735</td>
<td class="gt_row gt_right" headers="nonunion_wage">31.36370</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.09895673</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.17714998</td>
<td class="gt_row gt_left" headers="facet">demographics: white male</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">37864</td>
<td class="gt_row gt_right" headers="wage">24.57163</td>
<td class="gt_row gt_right" headers="at_cap">0.02741190</td>
<td class="gt_row gt_right" headers="union_wage">28.91303</td>
<td class="gt_row gt_right" headers="nonunion_wage">24.06818</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.20129693</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.09296709</td>
<td class="gt_row gt_left" headers="facet">demographics: white female</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">3607</td>
<td class="gt_row gt_right" headers="wage">23.72498</td>
<td class="gt_row gt_right" headers="at_cap">0.02696504</td>
<td class="gt_row gt_right" headers="union_wage">30.11012</td>
<td class="gt_row gt_right" headers="nonunion_wage">22.74304</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.32392681</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.17447826</td>
<td class="gt_row gt_left" headers="facet">demographics: black male</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">4577</td>
<td class="gt_row gt_right" headers="wage">21.96607</td>
<td class="gt_row gt_right" headers="at_cap">0.02158116</td>
<td class="gt_row gt_right" headers="union_wage">26.77524</td>
<td class="gt_row gt_right" headers="nonunion_wage">21.29592</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.25729427</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.14210089</td>
<td class="gt_row gt_left" headers="facet">demographics: black female</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">6897</td>
<td class="gt_row gt_right" headers="wage">22.11324</td>
<td class="gt_row gt_right" headers="at_cap">0.02291996</td>
<td class="gt_row gt_right" headers="union_wage">30.18838</td>
<td class="gt_row gt_right" headers="nonunion_wage">21.20103</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.42391109</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.24975224</td>
<td class="gt_row gt_left" headers="facet">demographics: hispanic male</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2019</td>
<td class="gt_row gt_right" headers="sample_size">5947</td>
<td class="gt_row gt_right" headers="wage">18.81279</td>
<td class="gt_row gt_right" headers="at_cap">0.01247475</td>
<td class="gt_row gt_right" headers="union_wage">25.42001</td>
<td class="gt_row gt_right" headers="nonunion_wage">18.14904</td>
<td class="gt_row gt_right" headers="union_wage_premium_raw">0.40062550</td>
<td class="gt_row gt_right" headers="union_wage_premium_adjusted">0.15435517</td>
<td class="gt_row gt_left" headers="facet">demographics: hispanic female</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now, I don’t need male and female total rows except to check the numbers (the first two rows). I see the subcategories don’t add up to these upper-level demographic categories. Male + female does equal the total number of workers (“all&nbsp;wage&nbsp;and&nbsp;salary&nbsp;workers”), but the individual subgroups of male and female don’t add up to the totals (hispanic male + white male + black male &gt; male). One explanation is that some survey participants chose to identify in multiple categories. This data isn’t the greatest choice for a treemap since some participants will appear in multiple boxes, but I will proceed with the graph.</p>
<p>Remove the first two rows. Treemap will generate the totals using the sample size from each subcategory.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">wages_2019_demo3a <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> wages_2019_demo3[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, ]</span></code></pre></div>
</div>
</section>
<section id="making-a-treemap-with-the-treemap-package" class="level2">
<h2 class="anchored" data-anchor-id="making-a-treemap-with-the-treemap-package">Making a Treemap with the treemap package</h2>
<p>Using the <a href="https://CRAN.R-project.org/package=treemap">treemap package</a> as recommended by <a href="https://r-graph-gallery.com/treemap.html">The R Graph Gallery</a>. There isn’t a built-in way to display the numerical data, so I will construct that as a separate field. It will consist of the subgroup name, a new line, and then the sample size for that subgroup.</p>
<p>I’m keeping many of the defaults for the treemap. You can specify the palette and details about how the blocks will be arranged, but I’m not tweaking those parameters. The package also doesn’t have a caption or subtitle option, so I’m including the data source in the title.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Make the label with the subgroup and sample size.</span></span>
<span id="cb10-2">wages_2019_demo3a <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> wages_2019_demo3a <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">race_sample_size =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(race, sample_size, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>))</span>
<span id="cb10-4"></span>
<span id="cb10-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Making the tree map</span></span>
<span id="cb10-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">treemap</span>(</span>
<span id="cb10-7">  wages_2019_demo3a,</span>
<span id="cb10-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">index =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sex"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"race_sample_size"</span>),</span>
<span id="cb10-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vSize =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sample_size"</span>,</span>
<span id="cb10-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>,</span>
<span id="cb10-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bg.labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>),</span>
<span id="cb10-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">align.labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"center"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"center"</span>),</span>
<span id="cb10-13">                      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>)),</span>
<span id="cb10-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sample Size of Different Demographic Groups (2019) [data from unionstats.com]"</span>,</span>
<span id="cb10-15">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontsize.title =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span></span>
<span id="cb10-16">)     </span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-09-05-TidyTuesday-Labor/labor_files/figure-html/static tree map-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interactive-treemap-with-d3treer" class="level2">
<h2 class="anchored" data-anchor-id="interactive-treemap-with-d3treer">Interactive Treemap with d3treeR</h2>
<p>I can also make an interactive treemap using the <a href="https://github.com/d3treeR/d3treeR">d3treeR package</a>. Like many of the other interactive graphs I’ve created, this is a wrapper for a javscript module and can be additionally interacted with using <a href="https://www.htmlwidgets.org/"><code>htmlwidgets</code></a>.</p>
<p>This package needs to be installed via <code>devtools::install_github("d3treeR/d3treeR")</code>. There is a similarly named package on CRAN (d3Tree), but that isn’t what you need.</p>
<p>Here, I made a new treemap without the numerical data label I made for the static map. The <code>d3tree2</code> function will automatically display that information as you hover over the boxes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">inter <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">d3tree2</span>(</span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">treemap</span>(</span>
<span id="cb11-3">    wages_2019_demo3a,</span>
<span id="cb11-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">index =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sex"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"race"</span>),</span>
<span id="cb11-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vSize =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sample_size"</span>,</span>
<span id="cb11-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>,</span>
<span id="cb11-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bg.labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>),</span>
<span id="cb11-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">align.labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"center"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"center"</span>),</span>
<span id="cb11-9">                        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>))</span>
<span id="cb11-10">  ),</span>
<span id="cb11-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rootname =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sample Size of Different Demographic Groups (from unionstats.com)"</span></span>
<span id="cb11-12">)</span></code></pre></div>
</div>
<p>Weirdly, when you run the above codeblock, the static map created by the treemap call is displayed, even though the interactive map isn’t. This can be mitigated by setting the output of the code block to false if you are using markdown or quarto.</p>
<p>And then you can display the interactive map.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">inter</span></code></pre></div>
<div class="cell-output-display">
<div class="d3tree2 html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-34757917230ee5f00706" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-34757917230ee5f00706">{"x":{"data":{"name":"Sample Size of Different Demographic Groups (from unionstats.com)","id":1,"size":null,"children":[{"name":"female","color":"#7EBA68","h":1,"id":2,"size":48388,"stdErr":48388,"vColor":3,"vSize":48388,"w":0.4875659989520778,"x0":0.5124340010479222,"y0":0,"children":[{"name":"black","color":"#919710","h":0.2174919401504505,"id":3,"size":4577,"stdErr":4577,"vColor":1,"vSize":4577,"w":0.212047660319618,"x0":0.787952339680382,"y0":0},{"name":"hispanic","color":"#00A76E","h":0.2174919401504505,"id":4,"size":5947,"stdErr":5947,"vColor":1,"vSize":5947,"w":0.2755183386324598,"x0":0.5124340010479222,"y0":0},{"name":"white","color":"#60A040","h":0.7825080598495495,"id":5,"size":37864,"stdErr":37864,"vColor":1,"vSize":37864,"w":0.4875659989520778,"x0":0.5124340010479222,"y0":0.2174919401504505}]},{"name":"male","color":"#D494E1","h":1,"id":6,"size":50856,"stdErr":50856,"vColor":3,"vSize":50856,"w":0.5124340010479222,"x0":0,"y0":0,"children":[{"name":"black","color":"#D26FAF","h":0.2065439672801636,"id":7,"size":3607,"stdErr":3607,"vColor":1,"vSize":3607,"w":0.1759662454093541,"x0":0.3364677556385681,"y0":0},{"name":"hispanic","color":"#9087D7","h":0.2065439672801636,"id":8,"size":6897,"stdErr":6897,"vColor":1,"vSize":6897,"w":0.3364677556385681,"x0":0,"y0":0},{"name":"white","color":"#BD76CB","h":0.7934560327198364,"id":9,"size":40352,"stdErr":40352,"vColor":1,"vSize":40352,"w":0.5124340010479222,"x0":0,"y0":0.2065439672801636}]}]},"meta":{"type":"index","vSize":"sample_size","vColor":null,"stdErr":"sample_size","algorithm":"pivotSize","vpCoorX":[0.02812148481439815,0.9718785151856019],"vpCoorY":[0.01968503937007871,0.9103149606299213],"aspRatio":1.483511625850942,"range":null,"mapping":[null,null,null],"draw":true},"legend":null,"options":{"celltext":"name","id":"id","valueField":"size","clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="conclusions" class="level2">
<h2 class="anchored" data-anchor-id="conclusions">Conclusions</h2>
<p>Some demographic subgroups do represent under 5% of the total workforce surveyed. For the race category, it appears that some respondents chose more than one category, which could be a problem for imputed data based on matching demographic characteristics.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sinks2023,
  author = {Sinks, Louise E.},
  title = {TidyTuesday 36: {Visualizing} {Worker} {Demographic}
    {Information} with {Treemaps}},
  date = {2023-09-05},
  url = {https://lsinks.github.io/posts/2023-09-05-TidyTuesday-Labor/labor.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sinks2023" class="csl-entry quarto-appendix-citeas">
Sinks, Louise E. 2023. <span>“TidyTuesday 36: Visualizing Worker
Demographic Information with Treemaps.”</span> September 5, 2023. <a href="https://lsinks.github.io/posts/2023-09-05-TidyTuesday-Labor/labor.html">https://lsinks.github.io/posts/2023-09-05-TidyTuesday-Labor/labor.html</a>.
</div></div></section></div> ]]></description>
  <category>data visualization</category>
  <category>R</category>
  <category>R-code</category>
  <category>code-along</category>
  <category>treemap</category>
  <category>tidyTuesday</category>
  <category>d3treeR</category>
  <category>interactive</category>
  <guid>https://sarahsmithtripp.github.io/posts/2023-09-05-TidyTuesday-Labor/labor.html</guid>
  <pubDate>Tue, 05 Sep 2023 07:00:00 GMT</pubDate>
  <media:content url="https://sarahsmithtripp.github.io/posts/2023-09-05-TidyTuesday-Labor/thumbnail.png" medium="image" type="image/png" height="89" width="144"/>
</item>
<item>
  <title>TidyTuesday 35: Exploring Fair Use Cases</title>
  <dc:creator>Louise E. Sinks</dc:creator>
  <link>https://sarahsmithtripp.github.io/posts/2023-08-29-TidyTuesday-fair-use/tidytuesday35-fair-use.html</link>
  <description><![CDATA[ 




<section id="introoverview" class="level2">
<h2 class="anchored" data-anchor-id="introoverview">Intro/Overview</h2>
<p>Today’s <a href="https://github.com/rfordatascience/tidytuesday">TidyTuesday concerns US copyright law</a>. Fair use is the right to use copyrighted materials in some instances. Fair use law isn’t always clear, and there is often litigation to decide whether something is fair use. This week’s TidyTuesday uses a data set created by web scraping to get information about federal court cases on fair use. This week’s data comes with the following warning:</p>
<blockquote class="blockquote">
<p>There are two datasets this week for which the rows align, but the values might not precisely line up for a clean join -- a case you often have to deal with in real-world data.</p>
</blockquote>
<p>I think I want to do a visualization around that comment- what percentage of the data doesn’t precisely align, and are there common types of mismatches?</p>
</section>
<section id="setting-up" class="level2">
<h2 class="anchored" data-anchor-id="setting-up">Setting Up</h2>
<section id="loading-libraries" class="level3">
<h3 class="anchored" data-anchor-id="loading-libraries">Loading Libraries</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Who doesn't want to be tidy?</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(gt) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for nice tables</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(cowplot) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for composite graphs</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggthemes) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># themes for ggplot</span></span></code></pre></div>
</div>
</section>
<section id="loading-data" class="level3">
<h3 class="anchored" data-anchor-id="loading-data">Loading Data</h3>
<p>Reading in the data using the tidytuesday package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">tuesdata <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tidytuesdayR<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tt_load</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2023</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">week =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">35</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Compiling #TidyTuesday Information for 2023-08-29 ----</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- There are 2 files available ---</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Starting Download ---</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Downloading file 1 of 2: `fair_use_cases.csv`
    Downloading file 2 of 2: `fair_use_findings.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Download complete ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">fair_use_cases <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tuesdata<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fair_use_cases</span>
<span id="cb8-2">fair_use_findings <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tuesdata<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fair_use_findings</span></code></pre></div>
</div>
</section>
</section>
<section id="preliminary-exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="preliminary-exploratory-data-analysis">Preliminary Exploratory Data Analysis</h2>
<p>Looking at the <a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-08-29/readme.md#cleaning-script">cleaning script</a>, it appears that the <code>fair_use_cases</code> comes from the <a href="https://www.copyright.gov/fair-use/fair-index.html">table found at copyright.gov</a>. This table has some summary information about the case and a link to the court rulings (a pdf). The <code>fair_use_findings</code> dataframe contains additional information about the case extracted from the pdf of the court rulings. Indeed, there are 251 rows in each dataframe, and the way the dataframes are generated, they should match up.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">fair_use_cases <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() </span></code></pre></div>
<div class="cell-output-display">
<div id="vkzchwdwgs" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vkzchwdwgs table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vkzchwdwgs thead, #vkzchwdwgs tbody, #vkzchwdwgs tfoot, #vkzchwdwgs tr, #vkzchwdwgs td, #vkzchwdwgs th {
  border-style: none;
}

#vkzchwdwgs p {
  margin: 0;
  padding: 0;
}

#vkzchwdwgs .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vkzchwdwgs .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vkzchwdwgs .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vkzchwdwgs .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vkzchwdwgs .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vkzchwdwgs .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vkzchwdwgs .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vkzchwdwgs .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vkzchwdwgs .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vkzchwdwgs .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vkzchwdwgs .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vkzchwdwgs .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vkzchwdwgs .gt_spanner_row {
  border-bottom-style: hidden;
}

#vkzchwdwgs .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vkzchwdwgs .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vkzchwdwgs .gt_from_md > :first-child {
  margin-top: 0;
}

#vkzchwdwgs .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vkzchwdwgs .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vkzchwdwgs .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vkzchwdwgs .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vkzchwdwgs .gt_row_group_first td {
  border-top-width: 2px;
}

#vkzchwdwgs .gt_row_group_first th {
  border-top-width: 2px;
}

#vkzchwdwgs .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vkzchwdwgs .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vkzchwdwgs .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vkzchwdwgs .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vkzchwdwgs .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vkzchwdwgs .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vkzchwdwgs .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vkzchwdwgs .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vkzchwdwgs .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vkzchwdwgs .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vkzchwdwgs .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vkzchwdwgs .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vkzchwdwgs .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vkzchwdwgs .gt_left {
  text-align: left;
}

#vkzchwdwgs .gt_center {
  text-align: center;
}

#vkzchwdwgs .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vkzchwdwgs .gt_font_normal {
  font-weight: normal;
}

#vkzchwdwgs .gt_font_bold {
  font-weight: bold;
}

#vkzchwdwgs .gt_font_italic {
  font-style: italic;
}

#vkzchwdwgs .gt_super {
  font-size: 65%;
}

#vkzchwdwgs .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vkzchwdwgs .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vkzchwdwgs .gt_indent_1 {
  text-indent: 5px;
}

#vkzchwdwgs .gt_indent_2 {
  text-indent: 10px;
}

#vkzchwdwgs .gt_indent_3 {
  text-indent: 15px;
}

#vkzchwdwgs .gt_indent_4 {
  text-indent: 20px;
}

#vkzchwdwgs .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="case" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">case</th>
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
<th id="court" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">court</th>
<th id="jurisdiction" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">jurisdiction</th>
<th id="categories" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">categories</th>
<th id="outcome" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">outcome</th>
<th id="fair_use_found" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">fair_use_found</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="case">De Fontbrune v. Wofsy, 39 F.4th 1214 (9th Cir. 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">9th Circuit</td>
<td class="gt_row gt_left" headers="jurisdiction">9th Circuit</td>
<td class="gt_row gt_left" headers="categories">Education/Scholarship/Research; Photograph</td>
<td class="gt_row gt_left" headers="outcome">Fair use not found</td>
<td class="gt_row gt_center" headers="fair_use_found">FALSE</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="case">Sedlik v. Von Drachenberg, No. CV 21-1102 (C.D. Cal. May 31, 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">C.D. Cal.</td>
<td class="gt_row gt_left" headers="jurisdiction">9th Circuit</td>
<td class="gt_row gt_left" headers="categories">Painting/Drawing/Graphic; Photograph</td>
<td class="gt_row gt_left" headers="outcome">Preliminary finding; Fair use not found</td>
<td class="gt_row gt_center" headers="fair_use_found">FALSE</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="case">Sketchworks Indus. Strength Comedy, Inc. v. Jacobs, No. 19-CV-7470-LTS-VF (S.D.N.Y. May 12, 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">S.D.N.Y.</td>
<td class="gt_row gt_left" headers="jurisdiction">2nd Circuit</td>
<td class="gt_row gt_left" headers="categories">Film/Audiovisual; Music; Parody/Satire; Review/Commentary</td>
<td class="gt_row gt_left" headers="outcome">Fair use found</td>
<td class="gt_row gt_center" headers="fair_use_found">TRUE</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="case">Am. Soc'y for Testing &amp; Materials v. Public.Resource.Org, Inc., No. 13-cv-1215 (D.D.C. Mar. 31, 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">D.D.C.</td>
<td class="gt_row gt_left" headers="jurisdiction">District of Columbia Circuit</td>
<td class="gt_row gt_left" headers="categories">Education/Scholarship/Research; Textual Work; Used in government proceeding</td>
<td class="gt_row gt_left" headers="outcome">Mixed Result</td>
<td class="gt_row gt_center" headers="fair_use_found">FALSE</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="case">Yang v. Mic Network Inc., Nos. 20-4097-cv, 20-4201-cv (2d Cir. Mar. 29, 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">2d Circuit</td>
<td class="gt_row gt_left" headers="jurisdiction">2nd Circuit</td>
<td class="gt_row gt_left" headers="categories">News reporting; Photography</td>
<td class="gt_row gt_left" headers="outcome">Fair use found</td>
<td class="gt_row gt_center" headers="fair_use_found">TRUE</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="case">Viacom Int’l v. Pixi Universal, Civ. Action No H-21-2612 (S.D. Tex. Mar. 25, 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">S.D. Tex.</td>
<td class="gt_row gt_left" headers="jurisdiction">5th Circuit</td>
<td class="gt_row gt_left" headers="categories">Painting/Drawing/Graphic; Parody/Satire</td>
<td class="gt_row gt_left" headers="outcome">Fair use not found</td>
<td class="gt_row gt_center" headers="fair_use_found">FALSE</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now the other dataframe. This one has some huge blocks of text in some fields, so I’m going to add a <a href="https://lsinks.github.io/posts/2023-08-04-data-cleaning-tombstone/tombstones_data_cleaning.html#styling-tables-with-gt">container to the table to make it have a vertical scroll bar</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">fair_use_findings <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tab_options</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">container.height =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">px</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">container.padding.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">px</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span>))</span></code></pre></div>
<div class="cell-output-display">
<div id="owmwcudnan" style="padding-left:0px;padding-right:0px;padding-top:24px;padding-bottom:24px;overflow-x:auto;overflow-y:auto;width:auto;height:300px;">
<style>#owmwcudnan table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#owmwcudnan thead, #owmwcudnan tbody, #owmwcudnan tfoot, #owmwcudnan tr, #owmwcudnan td, #owmwcudnan th {
  border-style: none;
}

#owmwcudnan p {
  margin: 0;
  padding: 0;
}

#owmwcudnan .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#owmwcudnan .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#owmwcudnan .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#owmwcudnan .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#owmwcudnan .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#owmwcudnan .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#owmwcudnan .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#owmwcudnan .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#owmwcudnan .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#owmwcudnan .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#owmwcudnan .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#owmwcudnan .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#owmwcudnan .gt_spanner_row {
  border-bottom-style: hidden;
}

#owmwcudnan .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#owmwcudnan .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#owmwcudnan .gt_from_md > :first-child {
  margin-top: 0;
}

#owmwcudnan .gt_from_md > :last-child {
  margin-bottom: 0;
}

#owmwcudnan .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#owmwcudnan .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#owmwcudnan .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#owmwcudnan .gt_row_group_first td {
  border-top-width: 2px;
}

#owmwcudnan .gt_row_group_first th {
  border-top-width: 2px;
}

#owmwcudnan .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#owmwcudnan .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#owmwcudnan .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#owmwcudnan .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#owmwcudnan .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#owmwcudnan .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#owmwcudnan .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#owmwcudnan .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#owmwcudnan .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#owmwcudnan .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#owmwcudnan .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#owmwcudnan .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#owmwcudnan .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#owmwcudnan .gt_left {
  text-align: left;
}

#owmwcudnan .gt_center {
  text-align: center;
}

#owmwcudnan .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#owmwcudnan .gt_font_normal {
  font-weight: normal;
}

#owmwcudnan .gt_font_bold {
  font-weight: bold;
}

#owmwcudnan .gt_font_italic {
  font-style: italic;
}

#owmwcudnan .gt_super {
  font-size: 65%;
}

#owmwcudnan .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#owmwcudnan .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#owmwcudnan .gt_indent_1 {
  text-indent: 5px;
}

#owmwcudnan .gt_indent_2 {
  text-indent: 10px;
}

#owmwcudnan .gt_indent_3 {
  text-indent: 15px;
}

#owmwcudnan .gt_indent_4 {
  text-indent: 20px;
}

#owmwcudnan .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="title" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">title</th>
<th id="case_number" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">case_number</th>
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
<th id="court" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">court</th>
<th id="key_facts" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">key_facts</th>
<th id="issue" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">issue</th>
<th id="holding" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">holding</th>
<th id="tags" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">tags</th>
<th id="outcome" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">outcome</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="title">De Fontbrune v. Wofsy</td>
<td class="gt_row gt_left" headers="case_number">39 F.4th 1214 (9th Cir. 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">United States Court of Appeals for the Ninth Circuit</td>
<td class="gt_row gt_left" headers="key_facts">Plaintiffs own the rights to a catalogue comprised of 16,000 photographs of Pablo Picasso’s work, which was originally compiled by Picasso’s friend in 1932 (the “Zervos Catalogue”). In 1995, after obtaining permission from Picasso’s estate to publish a work illustrating and describing works by Picasso, Defendants Alan Wofsy and his company Alan Wofsy &amp; Associates began publishing The Picasso Project—–a series of volumes reproducing images of Picasso’s work, including 1,492 photographs from the Zervos Catalogue. Plaintiffs sued for copyright infringement. A French court held the photographs were protected by copyright because they “added creative features through deliberate choices of lighting, the lens, filters, [and] framing or angle of view.” In 2001, Plaintiffs obtained a judgment in France that subjected Defendants to damages for any further acts of infringement. In 2012, after discovering copies of The Picasso Project in a French bookstore, Plaintiffs enforced their judgment in France and were awarded €2 million. Plaintiffs sought recognition of the judgment in the U.S. courts. The district court granted summary judgment for Defendants, determining that the French judgment was “repugnant to U.S. public policy protecting free expression” because it failed to provide a fair use defense. Plaintiffs appealed; and Defendants cross-appealed on other defenses.</td>
<td class="gt_row gt_left" headers="issue">Whether reproduction of photographs documenting artwork in a reference book that was sold commercially is a fair use.</td>
<td class="gt_row gt_left" headers="holding">The panel held that the first factor, the purpose and character of the use, weighed against fair use because Defendants conceded that The Picasso Project was a commercial venture and the use at issue—reproduction of the photographs in a book illustrating Picasso’s works—was not transformative. Specifically, the court noted that Defendants’ use “did not serve an ‘entirely different function’ than the originals,” but had overlapping purposes, and the insertion of informative captions did not “necessarily” transform the works. The second factor, the nature of the copyrighted work, did not favor fair use because, although the works were published and documentary in nature, the French court had concluded that the photographs exhibited creative elements. The court determined that the third factor, the amount and substantiality of the work used, weighed against fair use because Defendants failed to demonstrate that “copying the entirety of each photograph was necessary.” The fourth factor, the effect of the use upon the potential market for or value of the copyrighted work, also weighed against fair use because there is a presumption of market harm when the use is commercial and non-transformative. Although Defendants presented evidence that auction prices for the Zervos Catalogue increased while The Picasso Project was on the market, Defendants had not provided evidence that “widespread appropriation” of the works would not harm the market for the photographs. Weighing all the factors, the court had “serious doubts” that fair use would protect Defendants’ use, and, accordingly, granted summary judgment to Plaintiffs on the public policy defense.</td>
<td class="gt_row gt_left" headers="tags">Education/Scholarship/Research; Photograph</td>
<td class="gt_row gt_left" headers="outcome">Fair use not found</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="title">Sedlik v. Von Drachenberg</td>
<td class="gt_row gt_left" headers="case_number">No. CV 21-1102, 2022 WL 2784818 (C.D. Cal. May 31, 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">United States District Court for the Southern District of New York</td>
<td class="gt_row gt_left" headers="key_facts">Plaintiff Jeffrey Sedlik is a photographer who created an iconic portrait of musician Miles Davis, which he has licensed for various uses (the “Portrait”). Defendant Katherine Von Drachenberg, professionally known as Kat Von D, is a celebrity tattooist. In 2017, Kat Von D inked a tattoo on the arm of a friend, Blake Farmer, as a gift. Farmer chose the Portrait as the reference image for his tattoo. Kat Von D traced a printout of the Portrait to create a line drawing and stencil to transfer to Farmer’s arm, then completed the tattoo freehand. Kat Von D and the tattoo shop hosting her both posted a photograph of Kat Von D tattooing Farmer’s arm with the Portrait in the background, as well as a photograph of the finished tattoo. Kat Von D also posted a short video of herself inking the tattoo. Sedlik sued and moved for summary judgment on his claim of copyright infringement. Defendants moved for summary judgment, asserting fair use.</td>
<td class="gt_row gt_left" headers="issue">Whether use of a photograph as the reference image for a realistic tattoo is fair use.</td>
<td class="gt_row gt_left" headers="holding">Considering the first fair use factor, the purpose and character of the use, the court found triable issues as to the transformativeness and commercial nature of the work. The court rejected Kat Von D’s arguments that the tattoo was transformative because of Farmer’s personal connection to the image in the Portrait and by nature of it being permanently imprinted on Farmer’s body. The court concluded that a jury should determine whether the visual differences between the Portrait and the tattoo, such as additional shading and the elimination of the black background, are significant enough to render the tattoo transformative. The court also stated that a jury should decide whether Kat Von D’s use of the work was commercial, noting that she did not charge Farmer for the tattoo but could have derived an indirect economic benefit from promotion of the tattoo on social media. The court found that the second factor, the nature of the copyrighted work, favored fair use because although the Portrait is creative, it was published several decades ago and has been widely disseminated. The third factor, the amount and substantiality of the portion used, weighed against fair use because Kat Von D chose to copy certain expressive elements of the Portrait that were not necessary to achieve her stated purpose of expressing “a sentiment of melancholy.” On the fourth factor, the effect of the use upon the potential market for or value of the copyrighted work, while the court concluded the tattoo was not a substitute in the primary market for the Portrait, it found that Sedlik raised a triable issue as to whether a future market exists for licensing the Portrait for use in creating tattoos. Because the court found triable issues concerning the statutory factors, it declined to address a non-statutory factor raised by defendants—“fundamental rights of bodily integrity and personal expression”—and concluded that fair use in this case should be decided by a jury.</td>
<td class="gt_row gt_left" headers="tags">Painting/Drawing/Graphic; Photograph</td>
<td class="gt_row gt_left" headers="outcome">Preliminary finding; Fair use not found</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="title">Sketchworks Indus. Strength Comedy, Inc. v. Jacobs</td>
<td class="gt_row gt_left" headers="case_number">No. 19-CV-7470-LTS-VF, 2022 U.S. Dist. LEXIS 86331 (S.D.N.Y. May 12, 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">United States District Court for the Southern District of New York</td>
<td class="gt_row gt_left" headers="key_facts">Plaintiff Sketchworks Industrial Strength Comedy, Inc. (“Sketchworks”) is a sketch comedy company that created and owns a copyright in Vape, a stage musical that is an alleged parody of the theatrical work and film, Grease. Vape follows the same characters along roughly the same story-arc and in the same setting as Grease and incorporates portions of the film’s music. Defendants are the trustees for the individual trusts of the co-authors of Grease. Just before Vape was scheduled to be performed, Defendants sent Sketchworks and the theater where Vape was to be performed cease and desist letters, and the performances were cancelled. Sketchworks brought an action against Defendants seeking a declaratory judgment that Vape constitutes fair use of Grease, asserting that Vape is a parody that uses millennial slang, pop culture references, and exaggeration to comment on Grease and criticize its misogynistic and sexist elements. Defendants disputed that Vape is a parody and asserted that it infringes their copyright in Grease. The parties cross- moved for judgment on the pleadings.</td>
<td class="gt_row gt_left" headers="issue">Whether the use of protected elements, including music, plot, characters, dialogue, and setting, from a theatrical work and film to create a parodic stage musical is fair use.</td>
<td class="gt_row gt_left" headers="holding">The court found that the first factor, the purpose and character of the use, favored fair use because Vape is a parody of Grease and is therefore transformative. Critical to this determination, the court found that Vape juxtaposed “familiar elements from Grease, such as the main characters and the plot arc, with alterations to the script and song lyrics” to highlight the experiences of Grease’s female characters and “comment on how misogynistic tendencies have both evolved since Grease was developed and remain the same.” The second factor, the nature of the copyrighted work, disfavored fair use because Grease’s creative expression fell “within the core of the copyright’s protective purposes.” The court, however, declined to give this factor much weight, reasoning that parodies typically copy publicly known, expressive works. The third factor, the amount and substantiality of the use, weighed in favor of fair use. Although Vape took “substantial elements” from Grease, the court found that “the taking was not excessive” because use of those elements was necessary to achieve Vape’s parodic purpose and communicate its criticism of certain aspects of Grease. The fourth factor, the effect of the use on the potential market for or value of the copyrighted work, also weighed in favor of fair use because any potential harm to Grease’s market value for derivatives was likely “minimal.” While Vape updated some of the language and cultural references from Grease, the court found that Vape “cannot be reasonably viewed as a derivative ‘sequel to, . . . or updated remake, of Grease,’” because its updates were done “in a spirit of mockery.” Further, the court commented that any effect on the demand for derivatives attributable to Vape’s “critical nature” is not remediable under copyright law. Weighing the four factors together, the court concluded that Vape constitutes a fair use of Grease and granted Sketchworks’ motion for judgment on the pleadings.</td>
<td class="gt_row gt_left" headers="tags">Film/Audiovisual; Music; Parody/Satire; Review/Commentary</td>
<td class="gt_row gt_left" headers="outcome">Fair use found</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="title">Am. Soc'y for Testing &amp; Materials v. Public.Resource.Org, Inc.</td>
<td class="gt_row gt_left" headers="case_number">No. 13-cv-1215 (TSC), 2022 U.S. Dist. LEXIS 60922 (D.D.C. Mar. 31, 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">United States District Court for the District of Columbia</td>
<td class="gt_row gt_left" headers="key_facts">Defendant Public.Resource.Org, Inc., a non-profit organization, has a mission to make the “law and other government materials more widely available so that people, businesses, and organizations can easily read and discuss [the] laws and the operations of government.” Plaintiffs consist of three non-profit standards-developing organizations: (1) “ASTM,” which is focused on industry-related technical and safety standards; (2) “NFPA,” which is focused on safety standards; and (3) “ASHRAE,” which is focused on construction-related standards. Plaintiffs own copyrights in various “voluntary consensus standards,” which are developed by numerous subject matter experts under Plaintiffs’ guidance. Plaintiffs sell PDFs and hard copies of their standards and maintain reading rooms for viewing the standards. Defendant purchased hard copies of Plaintiffs’ standards and, without authorization, scanned and made digital, verbatim, copies freely available online to the public. This case concerns 191 ASTM standards, 23 NFPA standards, and 3 ASHRAE standards that Defendant claims have been incorporated by reference into federal law. Plaintiffs brought copyright, trademark, and unfair competition claims; Defendant countersued, seeking declaratory judgment. The parties filed motions for summary judgment. In 2017, the district court found that all factors weighed against fair use. On appeal, the court of appeals reversed in part and remanded the case back to the district court without a detailed discussion of the fair use factors for additional factual development. On remand, both parties again moved for summary judgment.</td>
<td class="gt_row gt_left" headers="issue">Whether it is fair use to make available online for free a verbatim copy of privately developed standards, which have been incorporated by reference into law, without obtaining authorization from the copyright owner.</td>
<td class="gt_row gt_left" headers="holding">As directed by the court of appeals, the district court conducted a four-step fair use analysis for each of the 217 allegations of infringement, concluding that Defendant’s reproduction of 184 standards was fair use, reproduction of 32 standards was not fair use, and that portions of the reproduction of 1 standard was fair use. For all 217 standards, the court found that the fourth factor, the effect of the use upon the potential market for or value of the work, favored fair use. Having found that Defendant’s use was noncommercial, the court determined that Plaintiffs did not provide sufficient evidence to show some meaningful likelihood of future harm exists. The court noted that it was “less deferential” to Plaintiffs’ “conclusory opinions” about market harm given that, during the elapsed time since the alleged infringement and the commencement of the litigation Plaintiffs could have provided “economic data and analysis” supporting their arguments. The court also found that Defendant’s reproductions did not have a “substantially adverse impact on the potential market for the originals.” Regarding the 184 standards that the court found Defendant reproduced fairly, the court determined that 153 were incorporated by reference into law and that the other 31 were identical in text to standards incorporated by reference. The court concluded that the first factor, the purpose and character of the use, generally favored fair use because Defendant did not “stand to profit” from the reproduction and that its purpose was “to inform the public about the law and facilitate public debate.” The court noted that Defendant’s use qualified as one that “furthere[d] the purposes” of fair use, and generally provided information “essential for a private entity to comprehend its legal duties,” which weighed “heavily in favor” of fair use. In assessing the second factor, the nature of the copyrighted work, the court considered that “the express text of the law falls plainly outside the realm of copyright protection” and determined that consequently the standards incorporated by reference “are, at best, at the outer edge of ‘copyright's protective purposes.’” Thus, this factor weighed “heavily in favor” of fair use. The court explained that the 184 standards were incorporated into law “without limitation” such that “the consequence of the incorporation by reference is virtually indistinguishable from a situation in which the standard had been expressly copied into law.” The third factor, the amount and substantiality of the portion used, also favored fair use as the court found that “a greater amount of the standard's text might be fairly reproduced” because the incorporating regulations did “not specify” whether certain provisions, or the entire text, of the standards were incorporated by reference into law and did not indicate which specific provisions were “relevant for regulatory guidance.” Balancing the factors, the court found fair use and denied Plaintiffs’ motion for summary judgment regarding these 184 standards. Regarding the 32 standards that the court found were not reproduced fairly, the court noted that these standards were not shown to be incorporated by reference into law and “differ[ed] in substantive ways from those incorporated by reference into law.” Discussing the first factor, the court found that this factor weighed slightly against fair use because Defendant’s purpose of “inform[ing] the public about the law” was not “significantly furthered” by publishing standards with substantive differences from the standards that were incorporated by reference. The second factor weighed against fair use because there was no evidence showing that the standards were incorporated into law. And, although the standards were more factual than creative, the court concluded that these works “fall more squarely within the realm of copyright protection” than standards incorporated into law. The third factor weighed against fair use, as Defendant’s purpose of informing the public about the law “could be achieved with a paraphrase or summary.” The court also noted that “[i]ncorporating one standard by reference does not justify posting provisions of a different version that has not been incorporated into law.” Balancing these factors, the court did not find fair use and denied Defendant’s motion for summary judgment regarding these 32 standards. Regarding the 1 standard where the court found that portions of the reproduced standard were used fairly, only the parts incorporated by reference into a regulation were found to be fair use. In its second factor analysis, distinguishing the portions not incorporated into law, the court found that Defendant’s “wholesale reproduction” of the standard was “harder to justify” because only parts of the standard were incorporated into law.</td>
<td class="gt_row gt_left" headers="tags">Education/Scholarship/Research; Textual Work; Used in government proceeding</td>
<td class="gt_row gt_left" headers="outcome">Mixed Result</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="title">Yang v. Mic Network Inc.</td>
<td class="gt_row gt_left" headers="case_number">Nos. 20-4097-cv(L), 20-4201-cv (XAP), 2022 U.S. App. LEXIS 8195 (2d Cir. Mar. 29, 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">United States Court of Appeals for the Second Circuit</td>
<td class="gt_row gt_left" headers="key_facts">Plaintiff Stephen Yang (“Yang”) licensed a photograph he took of Dan Rochkind (“Rochkind”) to the New York Post, which ran the photograph in an article about Rochkind entitled “Why I Won’t Date Hot Women Anymore.” Defendant Mic Network, Inc. (“Mic”) posted its own article entitled “Twitter Is Skewering the 'New York Post' for a Piece on Why a Man ‘Won't Date Hot Women’.” The Mic article included a screenshot of the Post article that captured the headline and a portion of Yang’s photograph. Mic did not obtain a license to use the photograph. In response, Yang sued Mic for copyright infringement, and Mic moved to dismiss, asserting fair use. The district court granted Mic’s motion, concluding that its use of Yang’s photograph was fair use. Yang appealed the order and judgment.</td>
<td class="gt_row gt_left" headers="issue">Whether using a screenshot from an article, including part of a photograph, to report on and criticize the article constitutes fair use of the photograph.</td>
<td class="gt_row gt_left" headers="holding">On appeal, the court decided that the first factor, the purpose and character of the use, weighed in favor of fair use. As an initial matter, the panel held that it was not error for the district to decide transformativeness on a motion to dismiss in this case because the only two pieces of evidence needed were the original and secondary works. The court held that, in addition to identifying the subject of Mic’s criticism, Mic, also transformed the photograph by critiquing and providing commentary on the Post article. Mic did not use the photograph “merely as an illustrative aid,” and thus its use was for different purpose than the original. The second factor, the nature of the copyrighted work, had limited weight in the court’s analysis after it held that the use was transformative and thus “d[id] not counsel against a finding of fair use.” Likewise, the third factor, the amount and substantiality of the work used, did not disfavor fair use as the court agreed with the district court’s conclusion that Mic’s use of the image was reasonable to satirize the Post article. The court determined that the fourth factor, the effect of the use on the potential market for or value of the work, also favored fair use. The court concluded that Mic’s screenshot was not a competing substitute for Yang’s work because Mic did not simply republish the photograph, but instead used a screenshot consisting of a “significantly” cropped version of the work along with the Post headline. Further, Yang failed to plausibly allege that a market exists for “photographs that happen to be featured in news articles criticizing the original article in which the photograph appeared.” Weighing the factors together, the court concluded that the district court properly dismissed Yang’s copyright infringement claim on fair use grounds.</td>
<td class="gt_row gt_left" headers="tags">News Reporting; Photography</td>
<td class="gt_row gt_left" headers="outcome">Fair use found</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="title">Viacom Int’l v. Pixi Universal</td>
<td class="gt_row gt_left" headers="case_number">Civ. Action No H-21-2612, 2022 U.S. Dist. LEXIS 57400 (S.D. Tex. Mar. 25, 2022)</td>
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="court">United States District Court for the Southern District of Texas</td>
<td class="gt_row gt_left" headers="key_facts">Plaintiff Viacom International Inc. (“Viacom”) is the owner of the SpongeBob SquarePants (“SpongeBob”) entertainment franchise and holds over 400 copyright registrations for SpongeBob works, including the animated television series, feature films, two-dimensional drawings, and stylebooks featuring extensive artwork from the franchise (the “Works”). The SpongeBob television series features a fictional fast-food restaurant called the “Krusty Krab,” which Viacom once recreated as an immersive experience at a comics convention in 2019. Defendant Pixi Universal, LLC (“Pixi”) operates themed “pop-up” restaurants and bars. In 2021, Pixi recreated the Krusty Krab as a pop-up called “The Rusty Krab,” which featured recreations of the fictional restaurant and other elements of the SpongeBob series. Pixi charged a fee for admission and for food and drink. After demanding that Pixi cease using SpongeBob intellectual property, Viacom brought copyright and trademark infringement claims and sought injunctive relief. Pixi asserted fair use as its sole defense to the copyright claim.</td>
<td class="gt_row gt_left" headers="issue">Whether using elements of copyrighted works to create a themed “pop-up” business based on those works is fair use.</td>
<td class="gt_row gt_left" headers="holding">The court decided that the first factor, the purpose and character of the use, weighed against fair use. The court found that Pixi’s use was wholly commercial and that it did not transform the Works by merely changing the medium of expression. Instead, Pixi’s use shared the same purpose as the original, that is, “light-hearted entertainment.” Rejecting Pixi’s “post-hoc characterization” of its pop-up as a parody, the court found that Pixi embraced, replicated, and intended to profit from the Works. The second factor, the nature of the copyrighted work, also weighed against fair use because of the “fictional, imaginative nature” of the Works. The third factor, the amount and substantiality of the work used, likewise weighed against fair use. The court determined that, although Pixi did not copy all the details of the SpongeBob universe or even specific episode storylines, Pixi’s use of “central, principal characters and iconic locals and backgrounds from the series” was nonetheless “substantial” as it used the “heart” of the Works. Lastly, the court determined that the fourth factor, the effect of the use on the potential market for or value of the work, also weighed against fair use. The court found that the type of immersive experience that Pixi created, which was based exclusively on Viacom’s SpongeBob franchise, affected the potential market for Viacom to venture into creating or licensing derivative immersive works. Because the factors together weighed against a finding of fair use, the court concluded that Viacom was likely to succeed on its copyright infringement claim and granted its motion for preliminary injunctive relief.</td>
<td class="gt_row gt_left" headers="tags">Painting/Drawing/Graphic; Parody/Satire</td>
<td class="gt_row gt_left" headers="outcome">Fair use not found</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The <code>case</code> field in <code>fair_use_cases</code> should contain the information found in the fields <code>title</code> and <code>case_number</code> in the <code>fair_use_findings</code> dataframe. The <code>court</code> and <code>jurisdiction</code> from <code>fair_use_cases</code> should also somehow relate to the <code>court</code> listed in <code>fair_use_findings</code>.</p>
<p>I’m going to start with the <code>case</code>, <code>title</code>, and <code>case_number</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">fair_use_cases <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(case) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb11-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="ikpalqamsq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ikpalqamsq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ikpalqamsq thead, #ikpalqamsq tbody, #ikpalqamsq tfoot, #ikpalqamsq tr, #ikpalqamsq td, #ikpalqamsq th {
  border-style: none;
}

#ikpalqamsq p {
  margin: 0;
  padding: 0;
}

#ikpalqamsq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ikpalqamsq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ikpalqamsq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ikpalqamsq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ikpalqamsq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ikpalqamsq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ikpalqamsq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ikpalqamsq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ikpalqamsq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ikpalqamsq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ikpalqamsq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ikpalqamsq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ikpalqamsq .gt_spanner_row {
  border-bottom-style: hidden;
}

#ikpalqamsq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ikpalqamsq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ikpalqamsq .gt_from_md > :first-child {
  margin-top: 0;
}

#ikpalqamsq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ikpalqamsq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ikpalqamsq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ikpalqamsq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ikpalqamsq .gt_row_group_first td {
  border-top-width: 2px;
}

#ikpalqamsq .gt_row_group_first th {
  border-top-width: 2px;
}

#ikpalqamsq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ikpalqamsq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ikpalqamsq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ikpalqamsq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ikpalqamsq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ikpalqamsq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ikpalqamsq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ikpalqamsq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ikpalqamsq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ikpalqamsq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ikpalqamsq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ikpalqamsq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ikpalqamsq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ikpalqamsq .gt_left {
  text-align: left;
}

#ikpalqamsq .gt_center {
  text-align: center;
}

#ikpalqamsq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ikpalqamsq .gt_font_normal {
  font-weight: normal;
}

#ikpalqamsq .gt_font_bold {
  font-weight: bold;
}

#ikpalqamsq .gt_font_italic {
  font-style: italic;
}

#ikpalqamsq .gt_super {
  font-size: 65%;
}

#ikpalqamsq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ikpalqamsq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ikpalqamsq .gt_indent_1 {
  text-indent: 5px;
}

#ikpalqamsq .gt_indent_2 {
  text-indent: 10px;
}

#ikpalqamsq .gt_indent_3 {
  text-indent: 15px;
}

#ikpalqamsq .gt_indent_4 {
  text-indent: 20px;
}

#ikpalqamsq .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="case" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">case</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="case">De Fontbrune v. Wofsy, 39 F.4th 1214 (9th Cir. 2022)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="case">Sedlik v. Von Drachenberg, No. CV 21-1102 (C.D. Cal. May 31, 2022)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="case">Sketchworks Indus. Strength Comedy, Inc. v. Jacobs, No. 19-CV-7470-LTS-VF (S.D.N.Y. May 12, 2022)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="case">Am. Soc'y for Testing &amp; Materials v. Public.Resource.Org, Inc., No. 13-cv-1215 (D.D.C. Mar. 31, 2022)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="case">Yang v. Mic Network Inc., Nos. 20-4097-cv, 20-4201-cv (2d Cir. Mar. 29, 2022)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="case">Viacom Int’l v. Pixi Universal, Civ. Action No H-21-2612 (S.D. Tex. Mar. 25, 2022)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>It looks like the case number is formatted differently across the entries. This may be due to different style guides in different circuits/ courts.</p>
<p>Now look at the same information from the other dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">fair_use_findings <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(title, case_number) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="frqkjfshni" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#frqkjfshni table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#frqkjfshni thead, #frqkjfshni tbody, #frqkjfshni tfoot, #frqkjfshni tr, #frqkjfshni td, #frqkjfshni th {
  border-style: none;
}

#frqkjfshni p {
  margin: 0;
  padding: 0;
}

#frqkjfshni .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#frqkjfshni .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#frqkjfshni .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#frqkjfshni .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#frqkjfshni .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#frqkjfshni .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#frqkjfshni .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#frqkjfshni .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#frqkjfshni .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#frqkjfshni .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#frqkjfshni .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#frqkjfshni .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#frqkjfshni .gt_spanner_row {
  border-bottom-style: hidden;
}

#frqkjfshni .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#frqkjfshni .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#frqkjfshni .gt_from_md > :first-child {
  margin-top: 0;
}

#frqkjfshni .gt_from_md > :last-child {
  margin-bottom: 0;
}

#frqkjfshni .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#frqkjfshni .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#frqkjfshni .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#frqkjfshni .gt_row_group_first td {
  border-top-width: 2px;
}

#frqkjfshni .gt_row_group_first th {
  border-top-width: 2px;
}

#frqkjfshni .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#frqkjfshni .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#frqkjfshni .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#frqkjfshni .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#frqkjfshni .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#frqkjfshni .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#frqkjfshni .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#frqkjfshni .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#frqkjfshni .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#frqkjfshni .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#frqkjfshni .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#frqkjfshni .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#frqkjfshni .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#frqkjfshni .gt_left {
  text-align: left;
}

#frqkjfshni .gt_center {
  text-align: center;
}

#frqkjfshni .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#frqkjfshni .gt_font_normal {
  font-weight: normal;
}

#frqkjfshni .gt_font_bold {
  font-weight: bold;
}

#frqkjfshni .gt_font_italic {
  font-style: italic;
}

#frqkjfshni .gt_super {
  font-size: 65%;
}

#frqkjfshni .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#frqkjfshni .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#frqkjfshni .gt_indent_1 {
  text-indent: 5px;
}

#frqkjfshni .gt_indent_2 {
  text-indent: 10px;
}

#frqkjfshni .gt_indent_3 {
  text-indent: 15px;
}

#frqkjfshni .gt_indent_4 {
  text-indent: 20px;
}

#frqkjfshni .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="title" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">title</th>
<th id="case_number" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">case_number</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="title">De Fontbrune v. Wofsy</td>
<td class="gt_row gt_left" headers="case_number">39 F.4th 1214 (9th Cir. 2022)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="title">Sedlik v. Von Drachenberg</td>
<td class="gt_row gt_left" headers="case_number">No. CV 21-1102, 2022 WL 2784818 (C.D. Cal. May 31, 2022)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="title">Sketchworks Indus. Strength Comedy, Inc. v. Jacobs</td>
<td class="gt_row gt_left" headers="case_number">No. 19-CV-7470-LTS-VF, 2022 U.S. Dist. LEXIS 86331 (S.D.N.Y. May 12, 2022)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="title">Am. Soc'y for Testing &amp; Materials v. Public.Resource.Org, Inc.</td>
<td class="gt_row gt_left" headers="case_number">No. 13-cv-1215 (TSC), 2022 U.S. Dist. LEXIS 60922 (D.D.C. Mar. 31, 2022)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="title">Yang v. Mic Network Inc.</td>
<td class="gt_row gt_left" headers="case_number">Nos. 20-4097-cv(L), 20-4201-cv (XAP), 2022 U.S. App. LEXIS 8195 (2d Cir. Mar. 29, 2022)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="title">Viacom Int’l v. Pixi Universal</td>
<td class="gt_row gt_left" headers="case_number">Civ. Action No H-21-2612, 2022 U.S. Dist. LEXIS 57400 (S.D. Tex. Mar. 25, 2022)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="matching-the-case-titles" class="level2">
<h2 class="anchored" data-anchor-id="matching-the-case-titles">Matching the Case Titles</h2>
<p>It looks like the titles are styled in the same way. If the five entries here are representative of the dataset as a whole, then I don’t think joining these two files will be difficult.</p>
<p>I’m going to use <code>str_detect()</code> to match the <code>title</code> from the <code>fair_use_findings</code> data frame (the pattern) with the <code>case</code> name from the <code>fair_use_cases</code> (the string). This will return <code>TRUE</code> if the pattern is contained within the string and a <code>FALSE</code> otherwise. Note that this needs to be an exact match. There can be extra characters before or after the pattern in the string, but the pattern portion must match exactly.</p>
<p>I talked about this in more depth in a previous tidytuesday, where I joined data frames from <a href="https://lsinks.github.io/posts/2023-06-27-tidytuesday-US-populated-places/arlington-neighborhoods.html">Arlington County and the Historical Markers TidyTuesday dataset based on partial matches like these</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">string =</span> fair_use_cases<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>case,  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pattern =</span> fair_use_findings<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>title)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE
 [61] FALSE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
 [73]  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
 [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [97]  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE
[109] FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE  TRUE
[121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
[157]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
[169]  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE
[181]  TRUE  TRUE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[205]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
[217] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
[229]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
[241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<p>Okay, so some of them don’t match. How many and why?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">matches_title <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">string =</span> fair_use_cases<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>case,  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pattern =</span> fair_use_findings<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>title) </span></code></pre></div>
</div>
<p>How many? Remember, you can treat booleans as numbers, so <code>sum</code> will give you the total number of correct matches, and <code>mean</code> will give you the percentage of matches.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(fair_use_cases) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(matches_title)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33</code></pre>
</div>
</div>
<section id="what-case-names-dont-match" class="level3">
<h3 class="anchored" data-anchor-id="what-case-names-dont-match">What Case Names don’t Match?</h3>
<p>Only 33 cases didn’t match. I’m going to look at the ones that don’t match.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">fair_use_cases<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>case[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>matches_title]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Nat'l Acad. of TV Arts &amp; Scis., Inc., v. Multimedia Sys. Design, Inc. No. 20-CV-7269 (VEC) (S.D.N.Y. July 30, 2021)"    
 [2] "Tresóna Multimedia v. Burbank High School Vocal Music Ass’n, Nos. 17-56006, 17-56417, 17-56419 (9th Cir. Mar. 24, 2020)"
 [3] "Cambridge Univ. Press v. Becker, No. No. 1:08-cv-1425-ODE (N.D. Ga. Mar. 2, 2020)"                                      
 [4] "Barcroft Media, Ltd. v. Coed Media Group, LLC, No. 16-CV-7634 (JMF) (S.D.N.Y. Nov. 2, 2017)"                            
 [5] "Penguin Random House v. Colting, No. 17-cv-386 (S.D.N.Y. Sept. 8, 2017)"                                                
 [6] "Peteski Productions, Inc. v. Rothman, No. 5:17-CV-00122 (E.D. Tex. Aug. 30, 2017)"                                      
 [7] "Hosseinzadeh v. Klein, No. 16-CV-3081 (S.D.N.Y. Aug. 23, 2017)"                                                         
 [8] "Paramount Pictures, Corp. v. Axanar Prods., Inc., No. 2:15-cv-09938-RGK-E (C.D. Cal. Jan. 3, 2017)"                     
 [9] "Cambridge University Press v. Becker, 1:08-cv-01425-ODE (N.D. Ga. March 31, 2016)"                                      
[10] "Katz v. Google Inc., No. 14-14525 (11th Cir. Sept. 17, 2015)"                                                           
[11] "Penguin Grp. (USA), Inc. v. Am. Buddha, No. 4:13-cv-02075-JGZ (D. Ariz. May 11, 2015)"                                  
[12] "Bouchat v. Balt. Ravens Ltd. P'ship, 737 F.3d 932 (4th Cir. 2013)"                                                      
[13] "Fox Broad. Co. v. Dish Network, L.L.C., 723 F.3d 1067 (9th Cir. 2013)"                                                  
[14] "Faulkner Literary Rights, L.L.C. v. Sony Pictures Classics, Inc., 953 F. Supp. 2d 701 (N.D. Miss. 2013)"                
[15] "Brownmark Films, L.L.C. v. Comedy Partners, 682 F.3d 687 (7th Cir. 2012)"                                               
[16] "Northland Family Planning Clinic, Inc. v. Crt. for Bio-Ethical Reform, 868 F. Supp. 2d 962 (C.D. Cal. 2012)"            
[17] "CCA and B, LLC v. F + W Media, Inc., 819 F. Supp. 2d 1310 (Ν.D. Ga. 2011)"                                              
[18] "Bouchat v. Balt. Ravens Ltd. P'ship, 619 F.3d 301 (4th Cir. 2010)"                                                      
[19] "Veeck v. S. Bldg. Code Cong. Int’l, 241 F.3d 398 (5th Cir. 2001)"                                                       
[20] "Sony Computer Entm't. Inc. v. Connectix Corp., 203 F. 3d 596 (9th Cir. 2000)"                                           
[21] "Castle Rock Entm’t, Inc. v. Carol Publ’g Grp., Inc., 150 F.3d 132 (2d Cir. 1998)"                                       
[22] "Sundeman v. Seajay Soc’y, Inc., 142 F.3d 194 (4th Cir. 1998)"                                                           
[23] "L.A. News Serv. v. Reuters Television Int'l, Ltd., 149 F.3d 987 (9th Cir. 1998)"                                        
[24] "Dr. Seuss Enters., L.P. v. Penguin Books USA, Inc., 109 F.3d 1394 (9th Cir. 1997)"                                      
[25] "Metro-Goldwyn-Mayer, Inc. v. Am. Honda Motor Co., 900 F. Supp. 1287 (C.D. Cal. 1995)"                                   
[26] "Rotbart v. J.R. O’Dwyer Co., No. 94 Civ. 2091 (JSM) (S.D.N.Y. Feb. 7, 1995)"                                            
[27] "Nat’l Rifle Ass’n of Am. v. Handgun Control Fed’n of Ohio, 15 F.3d 559 (6th Cir. 1994)"                                 
[28] "Educ. Testing Servs. v. Katzman, 793 F.2d 533 (3d Cir. 1986)"                                                           
[29] "Harper &amp; Row Publishers, Inc. v. Nation Enters., 471 U.S. 539 (1985)"                                                   
[30] "Consumers Union, Inc. v. Gen. Signal Corp., 724 F.2d 1044 (2d Cir. 1983)"                                               
[31] "Dow Jones &amp; Co. v. Brd. of Trade of Chi., 546 F. Supp. 113 (S.D.N.Y. 1982)"                                             
[32] "DC Comics, Inc. v. Crazy Eddie, Inc., No. 79 Civ. 3786 (PNL) (S.D.N.Y. Aug. 3, 1979)"                                   
[33] "Eisenschiml v. Fawcett Publ’ns, Inc., 246 F.2d 598 (7th Cir. 1957)"                                                     </code></pre>
</div>
</div>
<p>Looking at these titles, there isn’t an obvious commonality. Some of them have accent marks or apostrophes in the names, but not all of them.</p>
<p>We know how these files were generated, so we might suspect that the same indexing would work for the other dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">fair_use_findings<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>title[<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>matches_title]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Nat'l Acad. of TV Arts &amp; Scis., Inc. v. Multimedia Sys. Design, Inc."                       
 [2] "Tresóna Multimedia, LLC v. Burbank High School Vocal Music Ass’n"                           
 [3] "Cambridge University Press v. Becker"                                                       
 [4] "Barcroft Media, Ltd. V. Coed Media Group, LLC"                                              
 [5] "Penguin Random House LLC, et al. v. Frederik Colting and Melissa Medina, d/b/a Moppet Books"
 [6] "Peteski Productions, Inc. v. Leah Rothman"                                                  
 [7] "Matt Hosseinzadeh v. Ethan Klein and Hila Klein"                                            
 [8] "Paramount Pictures Corp. v. Axanar Prods., Inc."                                            
 [9] "Cambridge University Press v. Mark P. Becker"                                               
[10] "Katz v. Google, Inc."                                                                       
[11] "Penguin Grp. (USA), Inc. v. Am. Buddha,"                                                    
[12] "Bouchat v. Balt. Ravens Ltd. P’ship,"                                                       
[13] "Fox Broad. Co. v. Dish Network, LLC,"                                                       
[14] "Faulkner Literary Rights, LLC v. Sony Pictures Classics, Inc.,"                             
[15] "Brownmark Films, LLC v. Comedy Partners,"                                                   
[16] "Northland Family Planning Clinic, Inc. v. Ctr. for Bio-Ethical Reform,"                     
[17] "CCA and B, LLC v. F + W Media, Inc.,"                                                       
[18] "Bouchat v. Balt. Ravens Ltd. P’ship,"                                                       
[19] "Veeck v. S. Bldg. Code Congress Int’l,"                                                     
[20] "Sony Computer Entm’t, Inc. v. Connectix Corp.,"                                             
[21] "Castle Rock Entm’t, Inc. v. Carol Publ. Group, Inc.,"                                       
[22] "Sundeman v. The Seajay Soc’y, Inc.,"                                                        
[23] "L.A. News Serv. v. Reuters Television Int’l, Ltd.,"                                         
[24] "Dr. Seuss Enters., LP v. Penguin Books USA, Inc.,"                                          
[25] "Metro-Goldwyn-Mayer, Inc. v. Am. Honda Motor Co., Inc.,"                                    
[26] "Rotbart v. J.R. O’Dwyer Co., Inc.,"                                                         
[27] "Nat'l Rifle Ass’n of Am. v. Handgun Control Fed’n of Ohio,"                                 
[28] "Educ. Testing Serv. v. Katzman,"                                                            
[29] "Harper &amp; Row Publishers, Inc. v. Nation Enterprises,"                                       
[30] "Consumers Union of U.S., Inc. v. Gen. Signal Corp.,"                                        
[31] "Dow Jones &amp; Co., Inc. v. Bd. of Trade of the City of Chi.,"                                 
[32] "DC Comics Inc. v. Crazy Eddie, Inc.,"                                                       
[33] "Eisenschiml v. Fawcett Publ’n, Inc.,"                                                       </code></pre>
</div>
</div>
<p>So, the index does work. Entry 33 is pretty clear- one has “Publ’ns, Inc.” and one has “Publ’n, Inc.”. The first entry has an extra comma in one file and not the other.</p>
</section>
<section id="are-mistakes-in-punctuation-the-main-problem" class="level3">
<h3 class="anchored" data-anchor-id="are-mistakes-in-punctuation-the-main-problem">Are Mistakes in Punctuation the Main Problem?</h3>
<p>It actually looks like the comma thing might be a common reason they don’t match.</p>
<p>If I remove all commas, does my matching improve?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">cases_no_comma <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> fair_use_cases <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">case =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(case, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">","</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>))</span>
<span id="cb22-3"></span>
<span id="cb22-4">findings_no_comma <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> fair_use_findings <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(title, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">","</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>))</span>
<span id="cb22-6"></span>
<span id="cb22-7">match_no_comma <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">string =</span> cases_no_comma<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>case,  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pattern =</span> findings_no_comma<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>title)</span></code></pre></div>
</div>
<p>How many?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">251</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(match_no_comma)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 29</code></pre>
</div>
</div>
<p>Okay, so that is four more matches.</p>
<p>I could go through and remove punctuation one by one. That’s pretty tedious.</p>
</section>
<section id="does-matching-on-the-first-10-characters-improve-the-match" class="level3">
<h3 class="anchored" data-anchor-id="does-matching-on-the-first-10-characters-improve-the-match">Does Matching on the First 10 Characters Improve the Match?</h3>
<p>What if I match on the first ten letters? Most of the punctuation is towards the middle or the end of the title. Ten is a wild guess based on looking at the data. I can’t match on the first word because something like De would likely match on multiple names.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">findings_trunc_10 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> fair_use_findings <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb25-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title_10 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_sub</span>(title, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span></code></pre></div>
</div>
<p>Now match.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1">match_trunc_10 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">string =</span> fair_use_cases<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>case,  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pattern =</span> findings_trunc_10<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>title_10)</span></code></pre></div>
</div>
<p>How many?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">251</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(match_trunc_10)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>Okay, so that seems to catch most of the errors.</p>
</section>
</section>
<section id="are-longer-case-titles-more-likely-to-have-typos" class="level2">
<h2 class="anchored" data-anchor-id="are-longer-case-titles-more-likely-to-have-typos">Are Longer Case Titles More Likely to Have Typos?</h2>
<p>So, as the title gets longer and more complicated, is it more likely to contain typos? I’m going to look at the length of the title vs.&nbsp;the chances it doesn’t match. I’m going to combine the two datasets, so I’m working with a single dataframe. Again, I know how the two datasets were created (generated from the same table), so I know I can just cbind them. If the data came from different places, I’d need a different strategy.</p>
<p>First, I’m going to rename the columns that are shared between the two.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1">fair_use_cases <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> fair_use_cases <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb29-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year_cases =</span> year) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb29-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">court_cases =</span> court)</span>
<span id="cb29-4"></span>
<span id="cb29-5">fair_use_findings <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> fair_use_findings <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb29-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year_findings =</span> year) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb29-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">court_findings =</span> court)</span></code></pre></div>
</div>
<p>Now, combining them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1">combined <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> fair_use_cases <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb30-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(fair_use_findings)</span></code></pre></div>
</div>
<p>I’m going to remove a bunch of columns I don’t care about.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1">combined <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> combined <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb31-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>( <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>categories, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>outcome, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fair_use_found, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>key_facts, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>issue, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>holding, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>tags, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>outcome )</span></code></pre></div>
</div>
<p>Now, I calculate the length of the title.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1">combined <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> combined <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title_length =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nchar</span>(title))</span></code></pre></div>
</div>
<p>What is the distribution of lengths?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1">combined <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb33-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(title_length)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb33-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-29-TidyTuesday-fair-use/tidytuesday35-fair-use_files/figure-html/bar-plot-length-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I probably need to bin the lengths. I’m using floor, but you could use ceiling or round as well.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1">combined <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> combined <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb34-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title_length_floor =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">floor</span>(title_length<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span></code></pre></div>
</div>
<p>Plot the distribution again.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1">combined <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb35-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(title_length_floor <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-29-TidyTuesday-fair-use/tidytuesday35-fair-use_files/figure-html/bar-plot-length-floor-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s not a terrible distribution.</p>
<p>Now, I’m creating a column to indicate if they match.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1">combined <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> combined <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb36-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">match =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(case, title))</span></code></pre></div>
</div>
<p>Now, group by the length. I’m calculating the number of records in each bin (n), the mismatch rate as a %, and the number of mismatches.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1">combined2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> combined <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(title_length_floor) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mismatch_rate =</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(match))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mismatch_count =</span> (n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> mismatch_rate<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>))</span></code></pre></div>
</div>
<section id="a-graph-of-title-length-and-mismatch-rate" class="level3">
<h3 class="anchored" data-anchor-id="a-graph-of-title-length-and-mismatch-rate">A Graph of Title Length And Mismatch Rate</h3>
<p>Dual axes plots can be tricky to understand and easy to mislead with. Just like a correlation plot, this is another type of plot that I’d probably reserve for internal use only.</p>
<p>The count and rate data share the same x aesthetic, so I define that in the ggplot call. The individual y aesthetics are defined in the geom calls for each layer.</p>
<p>Here’s the mismatch rate. Coincidentally, the percentage range (0-100 %) and the count range (0-79) are roughly on the same scale, so I don’t need to do anything too weird with my dual axes. If I did, then the sec.axis can be scaled by a formula relative to the first. Here, it is just scaled by one. The left and right axes can be styled differently, so I am color-coding them to match the color of the data points.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1">p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> combined2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb38-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> title_length_floor <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb38-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> mismatch_rate), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb38-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> mismatch_rate), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb38-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> n),  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb38-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"% Mismatch"</span>,</span>
<span id="cb38-7">                     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add a second axis and specify its features</span></span>
<span id="cb38-8">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sec.axis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sec_axis</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trans =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> . <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"# of Cases"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb38-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_pander</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb38-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb38-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y.left =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>),</span>
<span id="cb38-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.line.y.left =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>),</span>
<span id="cb38-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks.y.left =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>),</span>
<span id="cb38-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y.left =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>),</span>
<span id="cb38-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y.right =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray28"</span>),</span>
<span id="cb38-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.line.y.right =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray28"</span>),</span>
<span id="cb38-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks.y.right =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray28"</span>),</span>
<span id="cb38-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y.right =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray28"</span>)</span>
<span id="cb38-19">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb38-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xlab</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Length of the Case Title"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb38-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggtitle</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mismatch Rate Increases as Case Title Length Increases"</span>,</span>
<span id="cb38-22">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Data from U.S. Copyright Office Fair Use Index"</span>)</span>
<span id="cb38-23"></span>
<span id="cb38-24">p1</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-29-TidyTuesday-fair-use/tidytuesday35-fair-use_files/figure-html/dual-axis-plot-count-rate-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The two largest bins have very few records, so I wouldn’t expect that extremely high error rate to persist as more data is added. However, there does seem to be an increasing mismatch rate with length of the title.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1">combined2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="opbsvjmpss" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#opbsvjmpss table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#opbsvjmpss thead, #opbsvjmpss tbody, #opbsvjmpss tfoot, #opbsvjmpss tr, #opbsvjmpss td, #opbsvjmpss th {
  border-style: none;
}

#opbsvjmpss p {
  margin: 0;
  padding: 0;
}

#opbsvjmpss .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#opbsvjmpss .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#opbsvjmpss .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#opbsvjmpss .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#opbsvjmpss .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#opbsvjmpss .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#opbsvjmpss .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#opbsvjmpss .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#opbsvjmpss .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#opbsvjmpss .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#opbsvjmpss .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#opbsvjmpss .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#opbsvjmpss .gt_spanner_row {
  border-bottom-style: hidden;
}

#opbsvjmpss .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#opbsvjmpss .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#opbsvjmpss .gt_from_md > :first-child {
  margin-top: 0;
}

#opbsvjmpss .gt_from_md > :last-child {
  margin-bottom: 0;
}

#opbsvjmpss .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#opbsvjmpss .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#opbsvjmpss .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#opbsvjmpss .gt_row_group_first td {
  border-top-width: 2px;
}

#opbsvjmpss .gt_row_group_first th {
  border-top-width: 2px;
}

#opbsvjmpss .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#opbsvjmpss .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#opbsvjmpss .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#opbsvjmpss .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#opbsvjmpss .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#opbsvjmpss .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#opbsvjmpss .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#opbsvjmpss .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#opbsvjmpss .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#opbsvjmpss .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#opbsvjmpss .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#opbsvjmpss .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#opbsvjmpss .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#opbsvjmpss .gt_left {
  text-align: left;
}

#opbsvjmpss .gt_center {
  text-align: center;
}

#opbsvjmpss .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#opbsvjmpss .gt_font_normal {
  font-weight: normal;
}

#opbsvjmpss .gt_font_bold {
  font-weight: bold;
}

#opbsvjmpss .gt_font_italic {
  font-style: italic;
}

#opbsvjmpss .gt_super {
  font-size: 65%;
}

#opbsvjmpss .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#opbsvjmpss .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#opbsvjmpss .gt_indent_1 {
  text-indent: 5px;
}

#opbsvjmpss .gt_indent_2 {
  text-indent: 10px;
}

#opbsvjmpss .gt_indent_3 {
  text-indent: 15px;
}

#opbsvjmpss .gt_indent_4 {
  text-indent: 20px;
}

#opbsvjmpss .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="title_length_floor" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">title_length_floor</th>
<th id="mismatch_rate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mismatch_rate</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n</th>
<th id="mismatch_count" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mismatch_count</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="title_length_floor">1</td>
<td class="gt_row gt_right" headers="mismatch_rate">0.000000</td>
<td class="gt_row gt_right" headers="n">27</td>
<td class="gt_row gt_right" headers="mismatch_count">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="title_length_floor">2</td>
<td class="gt_row gt_right" headers="mismatch_rate">2.083333</td>
<td class="gt_row gt_right" headers="n">48</td>
<td class="gt_row gt_right" headers="mismatch_count">1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="title_length_floor">3</td>
<td class="gt_row gt_right" headers="mismatch_rate">15.189873</td>
<td class="gt_row gt_right" headers="n">79</td>
<td class="gt_row gt_right" headers="mismatch_count">12</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="title_length_floor">4</td>
<td class="gt_row gt_right" headers="mismatch_rate">15.686275</td>
<td class="gt_row gt_right" headers="n">51</td>
<td class="gt_row gt_right" headers="mismatch_count">8</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="title_length_floor">5</td>
<td class="gt_row gt_right" headers="mismatch_rate">24.137931</td>
<td class="gt_row gt_right" headers="n">29</td>
<td class="gt_row gt_right" headers="mismatch_count">7</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="title_length_floor">6</td>
<td class="gt_row gt_right" headers="mismatch_rate">21.428571</td>
<td class="gt_row gt_right" headers="n">14</td>
<td class="gt_row gt_right" headers="mismatch_count">3</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="title_length_floor">7</td>
<td class="gt_row gt_right" headers="mismatch_rate">50.000000</td>
<td class="gt_row gt_right" headers="n">2</td>
<td class="gt_row gt_right" headers="mismatch_count">1</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="title_length_floor">9</td>
<td class="gt_row gt_right" headers="mismatch_rate">100.000000</td>
<td class="gt_row gt_right" headers="n">1</td>
<td class="gt_row gt_right" headers="mismatch_count">1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="a-graph-of-title-length-and-number-of-mismatches" class="level3">
<h3 class="anchored" data-anchor-id="a-graph-of-title-length-and-number-of-mismatches">A Graph of Title Length And Number of Mismatches</h3>
<p>Here’s looking at the same information, but just in terms of counts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1">p2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> combined2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb40-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> title_length_floor)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb40-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> mismatch_count), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb40-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> n),  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb40-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"# of Mismatches"</span>,</span>
<span id="cb40-6">                     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add a second axis and specify its features</span></span>
<span id="cb40-7">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sec.axis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sec_axis</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trans =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> . <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"# of Cases"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb40-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_pander</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb40-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb40-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y.left =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>),</span>
<span id="cb40-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.line.y.left =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>),</span>
<span id="cb40-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks.y.left =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>),</span>
<span id="cb40-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y.left =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>),</span>
<span id="cb40-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y.right =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray28"</span>),</span>
<span id="cb40-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.line.y.right =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray28"</span>),</span>
<span id="cb40-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks.y.right =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray28"</span>),</span>
<span id="cb40-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y.right =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray28"</span>)</span>
<span id="cb40-18">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb40-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xlab</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Length of the Case Title"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb40-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggtitle</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number of Mismatches as Case Title Length Increases"</span>,</span>
<span id="cb40-21">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Data from U.S. Copyright Office Fair Use Index"</span>)</span>
<span id="cb40-22">p2</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-29-TidyTuesday-fair-use/tidytuesday35-fair-use_files/figure-html/dual-axis-plot-count-count-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="making-a-composite-panel-figure-with-cowplot" class="level3">
<h3 class="anchored" data-anchor-id="making-a-composite-panel-figure-with-cowplot">Making a Composite/ Panel Figure with cowplot</h3>
<p>Make a composite figure with cowplot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_grid</span>(p1, p2,  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-29-TidyTuesday-fair-use/tidytuesday35-fair-use_files/figure-html/making-panel-plot-with-cowplot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sinks2023,
  author = {Sinks, Louise E.},
  title = {TidyTuesday 35: {Exploring} {Fair} {Use} {Cases}},
  date = {2023-08-29},
  url = {https://lsinks.github.io/posts/2023-08-29-TidyTuesday-fair-use/tidytuesday-fair-use.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sinks2023" class="csl-entry quarto-appendix-citeas">
Sinks, Louise E. 2023. <span>“TidyTuesday 35: Exploring Fair Use
Cases.”</span> August 29, 2023. <a href="https://lsinks.github.io/posts/2023-08-29-TidyTuesday-fair-use/tidytuesday-fair-use.html">https://lsinks.github.io/posts/2023-08-29-TidyTuesday-fair-use/tidytuesday-fair-use.html</a>.
</div></div></section></div> ]]></description>
  <category>data visualization</category>
  <category>R</category>
  <category>R-code</category>
  <category>code-along</category>
  <category>tidyTuesday</category>
  <category>stringr</category>
  <category>data cleaning</category>
  <category>dual axis plot</category>
  <category>ggplot</category>
  <category>cowplot</category>
  <guid>https://sarahsmithtripp.github.io/posts/2023-08-29-TidyTuesday-fair-use/tidytuesday35-fair-use.html</guid>
  <pubDate>Tue, 29 Aug 2023 07:00:00 GMT</pubDate>
  <media:content url="https://sarahsmithtripp.github.io/posts/2023-08-29-TidyTuesday-fair-use/thumbnail.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>TidyTuesday: Exploring Refugee Flow with A Sankey Diagram</title>
  <dc:creator>Louise E. Sinks</dc:creator>
  <link>https://sarahsmithtripp.github.io/posts/2023-08-28-TidyTuesday-Refugees/TidyTuesday34-refugees.html</link>
  <description><![CDATA[ 




<p>I’m still behind on TidyTuesday, so here is <a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-08-22/readme.md">TidyTuesday #34</a>, which deals with <a href="https://www.unhcr.org/refugee-statistics/insights/explainers/refugees-r-package.html">refugee data</a>. This data is collected by the United Nations High Commissioner for Refugees and the <a href="https://www.unhcr.org/refugee-statistics/insights/explainers/refugees-r-package.html">R package is updated twice a year</a>.</p>
<section id="loading-data-and-libraries" class="level2">
<h2 class="anchored" data-anchor-id="loading-data-and-libraries">Loading Data and Libraries</h2>
<p>Libraries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># who doesn't want to be tidy</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(networkD3) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for Sankey plots</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggsankey) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># another sankey package </span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(htmlwidgets) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># html widgets helps to handle the networkD3 objects</span></span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(htmltools) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for formatting html code</span></span></code></pre></div>
</div>
<p>Loading data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">tuesdata <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tidytuesdayR<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tt_load</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2023</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">week =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">34</span>)</span>
<span id="cb2-2">population <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tuesdata<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>population</span></code></pre></div>
</div>
</section>
<section id="exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis">Exploratory Data Analysis</h2>
<p>This dataset tracks the number of refugees by year. It tracks how many people request entry at each country and breaks this information down by country of origin.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(population)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 16
   year coo_name    coo   coo_iso coa_name coa   coa_iso refugees asylum_seekers
  &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;          &lt;dbl&gt;
1  2010 Afghanistan AFG   AFG     Afghani… AFG   AFG            0              0
2  2010 Iran (Isla… IRN   IRN     Afghani… AFG   AFG           30             21
3  2010 Iraq        IRQ   IRQ     Afghani… AFG   AFG            6              0
4  2010 Pakistan    PAK   PAK     Afghani… AFG   AFG         6398              9
5  2010 Egypt       ARE   EGY     Albania  ALB   ALB            5              0
6  2010 China       CHI   CHN     Albania  ALB   ALB            6              0
# ℹ 7 more variables: returned_refugees &lt;dbl&gt;, idps &lt;dbl&gt;, returned_idps &lt;dbl&gt;,
#   stateless &lt;dbl&gt;, ooc &lt;dbl&gt;, oip &lt;dbl&gt;, hst &lt;dbl&gt;</code></pre>
</div>
</div>
<p>What years have the most data?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">population <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, n)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-28-TidyTuesday-Refugees/TidyTuesday34-refugees_files/figure-html/refugees-by-year-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I expected to see spikes corresponding to specific events, but instead, it looks like the data is gradually increasing. This upward trend might be due to better record-keeping/ data collection over the years.</p>
<p>I’m going to look at last year’s data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">pop_2022 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> population <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2022</span>)</span></code></pre></div>
</div>
</section>
<section id="a-sankey-diagram-to-explore-flow" class="level2">
<h2 class="anchored" data-anchor-id="a-sankey-diagram-to-explore-flow">A Sankey Diagram to Explore Flow</h2>
<p>Now, I will look at where most refugees come from.</p>
<p>There is a technical and legal difference between refugees and asylum seekers, but I will sum them up. I also will be using refugees and asylum seekers interchangeably here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">pop_2022 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pop_2022 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">total =</span> refugees <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> asylum_seekers) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(coo_name, coa_name, total)</span></code></pre></div>
</div>
<p>I’ve been interested in learning how to make Sankey diagrams in R. A Sankey diagram shows the flow between nodes; there is a great gallery of examples <a href="https://www.sankey-diagrams.com/a-different-power-sankey-diagram/">here</a>. This tidytuesday data does lend itself to a Sankey diagram. There are two nodes- country of orgin and country of arrival and the flow is the number of refugees between each pair.</p>
<p>I do want to highlight that the UN Refugee Agency has a separate dataset that tracks <a href="https://www.unhcr.org/refugee-statistics/insights/explainers/forcibly-displaced-flow-data.html">flow</a>. The dataset we are working with is the net number of refugees. As the UNHCR webpage says:</p>
<blockquote class="blockquote">
<p>Often the net increase or decrease in stock figures between years has been used in lieu of accurate flow figures. But these may underrepresent the true magnitude of population movements if, for example, refugee arrivals and departures balance each other out.</p>
</blockquote>
<p>Still, for TidyTuesday, the net population is fine.</p>
<p>I’m going to pull out the top 3 sources of refugees. I’m grouping by the country of origin (coo_name) and then summing the refugees going to all countries. I then take the top 3 using dpylr’s <code>slice_max()</code>. Note that this function replaces <code>top_n()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">top_3_source <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pop_2022 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(coo_name) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">num_by_coo =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(total)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_max</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order_by =</span> num_by_coo, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb8-5"></span>
<span id="cb8-6">top_3_source_names <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> top_3_source<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coo_name</span>
<span id="cb8-7"></span>
<span id="cb8-8">top_3_source_names</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Syrian Arab Rep." "Afghanistan"      "Ukraine"         </code></pre>
</div>
</div>
<p>Now, I’m going to do a related analysis and see where the top destinations are.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">top_3_dest <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pop_2022 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(coa_name) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">num_by_coa =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(total)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_max</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order_by =</span> num_by_coa, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb10-4"></span>
<span id="cb10-5">top_3_dest_names <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (top_3_dest<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coa_name)</span>
<span id="cb10-6">top_3_dest_names</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Türkiye"                "Iran (Islamic Rep. of)" "Germany"               </code></pre>
</div>
</div>
<p>Now I’m making a category “other” for both source and destination countries that aren’t in the top 3. I use the forcats function <code>fct_other()</code>.</p>
<p>First country of arrival:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">pop_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coa_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(pop_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coa_name)</span>
<span id="cb12-2"></span>
<span id="cb12-3">pop_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coa_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pop_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coa_name <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fct_other</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">keep =</span> top_3_dest_names, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">other_level =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"other"</span>)</span></code></pre></div>
</div>
<p>Then, country of origin:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">pop_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coo_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(pop_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coo_name)</span>
<span id="cb13-2"></span>
<span id="cb13-3">pop_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coo_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pop_2022<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coo_name <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb13-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fct_other</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">keep =</span> top_3_source_names, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">other_level =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"other"</span>)</span></code></pre></div>
</div>
<p>For now, I will remove the “other” category of country of origin.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">pop_2022_no_other <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pop_2022 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb14-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>((coo_name <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"other"</span>))</span></code></pre></div>
</div>
<p>There are 3 popular ways to make Sankey diagrams in R: <code>ggsankey</code>, <code>networkD3</code>, and <code>plotly</code>. There is a nice tutorial on these methods <a href="https://www.marsja.se/create-a-sankey-plot-in-r-ggplot2-plotly/">here</a>.</p>
<p>I’m going to focus on <code>ggsankey</code> and <code>networkD3</code>.</p>
<section id="ggsankey-method-for-sankey-plots-in-r" class="level3">
<h3 class="anchored" data-anchor-id="ggsankey-method-for-sankey-plots-in-r">ggsankey method for Sankey Plots in R</h3>
<p><a href="https://github.com/davidsjoberg/ggsankey">This package</a> is combined with ggplot to make nice static Sankey plots.</p>
<p>The package documentation does a great job explaining the <a href="https://github.com/davidsjoberg/ggsankey">parts of the Sankey chart</a>. It does not do a great job of explaining what format the data should be in. I spent most of my time last Tuesday trying to figure this out.</p>
<p>The package includes a function <code>make_long()</code>, which is used to prepare the data for plotting. It labels the columns appropriately and creates the needed null/ NA entries. These entries are used to signify the end of the flow.</p>
<p>The UN refugee data is already long, so I spent a fair bit of time trying to figure out how to either label it myself or make it wide so I could use <code>make_long()</code>.</p>
<p>It turns out that ggsankey can only be used on disaggregated data and not aggregated data such as I have here. I never found that explicitly stated in the documentation (it could be I missed that), but I only discovered it as I was trying to wrangle my data into the correct format and comparing it to the mtcars data in the example.</p>
<p>What do I mean by aggregated vs.&nbsp;disaggregated?</p>
<p>Let’s look at the mtcars dataframe:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">mtcars2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mtcars <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_sample</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(cyl, vs)</span>
<span id="cb15-4"></span>
<span id="cb15-5">mtcars2</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 cyl vs
Pontiac Firebird   8  0
Ferrari Dino       6  0
Porsche 914-2      4  0
Merc 450SLC        8  0
Merc 280           6  1
Merc 230           4  1
Datsun 710         4  1
Camaro Z28         8  0
Mazda RX4          6  0
Merc 450SE         8  0</code></pre>
</div>
</div>
<p>This is disaggregated. It reports the properties of each car. The equivalent in our dataset would be if the database listed every refugee by name and specified where they were from and where they were going.</p>
<p>What the population dataset has instead is the aggregated data. This is the mtcars equivalent:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">mtcars2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(cyl, vs) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
# Groups:   cyl, vs [5]
    cyl    vs     n
  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
1     4     0     1
2     4     1     2
3     6     0     2
4     6     1     1
5     8     0     4</code></pre>
</div>
</div>
<p>So we know we have two cars with cyl = 4 and vs = 1, but we don’t know that they are specifically the Merc 240D and the Fiat 128.</p>
<p>If all you have is the aggregated data, you can’t disaggregate it. The names of the cars are not contained in that dataframe. In this case, if you absolutely had to make a Sankey diagram using ggsankey, you could write some code to make a dummy ID to represent the missing dimension. That is, you could split the entry <code>cyl = 4 and vs = 1</code> into</p>
<p><code>cyl = 4 and vs = 1 and id = 1</code></p>
<p><code>cyl = 4 and vs = 1 and id = 2</code></p>
<p>And so on for each group.</p>
<p>Then you’d have to <code>dpylr::pivot_wider()</code> and then <code>ggsankey::make_longer()</code>. I wouldn’t recommend this, but it is useful sometimes to think of how you’d approach a problem, even if there are easier solutions. [This :: formatting forces the function to load from the specific library on the left side of the double colon. This is useful if you have conflicting function names in different packages; this notation assure the proper one is called. It is also useful to clarify where specific functions are coming from, even if there would be no conflict.]</p>
</section>
<section id="networkd3-method-for-sankey-plots-in-r" class="level3">
<h3 class="anchored">networkD3 method for Sankey Plots in R</h3>
<p>I love the R Graph Gallery when I’m looking for inspiration for TidyTuesday. <a href="https://r-graph-gallery.com/sankey-diagram.html">R Graph Gallery recommends the networkD3 package for Sankey plots</a>, but it is an htmlwidget. I’ve been doing a lot of interactive stuff recently, and I originally wanted to get back to some good old ggplot. But the <a href="https://CRAN.R-project.org/package=networkD3">networkD3 package</a> does create lovely Sankey plots.</p>
<p>The networkD3 method seems slightly confusing because you need to transform and label the data yourself. Like ggsankey, you need information about the nodes and how they are connected with each other. One other note- this is based on a JavaScript package (with 0 indexing). So, a few “-1” to convert the index from R (which starts at 1).</p>
<p>There is a nice post on Sankey diagrams in networkD3 <a href="https://www.data-to-viz.com/graph/sankey.html">on the Data to Viz blog</a>. The code is hidden, so you need to toggle it on with the code button if you want to see it.</p>
<p>The function call is (from the manual found at CRAN):</p>
<p><code>sankeyNetwork(Links, Nodes, Source, Target, Value, NodeID, NodeGroup = NodeID, LinkGroup = NULL, units = "", colourScale = JS("d3.scaleOrdinal(d3.schemeCategory20);"), fontSize = 7, fontFamily = NULL, nodeWidth = 15, nodePadding = 10, margin = NULL, height = NULL, width = NULL, iterations = 32, sinksRight = TRUE)</code></p>
<p>I need <code>Links, Nodes, Source, Target, Value, NodeID.</code></p>
<p><code>Nodes</code> is the list of countries (both origin and arrival). It needs to be a unique list of the countries stored as a dataframe.</p>
<p>I converted the countries to factors earlier, but that isn’t a problem.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">nodes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span></span>
<span id="cb19-2">                      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(pop_2022_no_other<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coo_name, pop_2022_no_other<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coa_name) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb19-3">                      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>()</span>
<span id="cb19-4">                    )</span></code></pre></div>
</div>
<p>Next, we need the IDs for source and target, zero-indexed. The ID is generated by position in the nodes dataframe I just created. The match() function is a base R function that returns a vector of the positions of the first argument (pop_2022_no_other$coo_name) as found in the second argument (nodes$name). Note that it returns a vector of all matches. I know that nodes is a unique list, so it is only going to return a single index. This may not be true for other use cases. Again, subtract 1 for the difference in indexing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">pop_2022_no_other<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>IDsource <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">match</span>(pop_2022_no_other<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coo_name, nodes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>name) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span></span>
<span id="cb20-2">  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb20-3">pop_2022_no_other<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>IDtarget <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">match</span>(pop_2022_no_other<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>coa_name,  nodes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>name) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span></span>
<span id="cb20-4">  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span></code></pre></div>
</div>
<p>Next, create the color scales. Details about the options for the color scales are found in the <a href="https://github.com/d3/d3/blob/main/API.md#ordinal-scales">D3 API documentation</a>.</p>
<p>I am going to change the colors a bit. The other category will be gray. The colors are assigned matches using the order in the nodes df. Note that this does NOT match the order in the diagram. Most Sankey plotting programs reorder the nodes to minimize crossing and to create a cleaner diagram.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1">ColourScal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'d3.scaleOrdinal([`#946943`, `#b63e36`,`#F5B041`, `#909497`,`#383867`, `#584c77`, `#33431e`, `#a36629`, `#92462f`])'</span></span></code></pre></div>
</div>
<p>The colors are specified in hex code here. You can find color pickers that give you the codes on the web, such as <a href="https://htmlcolorcodes.com/">this one</a>.</p>
<p>Now I can make the diagram. I’m also specifying height and width so <a href="https://stackoverflow.com/questions/50132459/how-to-add-title-to-a-networkd3-visualisation-when-saving-as-a-web-page">I can add a title and a caption using htmlwidgets</a>. If you don’t specify height and width the figure might be truncated when the titles are applied. (This method might work for leaflet maps also. The leaflet package also lacks a method for titles.) I am using the html header 2 styling (h2) for the title, while the caption is just a normal paragraph (p).</p>
<p>The sinksRight parameter is used to put the label either outside the flows (<code>FALSE</code>) as I have done here. <code>TRUE</code> puts it inside the flow lines. Unfortunately, there is not a matching sinksLeft, so those labels will always be inside the flow.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Make the Network</span></span>
<span id="cb22-2">sankey <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sankeyNetwork</span>(</span>
<span id="cb22-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Links =</span> pop_2022_no_other,</span>
<span id="cb22-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Nodes =</span> nodes,</span>
<span id="cb22-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Source =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"IDsource"</span>,</span>
<span id="cb22-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Target =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"IDtarget"</span>,</span>
<span id="cb22-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Value =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"total"</span>,</span>
<span id="cb22-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">NodeID =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>,</span>
<span id="cb22-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sinksRight =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb22-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colourScale =</span> ColourScal,</span>
<span id="cb22-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nodeWidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>,</span>
<span id="cb22-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontSize =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span>,</span>
<span id="cb22-13">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nodePadding =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,</span>
<span id="cb22-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">600</span>,</span>
<span id="cb22-15">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span></span>
<span id="cb22-16">)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Links is a tbl_df. Converting to a plain data frame.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1">sankey <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb24-2">  htmlwidgets<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">prependContent</span>(sankey, htmltools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>tags<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">h2</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Refugee Flow in 2022"</span>))</span>
<span id="cb24-3">sankey <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb24-4">  htmlwidgets<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">appendContent</span>(sankey, htmltools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>tags<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">p</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"from UNHCR’s refugees R package"</span>))</span>
<span id="cb24-5"></span>
<span id="cb24-6">sankey</span></code></pre></div>
<div class="cell-output-display">
<h2 class="anchored" data-anchor-id="networkd3-method-for-sankey-plots-in-r">Refugee Flow in 2022</h2>
<div id="htmlwidget-4ced06affdcba81d4de7" style="width:100%;height:433px;" class="sankeyNetwork html-widget "></div>
<p>from UNHCR’s refugees R package</p>
<script type="application/json" data-for="htmlwidget-4ced06affdcba81d4de7">{"x":{"links":{"source":[0,0,1,2,1,1,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,1,0,1,2,1,0,1,0,1,2,1,2,0,1,2,0,1,2,0,1,2,0,1,2,1,0,1,2,0,1,2,1,1,1,0,1,2,1,2,0,1,0,1,2,0,1,2,0,1,2,1,0,1,2,0,1,2,0,1,2,1,0,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,2,1,0,0,0,1,2,0,1,2,0,1,2,1,0,1,2,0,1,0,1,2,0,0,1,2,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,0,1,2,0,1,2,0,1,1,0,1,0,1,2,1,2,0,0,1,2,0,1,2,0,1,2,0,1,1,1,2,1,0,1,2,0,1,2,1,0,1,0,0,1,1,0,1,2,0,1,2,0,2,0,1,2,1,0,1,2,0,1,2,0,0,1,2,1,0,1,0,1,2,0,1,2,0,1,2,0,1,2,0,0,1,2,0,1,2,1,0,1,2,0,1,0,1,2,1,1,0,1,2,1,0,1,2,0,1,0,1,2,0,1,2,0,1,2,0,1,2,0,1,1,0,1,0,0,1,1,0,1,2,0,1,2,0,1,0,1,0,1,2,0,1,2,0,1,2,0,0,1,1,0,1],"target":[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,6,6,6,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],"value":[0,14,23,2547,7803,5,381,145658,5,22,560,180,9,4912,528,11290,617,2029,52701,91167,90111,1176,35,4847,5,15938,20303,62660,52,5,5,152,66,19916,22,5,1042,7809,108,10,32,147,3569,29421,149231,2016,1012,75294,77,67,44,18,246,144,99,15,18,30,9,18,29,40,53,12,35,1714,20406,12566,229,347,433638,2103,19459,33706,10,8,5,14,147,158,84,33,107,40816,668,13,4265,2748,45506,74636,41331,70572,24321,20054,183399,83,468,26498,215677,576793,1004382,15,321,5,38246,45347,21931,5,14,5,11,405,594,19416,1457,819,29637,236,265,2335,157,15039,145,58,6991,44,2070,2607,70816,3413249,649,257439,5,414,20285,4489,151750,16,660892,10,570,309,2238,520,18,550,58,10,513,72,24,140,1320,39,17,253,80,5,14462,44,814715,16,34,402,87,274,493,65175,771,3852,4525,237,330,37810,16,5,578,6,386,5,32,233,102104,544,80,180,476,3392,2808,5,30,5516,6,10,2349,1819,0,0,32351,52,5,9403,57118,103647,15,5,1249,5,3498,17253,33253,5,74,60,22,14,1781386,73,11,5,21,15,96,9,5,62,36,10,202,14,18,1137,308,958519,880,933,44989,30,525,2616,100128,18,43,1589,252,1275925,5,3946,33,47,1108,1232,3903,16831,162672,0,93478,391,60,94858,88,340,7764,28249,112432,47846,20600,20794,60271,1239,0,36,146,214,9714,9,40,93,5,2497,29,139394,3535898,4957,34,6951,33,33,1060,533,0,6,72,18,21764,11944,15432,13026,10,33,2939,6,32]},"nodes":{"name":["Afghanistan","Syrian Arab Rep.","Ukraine","other","Germany","Iran (Islamic Rep. of)","Türkiye"],"group":["Afghanistan","Syrian Arab Rep.","Ukraine","other","Germany","Iran (Islamic Rep. of)","Türkiye"]},"options":{"NodeID":"name","NodeGroup":"name","LinkGroup":null,"colourScale":"d3.scaleOrdinal([`#946943`, `#b63e36`,`#F5B041`, `#909497`,`#383867`, `#584c77`, `#33431e`, `#a36629`, `#92462f`])","fontSize":13,"fontFamily":null,"nodeWidth":40,"nodePadding":20,"units":"","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":32,"sinksRight":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>So this is pretty clear. Because the other category is disaggregated, we get individual lines for each country of arrival (but we don’t know what countries they are.) If you mouse over the traces, you can see how many refugees are involved in each path. For example, if you mouse over the large gray band on the Afghanistan to other, you see 1.8 million refugees have gone to a single color. Some of the other lines represent only a handful of refugees. I could also aggregate the other data, creating a single band from each source to other. But I think it is neat the way it is.</p>
</section>
<section id="saving-an-htmlwidget-object" class="level3">
<h3 class="anchored" data-anchor-id="saving-an-htmlwidget-object">Saving an htmlwidget object</h3>
<p>Saving the interactive figures to a thumbnail is always tricky. Various methods are suggested- using webshot seems to be the most popular, but I haven’t had it work. (First, you save the diagram as an HTML file, and then webshot converts that to a static image). While the HTML saves fine, the webshotted png is the title and the caption with a vast white block of no figure in between. The only consistent way I’ve found is to export from RStudio’s viewer. You do have to fiddle with the height and width of your object; otherwise, the exported file will either be truncated or have non-functional scroll bars in the image.</p>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sinks2023,
  author = {Sinks, Louise E.},
  title = {TidyTuesday: {Exploring} {Refugee} {Flow} with {A} {Sankey}
    {Diagram}},
  date = {2023-08-28},
  url = {https://lsinks.github.io/posts/2023-08-28-TidyTuesday-Refugees/TidyTuesday34-refugees.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sinks2023" class="csl-entry quarto-appendix-citeas">
Sinks, Louise E. 2023. <span>“TidyTuesday: Exploring Refugee Flow with A
Sankey Diagram.”</span> August 28, 2023. <a href="https://lsinks.github.io/posts/2023-08-28-TidyTuesday-Refugees/TidyTuesday34-refugees.html">https://lsinks.github.io/posts/2023-08-28-TidyTuesday-Refugees/TidyTuesday34-refugees.html</a>.
</div></div></section></div> ]]></description>
  <category>R</category>
  <category>tidyTuesday</category>
  <category>R-code</category>
  <category>code-along</category>
  <category>data visualization</category>
  <category>sankey</category>
  <category>networkD3</category>
  <category>ggsankey</category>
  <category>htmlwidgets</category>
  <guid>https://sarahsmithtripp.github.io/posts/2023-08-28-TidyTuesday-Refugees/TidyTuesday34-refugees.html</guid>
  <pubDate>Mon, 28 Aug 2023 07:00:00 GMT</pubDate>
  <media:content url="https://sarahsmithtripp.github.io/posts/2023-08-28-TidyTuesday-Refugees/thumbnail.png" medium="image" type="image/png" height="129" width="144"/>
</item>
<item>
  <title>Mapping for the Tombstone Project</title>
  <dc:creator>Louise E. Sinks</dc:creator>
  <link>https://sarahsmithtripp.github.io/posts/2023-08-14-mapping-tombstone/tombstone_mapping_leaflet.html</link>
  <description><![CDATA[ 




<section id="project-overview" class="level1">
<h1>Project Overview</h1>
<p>I’m working on a project for my father that will culminate in a website for his genealogy research. <a href="https://lsinks.github.io/currentprojects.html">There are a couple of different parts</a> that I’m working on independently. In a <a href="https://lsinks.github.io/posts/2023-08-04-data-cleaning-tombstone/tombstones_data_cleaning.html">previous part of the project</a>, I matched an excel sheet with GPS coordinates and some biographic data with photos of various tombstones. This part involves making a leaflet map of various family grave sites.</p>
<p>In this part, I’m going to show you how to create a nicely styled leaflet map. I will use the R packages <a href="https://CRAN.R-project.org/package=leaflet">leaflet</a> and <a href="https://CRAN.R-project.org/package=leafpop">leafpop</a>. While the package <a href="https://CRAN.R-project.org/package=leaflet.extras">leaflet.extras</a> has some nice features, the contributor stopped maintaining it in 2018 and <a href="https://github.com/bhaskarvk/leaflet.extras#readme">recommends against using it for security reasons</a>. There is a <a href="https://CRAN.R-project.org/package=leaflet.extras2">leaflet.extras2</a> package, but it doesn’t have functionality that I want.</p>
</section>
<section id="setting-up" class="level1">
<h1>Setting Up</h1>
<section id="loading-libraries" class="level2">
<h2 class="anchored" data-anchor-id="loading-libraries">Loading Libraries</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># who doesn't want to be tidy?</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(gt) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for nice tables</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(sf) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for handling geo data</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(here) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reproducible file paths</span></span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(htmltools) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># making html labels</span></span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(htmlwidgets) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># saving final map</span></span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(leafpop) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pop-up with images</span></span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(leaflet) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># mapping</span></span></code></pre></div>
</div>
</section>
<section id="file-folder-names-and-loading-data" class="level2">
<h2 class="anchored" data-anchor-id="file-folder-names-and-loading-data">File Folder Names and Loading Data</h2>
<p>Here set-up some variables that I use for the file/ folder structure and I read in the spreadsheet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># folder names</span></span>
<span id="cb2-2">blog_folder <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"posts/2023-08-14-mapping-tombstone"</span></span>
<span id="cb2-3">photo_folder <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Map"</span></span></code></pre></div>
</div>
<p>Reading in the data. This is data created by the previous portion of the project. There are also a bunch of photos in the <code>Map</code> folder. The specific photo that is associated with a given entry is listed in the <code>photo_list</code> column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">tombstones_geo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readRDS</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(blog_folder, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tombstones_geo.RDS"</span>))</span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(tombstones_geo) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="jizyfjahpm" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#jizyfjahpm table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#jizyfjahpm thead, #jizyfjahpm tbody, #jizyfjahpm tfoot, #jizyfjahpm tr, #jizyfjahpm td, #jizyfjahpm th {
  border-style: none;
}

#jizyfjahpm p {
  margin: 0;
  padding: 0;
}

#jizyfjahpm .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jizyfjahpm .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#jizyfjahpm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#jizyfjahpm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#jizyfjahpm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jizyfjahpm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jizyfjahpm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jizyfjahpm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jizyfjahpm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jizyfjahpm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jizyfjahpm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jizyfjahpm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jizyfjahpm .gt_spanner_row {
  border-bottom-style: hidden;
}

#jizyfjahpm .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#jizyfjahpm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#jizyfjahpm .gt_from_md > :first-child {
  margin-top: 0;
}

#jizyfjahpm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jizyfjahpm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#jizyfjahpm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#jizyfjahpm .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#jizyfjahpm .gt_row_group_first td {
  border-top-width: 2px;
}

#jizyfjahpm .gt_row_group_first th {
  border-top-width: 2px;
}

#jizyfjahpm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jizyfjahpm .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#jizyfjahpm .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#jizyfjahpm .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jizyfjahpm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jizyfjahpm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#jizyfjahpm .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#jizyfjahpm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#jizyfjahpm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jizyfjahpm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jizyfjahpm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jizyfjahpm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jizyfjahpm .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jizyfjahpm .gt_left {
  text-align: left;
}

#jizyfjahpm .gt_center {
  text-align: center;
}

#jizyfjahpm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jizyfjahpm .gt_font_normal {
  font-weight: normal;
}

#jizyfjahpm .gt_font_bold {
  font-weight: bold;
}

#jizyfjahpm .gt_font_italic {
  font-style: italic;
}

#jizyfjahpm .gt_super {
  font-size: 65%;
}

#jizyfjahpm .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#jizyfjahpm .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#jizyfjahpm .gt_indent_1 {
  text-indent: 5px;
}

#jizyfjahpm .gt_indent_2 {
  text-indent: 10px;
}

#jizyfjahpm .gt_indent_3 {
  text-indent: 15px;
}

#jizyfjahpm .gt_indent_4 {
  text-indent: 20px;
}

#jizyfjahpm .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="photos_Matched_Round1" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">photos_Matched_Round1</th>
<th id="Surname" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Surname</th>
<th id="First.Name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">First.Name</th>
<th id="Middle.Name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Middle.Name</th>
<th id="Maiden/Title" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Maiden/Title</th>
<th id="Cemetery" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Cemetery</th>
<th id="City" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">City</th>
<th id="State" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">State</th>
<th id="DOB" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">DOB</th>
<th id="DOD" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">DOD</th>
<th id="Age" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Age</th>
<th id="N" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">N</th>
<th id="W" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">W</th>
<th id="X13" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">X13</th>
<th id="X14" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">X14</th>
<th id="X15" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">X15</th>
<th id="N_degree" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">N_degree</th>
<th id="N_minute" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">N_minute</th>
<th id="N_second" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">N_second</th>
<th id="W_degree" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">W_degree</th>
<th id="W_minute" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">W_minute</th>
<th id="W_second" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">W_second</th>
<th id="DOB_date" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">DOB_date</th>
<th id="DOD_date" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">DOD_date</th>
<th id="Extra_First_Name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Extra_First_Name</th>
<th id="Extra_Middle_Name1" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Extra_Middle_Name1</th>
<th id="Extra_Middle_Name2" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Extra_Middle_Name2</th>
<th id="full_name_MI" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">full_name_MI</th>
<th id="full_name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">full_name</th>
<th id="full_name_MI_no_space" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">full_name_MI_no_space</th>
<th id="photos_Matched_Round2" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">photos_Matched_Round2</th>
<th id="photos_Matched_Round3" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">photos_Matched_Round3</th>
<th id="photos_Matched_Round4" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">photos_Matched_Round4</th>
<th id="photo_list" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">photo_list</th>
<th id="complete_name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">complete_name</th>
<th id="cemetery_name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">cemetery_name</th>
<th id="geometry" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">geometry</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="photos_Matched_Round1">Anderson E Francis.JPG</td>
<td class="gt_row gt_left" headers="Surname">Anderson</td>
<td class="gt_row gt_left" headers="First.Name">E</td>
<td class="gt_row gt_left" headers="Middle.Name">Francis</td>
<td class="gt_row gt_left" headers="Maiden/Title">NA</td>
<td class="gt_row gt_left" headers="Cemetery">Lebanon Cumberland Presbyterian Church</td>
<td class="gt_row gt_left" headers="City">Saline Co.</td>
<td class="gt_row gt_left" headers="State">IL</td>
<td class="gt_row gt_left" headers="DOB">23 Sep 1877</td>
<td class="gt_row gt_left" headers="DOD">24 Oct 1899</td>
<td class="gt_row gt_left" headers="Age">22y 1m 1d</td>
<td class="gt_row gt_right" headers="N">37 52.853</td>
<td class="gt_row gt_right" headers="W">88 39.164</td>
<td class="gt_row gt_left" headers="X13">Wife of AA Anderson</td>
<td class="gt_row gt_left" headers="X14">NA</td>
<td class="gt_row gt_left" headers="X15">NA</td>
<td class="gt_row gt_right" headers="N_degree">37</td>
<td class="gt_row gt_right" headers="N_minute">52</td>
<td class="gt_row gt_right" headers="N_second">853</td>
<td class="gt_row gt_right" headers="W_degree">88</td>
<td class="gt_row gt_right" headers="W_minute">39</td>
<td class="gt_row gt_right" headers="W_second">164</td>
<td class="gt_row gt_right" headers="DOB_date">1877-09-23</td>
<td class="gt_row gt_right" headers="DOD_date">1899-10-24</td>
<td class="gt_row gt_left" headers="Extra_First_Name">NA</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name1">NA</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name2">NA</td>
<td class="gt_row gt_left" headers="full_name_MI">Anderson E Francis</td>
<td class="gt_row gt_left" headers="full_name">Anderson E</td>
<td class="gt_row gt_left" headers="full_name_MI_no_space">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round2">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round3">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round4">NA</td>
<td class="gt_row gt_left" headers="photo_list">Anderson E Francis.JPG</td>
<td class="gt_row gt_left" headers="complete_name">E Francis Anderson</td>
<td class="gt_row gt_left" headers="cemetery_name">Lebanon Cumberland Presbyterian Church Cemetery</td>
<td class="gt_row gt_center" headers="geometry">c(-88.6955555555556, 38.1036111111111)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="photos_Matched_Round1">Brown Elizabeth Minnich.jpg</td>
<td class="gt_row gt_left" headers="Surname">Brown</td>
<td class="gt_row gt_left" headers="First.Name">Elizabeth</td>
<td class="gt_row gt_left" headers="Middle.Name">Minnich</td>
<td class="gt_row gt_left" headers="Maiden/Title">NA</td>
<td class="gt_row gt_left" headers="Cemetery"></td>
<td class="gt_row gt_left" headers="City">Egypt, Lehigh Co., PA</td>
<td class="gt_row gt_left" headers="State">PA</td>
<td class="gt_row gt_left" headers="DOB">1 July 1807</td>
<td class="gt_row gt_left" headers="DOD">2 Feb 1888</td>
<td class="gt_row gt_left" headers="Age">NA</td>
<td class="gt_row gt_right" headers="N">40 40.760</td>
<td class="gt_row gt_right" headers="W">75 31.705</td>
<td class="gt_row gt_left" headers="X13">One stone for husband &amp; wife</td>
<td class="gt_row gt_left" headers="X14">NA</td>
<td class="gt_row gt_left" headers="X15">NA</td>
<td class="gt_row gt_right" headers="N_degree">40</td>
<td class="gt_row gt_right" headers="N_minute">40</td>
<td class="gt_row gt_right" headers="N_second">760</td>
<td class="gt_row gt_right" headers="W_degree">75</td>
<td class="gt_row gt_right" headers="W_minute">31</td>
<td class="gt_row gt_right" headers="W_second">705</td>
<td class="gt_row gt_right" headers="DOB_date">1807-07-01</td>
<td class="gt_row gt_right" headers="DOD_date">1888-02-02</td>
<td class="gt_row gt_left" headers="Extra_First_Name">NA</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name1">NA</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name2">NA</td>
<td class="gt_row gt_left" headers="full_name_MI">Brown Elizabeth Minnich</td>
<td class="gt_row gt_left" headers="full_name">Brown Elizabeth</td>
<td class="gt_row gt_left" headers="full_name_MI_no_space">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round2">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round3">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round4">NA</td>
<td class="gt_row gt_left" headers="photo_list">Brown Elizabeth Minnich.jpg</td>
<td class="gt_row gt_left" headers="complete_name">Elizabeth Minnich Brown</td>
<td class="gt_row gt_left" headers="cemetery_name"></td>
<td class="gt_row gt_center" headers="geometry">c(-75.7125, 40.8777777777778)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="photos_Matched_Round1">Doley L Earl.JPG</td>
<td class="gt_row gt_left" headers="Surname">Doley</td>
<td class="gt_row gt_left" headers="First.Name">L</td>
<td class="gt_row gt_left" headers="Middle.Name">Earl</td>
<td class="gt_row gt_left" headers="Maiden/Title">NA</td>
<td class="gt_row gt_left" headers="Cemetery">Webber Campground</td>
<td class="gt_row gt_left" headers="City">Galatia</td>
<td class="gt_row gt_left" headers="State">IL</td>
<td class="gt_row gt_left" headers="DOB">17 Apr 1889</td>
<td class="gt_row gt_left" headers="DOD">19 Nov 1960</td>
<td class="gt_row gt_left" headers="Age">NA</td>
<td class="gt_row gt_right" headers="N">37 49.907</td>
<td class="gt_row gt_right" headers="W">88 35.306</td>
<td class="gt_row gt_left" headers="X13">One headstone</td>
<td class="gt_row gt_left" headers="X14">NA</td>
<td class="gt_row gt_left" headers="X15">NA</td>
<td class="gt_row gt_right" headers="N_degree">37</td>
<td class="gt_row gt_right" headers="N_minute">49</td>
<td class="gt_row gt_right" headers="N_second">907</td>
<td class="gt_row gt_right" headers="W_degree">88</td>
<td class="gt_row gt_right" headers="W_minute">35</td>
<td class="gt_row gt_right" headers="W_second">306</td>
<td class="gt_row gt_right" headers="DOB_date">1889-04-17</td>
<td class="gt_row gt_right" headers="DOD_date">1960-11-19</td>
<td class="gt_row gt_left" headers="Extra_First_Name">[eaman]</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name1">NA</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name2">NA</td>
<td class="gt_row gt_left" headers="full_name_MI">Doley L Earl</td>
<td class="gt_row gt_left" headers="full_name">Doley L</td>
<td class="gt_row gt_left" headers="full_name_MI_no_space">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round2">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round3">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round4">NA</td>
<td class="gt_row gt_left" headers="photo_list">Doley L Earl.JPG</td>
<td class="gt_row gt_left" headers="complete_name">L Earl Doley</td>
<td class="gt_row gt_left" headers="cemetery_name">Webber Campground Cemetery</td>
<td class="gt_row gt_center" headers="geometry">c(-88.6683333333333, 38.0686111111111)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="photos_Matched_Round1">Doley G Clyde and D Hilda.JPG</td>
<td class="gt_row gt_left" headers="Surname">Doley</td>
<td class="gt_row gt_left" headers="First.Name">G</td>
<td class="gt_row gt_left" headers="Middle.Name">Clyde</td>
<td class="gt_row gt_left" headers="Maiden/Title">NA</td>
<td class="gt_row gt_left" headers="Cemetery">Masonic &amp; Odd Fellows</td>
<td class="gt_row gt_left" headers="City">Benton</td>
<td class="gt_row gt_left" headers="State">IL</td>
<td class="gt_row gt_left" headers="DOB">5 Aug 1894</td>
<td class="gt_row gt_left" headers="DOD">1 June 1960</td>
<td class="gt_row gt_left" headers="Age">NA</td>
<td class="gt_row gt_right" headers="N">37 58.810</td>
<td class="gt_row gt_right" headers="W">88 55.084</td>
<td class="gt_row gt_left" headers="X13">One stone for husband &amp; wife; footstone--USNavy WWI</td>
<td class="gt_row gt_left" headers="X14">NA</td>
<td class="gt_row gt_left" headers="X15">NA</td>
<td class="gt_row gt_right" headers="N_degree">37</td>
<td class="gt_row gt_right" headers="N_minute">58</td>
<td class="gt_row gt_right" headers="N_second">810</td>
<td class="gt_row gt_right" headers="W_degree">88</td>
<td class="gt_row gt_right" headers="W_minute">55</td>
<td class="gt_row gt_right" headers="W_second">84</td>
<td class="gt_row gt_right" headers="DOB_date">1894-08-05</td>
<td class="gt_row gt_right" headers="DOD_date">1960-06-01</td>
<td class="gt_row gt_left" headers="Extra_First_Name">[uilford]</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name1">NA</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name2">NA</td>
<td class="gt_row gt_left" headers="full_name_MI">Doley G Clyde</td>
<td class="gt_row gt_left" headers="full_name">Doley G</td>
<td class="gt_row gt_left" headers="full_name_MI_no_space">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round2">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round3">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round4">NA</td>
<td class="gt_row gt_left" headers="photo_list">Doley G Clyde and D Hilda.JPG</td>
<td class="gt_row gt_left" headers="complete_name">G Clyde Doley</td>
<td class="gt_row gt_left" headers="cemetery_name">Masonic &amp; Odd Fellows Cemetery</td>
<td class="gt_row gt_center" headers="geometry">c(-88.94, 38.1916666666667)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="photos_Matched_Round1">Hess Samuel Jackson Chapman.JPG</td>
<td class="gt_row gt_left" headers="Surname">Hess</td>
<td class="gt_row gt_left" headers="First.Name">Samuel</td>
<td class="gt_row gt_left" headers="Middle.Name">Jackson Chapman</td>
<td class="gt_row gt_left" headers="Maiden/Title">NA</td>
<td class="gt_row gt_left" headers="Cemetery">Vienna Fraternal</td>
<td class="gt_row gt_left" headers="City">Johnson Co</td>
<td class="gt_row gt_left" headers="State">IL</td>
<td class="gt_row gt_left" headers="DOB">1854</td>
<td class="gt_row gt_left" headers="DOD">1949</td>
<td class="gt_row gt_left" headers="Age">NA</td>
<td class="gt_row gt_right" headers="N">37 25.693</td>
<td class="gt_row gt_right" headers="W">88 53.949</td>
<td class="gt_row gt_left" headers="X13">NA</td>
<td class="gt_row gt_left" headers="X14">NA</td>
<td class="gt_row gt_left" headers="X15">NA</td>
<td class="gt_row gt_right" headers="N_degree">37</td>
<td class="gt_row gt_right" headers="N_minute">25</td>
<td class="gt_row gt_right" headers="N_second">693</td>
<td class="gt_row gt_right" headers="W_degree">88</td>
<td class="gt_row gt_right" headers="W_minute">53</td>
<td class="gt_row gt_right" headers="W_second">949</td>
<td class="gt_row gt_right" headers="DOB_date">NA</td>
<td class="gt_row gt_right" headers="DOD_date">NA</td>
<td class="gt_row gt_left" headers="Extra_First_Name">NA</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name1">NA</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name2">NA</td>
<td class="gt_row gt_left" headers="full_name_MI">Hess Samuel Jackson Chapman</td>
<td class="gt_row gt_left" headers="full_name">Hess Samuel</td>
<td class="gt_row gt_left" headers="full_name_MI_no_space">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round2">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round3">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round4">NA</td>
<td class="gt_row gt_left" headers="photo_list">Hess Samuel Jackson Chapman.JPG</td>
<td class="gt_row gt_left" headers="complete_name">Samuel Jackson Chapman Hess</td>
<td class="gt_row gt_left" headers="cemetery_name">Vienna Fraternal Cemetery</td>
<td class="gt_row gt_center" headers="geometry">c(-89.1469444444445, 37.6091666666667)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="photos_Matched_Round1">Hess Catherine West.JPG</td>
<td class="gt_row gt_left" headers="Surname">Hess</td>
<td class="gt_row gt_left" headers="First.Name">Catherine</td>
<td class="gt_row gt_left" headers="Middle.Name">West</td>
<td class="gt_row gt_left" headers="Maiden/Title">NA</td>
<td class="gt_row gt_left" headers="Cemetery">Vienna Fraternal</td>
<td class="gt_row gt_left" headers="City">Johnson Co</td>
<td class="gt_row gt_left" headers="State">IL</td>
<td class="gt_row gt_left" headers="DOB">1856</td>
<td class="gt_row gt_left" headers="DOD">1906</td>
<td class="gt_row gt_left" headers="Age">NA</td>
<td class="gt_row gt_right" headers="N">37 25.693</td>
<td class="gt_row gt_right" headers="W">88 53.949</td>
<td class="gt_row gt_left" headers="X13">NA</td>
<td class="gt_row gt_left" headers="X14">NA</td>
<td class="gt_row gt_left" headers="X15">NA</td>
<td class="gt_row gt_right" headers="N_degree">37</td>
<td class="gt_row gt_right" headers="N_minute">25</td>
<td class="gt_row gt_right" headers="N_second">693</td>
<td class="gt_row gt_right" headers="W_degree">88</td>
<td class="gt_row gt_right" headers="W_minute">53</td>
<td class="gt_row gt_right" headers="W_second">949</td>
<td class="gt_row gt_right" headers="DOB_date">NA</td>
<td class="gt_row gt_right" headers="DOD_date">NA</td>
<td class="gt_row gt_left" headers="Extra_First_Name">NA</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name1">NA</td>
<td class="gt_row gt_left" headers="Extra_Middle_Name2">NA</td>
<td class="gt_row gt_left" headers="full_name_MI">Hess Catherine West</td>
<td class="gt_row gt_left" headers="full_name">Hess Catherine</td>
<td class="gt_row gt_left" headers="full_name_MI_no_space">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round2">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round3">NA</td>
<td class="gt_row gt_left" headers="photos_Matched_Round4">NA</td>
<td class="gt_row gt_left" headers="photo_list">Hess Catherine West.JPG</td>
<td class="gt_row gt_left" headers="complete_name">Catherine West Hess</td>
<td class="gt_row gt_left" headers="cemetery_name">Vienna Fraternal Cemetery</td>
<td class="gt_row gt_center" headers="geometry">c(-89.1469444444445, 37.6091666666667)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="about-leaflet" class="level1">
<h1>About Leaflet</h1>
<p><a href="https://leafletjs.com/index.html">Leaflet is a JavaScript library</a>. The R package leaflet provides an interface to many of the core leaflet features. The options for leaflet maps are endless; the R package documentation is a high level overview and delving into the JavaScript documentation for details is a must if you want to do a lot of customization. You can also extend R leaflet by calling <a href="http://rstudio.github.io/leaflet/extending.html">JavaScript plugins within R leaflet</a>. This is beyond the scope of this tutorial. Since the number of plugins/libraries/extensions for leaflet in JavaScript is extensive, it is worth being aware of this option.</p>
<p>Here, I’m going to stick with features available in the R leaflet packages, though I will pass some options that I found in the JavaScript documentation.</p>
</section>
<section id="handling-overlapping-points" class="level1">
<h1>Handling Overlapping Points?</h1>
<p>Some tombstones are very close together and have the same GPS coordinates. I initially solved this by using <a href="https://lsinks.github.io/posts/2023-08-04-data-cleaning-tombstone/tombstones_data_cleaning.html#converting-to-geo-data"><code>sf_jitter()</code> to jitter the coordinates</a>, but I didn’t optimize it at all. Here I’m going to demonstrate a few different ways to handle this issue.</p>
<p>First, how many overlapping points do I have?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb4-2">  tombstones_geo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(geometry) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(geometry, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sort =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb4-6"></span>
<span id="cb4-7">test <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tab_options</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">container.height =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">px</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">container.padding.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">px</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span>))</span></code></pre></div>
<div class="cell-output-display">
<div id="rbuhozzhop" style="padding-left:0px;padding-right:0px;padding-top:24px;padding-bottom:24px;overflow-x:auto;overflow-y:auto;width:auto;height:300px;">
<style>#rbuhozzhop table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rbuhozzhop thead, #rbuhozzhop tbody, #rbuhozzhop tfoot, #rbuhozzhop tr, #rbuhozzhop td, #rbuhozzhop th {
  border-style: none;
}

#rbuhozzhop p {
  margin: 0;
  padding: 0;
}

#rbuhozzhop .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rbuhozzhop .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rbuhozzhop .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rbuhozzhop .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rbuhozzhop .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rbuhozzhop .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rbuhozzhop .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rbuhozzhop .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rbuhozzhop .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rbuhozzhop .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rbuhozzhop .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rbuhozzhop .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rbuhozzhop .gt_spanner_row {
  border-bottom-style: hidden;
}

#rbuhozzhop .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rbuhozzhop .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rbuhozzhop .gt_from_md > :first-child {
  margin-top: 0;
}

#rbuhozzhop .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rbuhozzhop .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rbuhozzhop .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rbuhozzhop .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rbuhozzhop .gt_row_group_first td {
  border-top-width: 2px;
}

#rbuhozzhop .gt_row_group_first th {
  border-top-width: 2px;
}

#rbuhozzhop .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rbuhozzhop .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rbuhozzhop .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rbuhozzhop .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rbuhozzhop .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rbuhozzhop .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rbuhozzhop .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rbuhozzhop .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rbuhozzhop .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rbuhozzhop .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rbuhozzhop .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rbuhozzhop .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rbuhozzhop .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rbuhozzhop .gt_left {
  text-align: left;
}

#rbuhozzhop .gt_center {
  text-align: center;
}

#rbuhozzhop .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rbuhozzhop .gt_font_normal {
  font-weight: normal;
}

#rbuhozzhop .gt_font_bold {
  font-weight: bold;
}

#rbuhozzhop .gt_font_italic {
  font-style: italic;
}

#rbuhozzhop .gt_super {
  font-size: 65%;
}

#rbuhozzhop .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rbuhozzhop .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rbuhozzhop .gt_indent_1 {
  text-indent: 5px;
}

#rbuhozzhop .gt_indent_2 {
  text-indent: 10px;
}

#rbuhozzhop .gt_indent_3 {
  text-indent: 15px;
}

#rbuhozzhop .gt_indent_4 {
  text-indent: 20px;
}

#rbuhozzhop .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="geometry" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">geometry</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-88.865, 37.9888888888889)</td>
<td class="gt_row gt_right" headers="n">3</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-75.7125, 40.8777777777778)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-88.6683333333333, 38.0686111111111)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-89.1469444444445, 37.6091666666667)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-88.9752777777778, 38.1669444444444)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-88.6952777777778, 38.1044444444444)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-89.0463888888889, 37.8788888888889)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-86.7688888888889, 36.6922222222222)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-89.1477777777778, 37.6080555555556)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-88.7008333333333, 38.1088888888889)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-89.0233333333333, 38.0594444444444)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-83.2383333333333, 38.895)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-88.6983333333333, 38.1036111111111)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-89.0361111111111, 38.0386111111111)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-89.0194444444444, 38.0566666666667)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-89.1330555555556, 37.9472222222222)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-87.1911111111111, 38.5569444444444)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-88.8675, 37.6602777777778)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-88.6944444444445, 38.1036111111111)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-89.1475, 37.6088888888889)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-87.1908333333333, 38.5572222222222)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-75.5988888888889, 40.7125)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-89.015, 37.8511111111111)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-88.9466666666667, 37.9655555555556)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-88.6794444444444, 38.0466666666667)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="geometry">c(-89.1938888888889, 37.9288888888889)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="geometry">c(-88.7016666666667, 38.1044444444444)</td>
<td class="gt_row gt_right" headers="n">2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>27 sets of identical coordinates corresponding to 55 individual graves. This is roughly 30% of the data set, so this isn’t an issue that can just be glossed over</p>
<p>Now let’s make a set of entries that are only duplicates. To join spatial data, we need to use <a href="https://r-spatial.github.io/sf/reference/st_join.html"><code>st_join()</code></a>. This function has two joining parameters. One is join, which defaults to <code>st_intersects()</code>. The other join parameter is set with the parameter left. If <code>left = TRUE</code> then the function returns a left join, otherwise, and inner join. That is, I expect left = TRUE to return 194 records and FALSE to return 55 records. This is what I get.</p>
<p>There are other types of spatial joins you can perform with <code>st_join()</code> beyond intersects, including <code>st_touches()</code> and <code>st_within()</code>, so check the documentation for if you want to do other types of spatial filtering and joining.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">test_for_jitter_left <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tombstones_geo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_join</span>(test, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">left =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) </span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(test_for_jitter_left)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 194</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">test_for_jitter_inner <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tombstones_geo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_join</span>(test, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">left =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb7-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(test_for_jitter_inner)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 55</code></pre>
</div>
</div>
</section>
<section id="building-a-simple-map" class="level1">
<h1>Building a Simple Map</h1>
<p>I’m going work on this problem using the one set of coordinate where there are 3 tombstones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> test_for_jitter_inner <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
</div>
<p>Here is a simple leaflet map. The procedure is to initialize leaflet with <code>leaflet()</code>, add an underlying map (<code>add_Tiles()</code>) and then add my markers with the label (<code>addCircleMarkers()</code>) from my dataframe. I’m also adding a scale bar (<code>addScaleBar()</code>). Everything is piped together with the standard <a href="https://magrittr.tidyverse.org/articles/magrittr.html">tidyverse/ magrittr pipe,</a> though of course you can use standard<a href="https://rstudio.github.io/leaflet/">function calls instead</a>.</p>
<p>The default underlying map used by <code>addTiles()</code> is OpenStreetMap. If you want to use different map, you can <code>addProviderTiles(name)</code> instead. A demo of the different providers is found <a href="http://leaflet-extras.github.io/leaflet-providers/preview/index.html">here</a>.</p>
<p>The leaflet package uses the formula interface to access fields (see the section <em>The Formula Interface</em> at the bottom of the page <a href="https://rstudio.github.io/leaflet/map_widget.html">here</a>). The dataframe is passed as <code>data = df</code>, and then the fields are accessed via <code>~field_name</code>. To access multiple fields, such as in my label, the tilde (~) is used outside the list of fields.</p>
<p>You can add as many layers as you want and they don’t have to all be the same type. I demonstrate adding data points as well as polygons in this map of <a href="https://lsinks.github.io/posts/2023-07-04-tidytuesday-historic-markers/markers.html">Arlington County Historic Districts</a>.</p>
<section id="basic-map" class="level2">
<h2 class="anchored" data-anchor-id="basic-map">Basic Map</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">simple_map <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">leaflet</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addTiles</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addScaleBar</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addCircleMarkers</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> test,</span>
<span id="cb10-5">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(complete_name, cemetery_name, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>)))</span>
<span id="cb10-6"></span>
<span id="cb10-7">simple_map</span></code></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-4b5d63e6ff160f99c10e" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-4b5d63e6ff160f99c10e">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"topright"}]},{"method":"addCircleMarkers","args":[[37.98888888888889,37.98888888888889,37.98888888888889],[-88.86499999999999,-88.86499999999999,-88.86499999999999],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,null,null,["W M Bundy Liberty Methodist Cemetery","Clem Bundy Liberty Methodist Cemetery","Nancy Bundy Liberty Methodist Cemetery"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[37.98888888888889,37.98888888888889],"lng":[-88.86499999999999,-88.86499999999999]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>As you can see, no matter how far you zoom, the points never separate. And for what it is worth, the last entry in the test dataframe is shown, indicating the points are added sequentially.</p>
</section>
<section id="markercluster-map" class="level2">
<h2 class="anchored" data-anchor-id="markercluster-map"><code>markerCluster</code> Map</h2>
<p>Many maps you see on line use a technique called “spiderify” to separate overlapping points. Spiderifying disperses the points as you zoom in.</p>
<p>There are two ways to spiderify a leaflet map. There is a javascript module for spiderifying in can be found here. There is another plug-in called <code>markerCluster</code>, which both clusters and spiderifies points, depending on the zoom level. There is access to this package through the R leaflet package. To access it, use <a href="https://cran.r-project.org/web/packages/leaflet/leaflet.pdf"><code>clusterOptions = markerClusterOptions()</code></a>. For details about the options that can be passed to <code>markerClusterOptions()</code> see the <a href="https://github.com/Leaflet/Leaflet.markercluster#other-options">js plug-in documentation</a>.</p>
<p><code>markerCluster</code> clusters/ groups the data points into a single dot color coded by the number of points it contains (orange, yellow, green) and also displays the number of points in the dot. Single points (not clusters) are displayed in blue or whatever color you set them in the leaflet options. The grouping is set by the number of pixels at the current zoom level (set with <code>maxClusterRadius</code> and defaults to 80 pixels. As you click on a cluster, it zooms in and breaks it up into smaller clusters. (This functionality can be turned off with the parameter <code>zoomToBoundsOnClick</code>.) At the highest zoom, the points are spiderified. This too can be turned off with the parameter <code>spiderfyOnMaxZoom</code>. Both of these features are turned on by default.</p>
<p>I’m going to go back to the 55 data points set just to illustrate this functionality more clearly. (Click on a cluster. It will zoom and split the point as you keep clicking until you end up with just the points with the same coordinates.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">cluster_map <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">leaflet</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addTiles</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addScaleBar</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addCircleMarkers</span>(</span>
<span id="cb11-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> test,</span>
<span id="cb11-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(complete_name, cemetery_name, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>)), </span>
<span id="cb11-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">clusterOptions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">markerClusterOptions</span>(),</span>
<span id="cb11-8">    )</span>
<span id="cb11-9"></span>
<span id="cb11-10">cluster_map</span></code></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-48b0f9f865e59eb7bf66" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-48b0f9f865e59eb7bf66">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"topright"}]},{"method":"addCircleMarkers","args":[[37.98888888888889,37.98888888888889,37.98888888888889],[-88.86499999999999,-88.86499999999999,-88.86499999999999],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,null,null,["W M Bundy Liberty Methodist Cemetery","Clem Bundy Liberty Methodist Cemetery","Nancy Bundy Liberty Methodist Cemetery"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[37.98888888888889,37.98888888888889],"lng":[-88.86499999999999,-88.86499999999999]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>It does separate the points, but it is very hard to click on correct portion of the dot to get the label or pop-up. I think you need to hover on the part of the circle marker that does not overlap with either the cluster marker or the or the other circle markers. This can be solved by making the circle markers very large, so there is more non-overlapping area, but I find this to be ugly.</p>
<p>Luckily, the option <code>spiderfyDistanceMultiplier</code> lets you tailor the distance. I set it to 2, which does put the points km apart (exact distance depends on the zoom). But since they are connected back to the original location with a line, I think it is clear where the points are actually located. When I had other people test the map, the larger displacement was much easier for them to operate the map.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">cluster_map_separated <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">leaflet</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addTiles</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addProviderTiles</span>(providers<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>CartoDB.Positron) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addScaleBar</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addCircleMarkers</span>(</span>
<span id="cb12-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> test,</span>
<span id="cb12-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(complete_name, cemetery_name, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>)), </span>
<span id="cb12-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">clusterOptions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">markerClusterOptions</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">spiderfyDistanceMultiplier =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb12-9">  ) </span>
<span id="cb12-10"></span>
<span id="cb12-11">cluster_map_separated</span></code></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9a1c0ceaf470c922652c" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9a1c0ceaf470c922652c">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"topright"}]},{"method":"addCircleMarkers","args":[[37.98888888888889,37.98888888888889,37.98888888888889],[-88.86499999999999,-88.86499999999999,-88.86499999999999],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false,"spiderfyDistanceMultiplier":2},null,null,null,["W M Bundy Liberty Methodist Cemetery","Clem Bundy Liberty Methodist Cemetery","Nancy Bundy Liberty Methodist Cemetery"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[37.98888888888889,37.98888888888889],"lng":[-88.86499999999999,-88.86499999999999]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="using-sf_jitter" class="level2">
<h2 class="anchored" data-anchor-id="using-sf_jitter">Using sf_jitter</h2>
<p>The other option for handling this problem (and my original approach) is to jitter the points using <a href="https://r-spatial.github.io/sf/reference/st_jitter.html"><code>st_jitter()</code></a>. I think this approach wasn’t as bad as I originally thought. I was guessing which points should have been originally the same location based on cemetery name, but I think probably many of them were in the same cemetery, but with different coordinates to start with.</p>
<p>I found the documentation for this package unclear. Things didn’t behave as I expected. I’m going to go through my work in detail, in case it helps someone else struggling with <code>sf_jitter()</code>.</p>
<p>The function <code>st_jitter()</code> takes two parameters, <code>amount</code> and <code>factor</code>. Most examples I’ve seen just use factor, perhaps because everyone found amount as confusing as I did.</p>
<p>Here are the definitions of the parameters.</p>
<dl>
<dt><strong>amount</strong></dt>
<dd>
<p>numeric; amount of jittering applied; if missing, the amount is set to factor * the bounding box diagonal; units of coordinates.</p>
</dd>
<dt><strong>factor</strong></dt>
<dd>
<p>numeric; fractional amount of jittering to be applied</p>
</dd>
</dl>
<p>First, it isn’t that hard to find cases where the default value for <code>amount</code> doesn’t work. This can be really disconcerting when recycling working code to other dataframes, and suddenly things are not as expected.</p>
<p>My dataframe test with 3 points at the same location reports a bounding box, but <code>xmin</code> = <code>xmax</code> and <code>ymin</code> = <code>ymax</code>. (The bounding box can be extracted with <code>st_bbox()</code>.)</p>
<p>Applying <code>st_jitter()</code> to this dataframe doesn’t produce any sort of errors (and probably should, since then the diagonal of the bounding box is 0.) Instead, the original coordinates are returned with no error or message.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_bbox</span>(test)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     xmin      ymin      xmax      ymax 
-88.86500  37.98889 -88.86500  37.98889 </code></pre>
</div>
</div>
<p>And here’s the jittered dataframe. You can see it didn’t jitter it at all.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">test_jittered_no_amt <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> test <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_jitter</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">factor =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb15-3"></span>
<span id="cb15-4">test_jittered_no_amt <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(geometry)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 3 features and 0 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -88.865 ymin: 37.98889 xmax: -88.865 ymax: 37.98889
Geodetic CRS:  WGS 84
                  geometry
1 POINT (-88.865 37.98889)
2 POINT (-88.865 37.98889)
3 POINT (-88.865 37.98889)</code></pre>
</div>
</div>
<p>Perhaps it is always better to specify amount, so the code will be more robust. This seems reasonable, but I cannot figure out what units <code>amount</code> is in! I think it should be in degrees. The documentation says it is in <code>units of coordinates</code>. The units of the the sf object can be extracted using <a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs()</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_crs</span>(test_for_jitter_inner, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">parameters =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ud_unit</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 [°]</code></pre>
</div>
</div>
<p>Then, I’d expect <code>amount = 1</code> and <code>factor = 1</code> to produce coordinates jittered by about a degree. (The documentation says “For longlat data, a latitude correction is made such that jittering in East and North directions are identical in distance in the center of the bounding box of&nbsp;<code>x</code>.”, so maybe not exactly 1 degree based on the correction.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">test_jittered <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> test <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb19-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_jitter</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">amount =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">factor =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb19-3"></span>
<span id="cb19-4">test_jittered <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(geometry)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 3 features and 0 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -88.99865 ymin: 37.08968 xmax: -88.45622 ymax: 38.86458
Geodetic CRS:  WGS 84
                    geometry
1 POINT (-88.99865 38.56987)
2 POINT (-88.45622 37.08968)
3  POINT (-88.5941 38.86458)</code></pre>
</div>
</div>
<p>Maybe it is the diagonal that is supposed to be 1? This can be calculated with the Pythagorean theorem.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1">((<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">89.63298</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">89.32716</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> ( <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">37.39874</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">38.41781</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.063969</code></pre>
</div>
</div>
<p>So that it, and not at all what I understood from reading the description. The second point of confusion is that I thought that you could specify both factor and amount. (Clearly! As you can see from the example above.) But if you specify <code>amount</code>, then factor doesn’t get used.</p>
<p>In this case, I’d like the points to be jittered by a few meters or so. It is a bit of math to figure out what that is relative to the bounding box diagonal in degrees or some trial and error. On the plus side, the displacement of the dots is independent of the zoom of the map or any other map parameter since it is generated outside the mapping.</p>
<p>So here is the jittered map.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1">test_jittered <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> test <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_jitter</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">amount =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.0001</span>)</span>
<span id="cb23-3"></span>
<span id="cb23-4">map_sf_jitter_all <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">leaflet</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addTiles</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addScaleBar</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb23-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addCircleMarkers</span>(</span>
<span id="cb23-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> test_jittered,</span>
<span id="cb23-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(complete_name, cemetery_name, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>))</span>
<span id="cb23-10">  ) </span>
<span id="cb23-11"></span>
<span id="cb23-12">map_sf_jitter_all</span></code></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-279a0041fdddd6313b6d" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-279a0041fdddd6313b6d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"topright"}]},{"method":"addCircleMarkers","args":[[37.98881045206472,37.9888194016402,37.98898161456104],[-88.86499072786465,-88.86498414029502,-88.86500536790165],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,null,null,["W M Bundy Liberty Methodist Cemetery","Clem Bundy Liberty Methodist Cemetery","Nancy Bundy Liberty Methodist Cemetery"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[37.98881045206472,37.98898161456104],"lng":[-88.86500536790165,-88.86498414029502]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>There isn’t any indication that a dot represents multiple points at the more zoomed out scales. Additionally, the zooming experience is very unpleasant. With the clustered option, the map is zoomed and centered as you click through the clusters. There is also a very clear indication (the number in the cluster) that there are multiple data points in the dot. Here, more data points make a darker circle, but this isn’t crystal clear.</p>
</section>
</section>
<section id="styling-the-clustered-map" class="level1">
<h1>Styling the Clustered Map</h1>
<p>All that said, I’m going to go with the markerCluster map. It is a more user friendly experience for the end user.</p>
<section id="make-a-nice-label-formatted-with-html" class="level2">
<h2 class="anchored" data-anchor-id="make-a-nice-label-formatted-with-html">Make a nice label formatted with HTML</h2>
<p>I’d like a pop-up with biographical information along with the picture, but there is a lot of missing data, so I need to construct the info box carefully or it will be full of NAs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1">tombstones_geo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(DOB, DOD)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 194 features and 2 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -89.2775 ymin: 35.97833 xmax: -73.48583 ymax: 44.75056
Geodetic CRS:  WGS 84
First 10 features:
           DOB          DOD                   geometry
1  23 Sep 1877  24 Oct 1899 POINT (-88.69556 38.10361)
2  1 July 1807   2 Feb 1888  POINT (-75.7125 40.87778)
3  17 Apr 1889  19 Nov 1960 POINT (-88.66833 38.06861)
4   5 Aug 1894  1 June 1960    POINT (-88.94 38.19167)
5         1854         1949 POINT (-89.14694 37.60917)
6         1856         1906 POINT (-89.14694 37.60917)
7  27 Feb 1864   3 Dec 1942  POINT (-89.1475 37.60833)
8  29 Sep 1748 19 June 1817 POINT (-75.65028 40.78278)
9  15 Feb 1746  3 June 1823  POINT (-76.0425 41.22528)
10        &lt;NA&gt;         &lt;NA&gt;  POINT (-89.00722 38.1875)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1">tombstones_geo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tombstones_geo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb26-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dob_label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(DOB) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Born: "</span>, DOB)))</span>
<span id="cb26-3"></span>
<span id="cb26-4">tombstones_geo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tombstones_geo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb26-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dod_label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(DOD) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Died: "</span>, DOD)))</span></code></pre></div>
</div>
<p>Playing with the map, I see that two entries have the state in both the city and the state column, so I’m going to fix that.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">tombstones_geo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(Surname <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brown"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(City, State)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 2 features and 2 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -75.7125 ymin: 40.87778 xmax: -75.7125 ymax: 40.87778
Geodetic CRS:  WGS 84
                   City State                  geometry
1 Egypt, Lehigh Co., PA    PA POINT (-75.7125 40.87778)
2 Egypt, Lehigh Co., PA    PA POINT (-75.7125 40.87778)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1">tombstones_geo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb29-2">  tombstones_geo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb29-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">City =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(City <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Egypt, Lehigh Co., PA"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Egypt, Lehigh Co."</span>, City)</span>
<span id="cb29-4">)</span></code></pre></div>
</div>
</section>
<section id="cleaning-the-city-field" class="level2">
<h2 class="anchored" data-anchor-id="cleaning-the-city-field">Cleaning the City Field</h2>
<p>The formatting of the city column is pretty inconsistent. I’m going to clean it up also.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1">tombstones_geo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb30-2">  tombstones_geo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb30-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">City =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(City, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Co</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">."</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"County"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb30-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">City =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(City, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Co$"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"County"</span>))         </span></code></pre></div>
</div>
<p>In leaflet, it seems that labels require that the html be generated with <code>htmltools::HTML</code>, while popups understand html tags already and can just be passed something like <code>paste("&lt;strong&gt;", complete_name, "&lt;/strong&gt;")</code>. Since I was playing around with what info was displayed in label vs.&nbsp;popup, I just rendered everything with <code>htmltools::HTML</code> so I could switch things around without having to modify the text. There is a nice demonstration of the difference between labels and pop-ups on the <a href="https://www.drdataking.com/post/how-to-add-multiple-lines-label-on-a-leaflet-map/">Dr.Data.King blog</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1">tombstones_geo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tombstones_geo <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb31-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb31-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">boxinfo =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(</span>
<span id="cb31-4">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;strong&gt;"</span>,</span>
<span id="cb31-5">      complete_name ,</span>
<span id="cb31-6">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;/strong&gt;"</span>,</span>
<span id="cb31-7">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;br/&gt;&lt;hr&gt;"</span>,</span>
<span id="cb31-8">      dob_label,</span>
<span id="cb31-9">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>,</span>
<span id="cb31-10">      dod_label,</span>
<span id="cb31-11">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;br/&gt;&lt;hr&gt;"</span>,</span>
<span id="cb31-12">      cemetery_name ,</span>
<span id="cb31-13">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" in "</span>,</span>
<span id="cb31-14">      City,</span>
<span id="cb31-15">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" , "</span>,</span>
<span id="cb31-16">      State,</span>
<span id="cb31-17">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;br/&gt;"</span></span>
<span id="cb31-18">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb31-19">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(htmltools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>HTML)</span>
<span id="cb31-20">  )</span></code></pre></div>
</div>
</section>
<section id="final-map" class="level2">
<h2 class="anchored" data-anchor-id="final-map">Final Map</h2>
<p>I’m adding a specific provider tile rather than the default. The label for the point appears when you hover over it and has name and location. There is a pop-up generated in the <code>addCircleMarkers</code> with the biographical info. When <code>addPopupImages()</code> is called, it just appends the photos to that text. The marker pop-up and the pop-up with the picture need <a href="https://github.com/r-spatial/leafpop/issues/14">to be linked by group</a>.</p>
<p>I couldn’t find a way to directly add text to the <code>addPopupImages()</code> call.</p>
<p>I don’t like the outline around the markers, so I turned it off with <code>stroke = NA</code> and I made the <code>radius = 10</code>.</p>
<p>Next, I call leafpop to add the popup with the images. Documentation for leafpop can be found at <a href="https://cran.r-project.org/web/packages/leafpop/leafpop.pdf">CRAN</a> and on the <a href="https://github.com/r-spatial/leafpop">leafpop website</a>. You can add tables, charts, graphs, and images with leafpop. While leafpop can be called within <code>addCircleMarker</code> via <code>popup = popupImage()</code> it will not embed the image within the map. If you intend to save it, then you need to use the separate call to <code>addPopupImages()</code>. Unlike leaflet, the package leafpop does not use the formula notation and requires a “character vector of file path(s) or web-URL(s) to any sort of image file(s).” This is extracted from my dataframe using <code>image_list &lt;- tombstones_geo$photo_list</code>. (Here I use the suffix _list to mean list in the plain English sense of the word, not a list type object.)</p>
<p>I found that specifying the width and max width of the popup was critical. If it were left to the defaults or “too large” then I just got the broken picture icon.</p>
<p>There is also a really weird issue that I can’t figure out that I want to highlight. Sometimes, when I run my quarto document in R, the leaflet map displays with broken pic icons. BUT, rendering the quarto doc does create working pop-ups with the right pics. Other times, both running and rendering produces a working map with pic popups. And even if the map is broken when I “run” instead of “render”, it saves a perfectly working map. I can’t reliably produce either state, and I don’t have any warnings. I couldn’t find anything about this when I googled, so if your map doesn’t work when you are working in quarto (or probably R markdown) try rendering it or saving it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1">image_list <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tombstones_geo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>photo_list</span>
<span id="cb32-2"></span>
<span id="cb32-3">final_map <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">leaflet</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addProviderTiles</span>(providers<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>CartoDB.Positron) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addScaleBar</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addCircleMarkers</span>(</span>
<span id="cb32-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> tombstones_geo,</span>
<span id="cb32-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(</span>
<span id="cb32-9">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;strong&gt;"</span>, complete_name, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;/strong&gt;"</span>),</span>
<span id="cb32-10">      htmltools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>HTML</span>
<span id="cb32-11">    ),</span>
<span id="cb32-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">popup =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> boxinfo,</span>
<span id="cb32-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">clusterOptions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">markerClusterOptions</span>(</span>
<span id="cb32-14">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">spiderfyDistanceMultiplier =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb32-15">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">maxClusterRadius =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span></span>
<span id="cb32-16">    ),</span>
<span id="cb32-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">radius =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,</span>
<span id="cb32-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">stroke =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>,</span>
<span id="cb32-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"group1"</span></span>
<span id="cb32-20">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-21">  leafpop<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addPopupImages</span>(</span>
<span id="cb32-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">image =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(blog_folder, photo_folder), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>, image_list),</span>
<span id="cb32-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">src =</span> local,</span>
<span id="cb32-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"group1"</span>,</span>
<span id="cb32-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span>,</span>
<span id="cb32-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">maxHeight =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>,</span>
<span id="cb32-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">maxWidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span></span>
<span id="cb32-28">  )</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1">final_map</span></code></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-083ad032d5dc9b35761a" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-083ad032d5dc9b35761a">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"topright"}]},{"method":"addCircleMarkers","args":[[38.10361111111111,40.87777777777777,38.06861111111112,38.19166666666667,37.60916666666667,37.60916666666667,37.60833333333333,40.78277777777778,41.22527777777778,38.1875,38.32166666666667,38.05666666666666,37.73194444444444,37.60583333333333,37.60527777777777,37.63972222222222,38.16694444444445,38.1675,38.16666666666667,38.10444444444445,38.10361111111111,38.10333333333333,36.83083333333334,37.98888888888889,37.87888888888889,38.05222222222223,38.05416666666667,38.88972222222223,38.90305555555555,38.06861111111112,36.69222222222223,36.6925,36.56805555555555,37.98611111111111,38.17388888888889,38.17472222222222,38.05388888888889,38.05166666666667,38.05083333333334,38.04861111111111,38.04861111111111,38.06222222222222,38.06055555555556,38.06138888888889,38.06138888888889,38.06083333333333,38.06055555555556,38.06055555555556,38.10305555555556,38.9025,37.60805555555555,37.60916666666667,38.10888888888889,38.10888888888889,38.05944444444444,38.05944444444444,38.06027777777778,38.05972222222222,37.80666666666666,37.80555555555555,38.17472222222222,37.80638888888888,38.895,38.895,38.05916666666666,37.92333333333333,37.96583333333334,38.10361111111111,38.10361111111111,36.35861111111111,37.9225,38.03861111111111,38.05722222222222,38.05694444444444,38.05666666666666,38.05666666666666,37.80666666666666,37.80555555555555,37.92833333333333,37.92888888888889,37.94722222222222,37.94722222222222,38.55694444444444,37.60944444444444,37.66027777777777,37.66027777777777,37.73777777777778,37.73194444444444,37.73194444444444,37.60888888888888,37.60611111111111,36.26777777777778,36.68972222222222,38.16694444444445,38.16694444444445,37.95944444444444,37.95861111111111,37.96027777777778,38.10361111111111,38.10361111111111,38.10361111111111,38.10388888888889,37.99333333333333,38.10444444444445,36.63666666666667,38.55694444444444,36.63694444444445,40.87777777777777,37.98888888888889,37.98888888888889,38.10972222222222,38.10916666666667,37.87888888888889,37.60888888888888,37.60888888888888,38.55722222222222,36.58916666666666,36.59,37.92277777777778,37.92305555555556,38.89555555555555,38.89,36.69222222222223,36.56777777777778,36.825,40.7825,38.55722222222222,44.75056,37.53583333333333,36.68583333333333,38.90305555555555,38.06027777777778,37.60749999999999,37.60749999999999,37.60777777777778,37.60805555555555,40.75777777777778,40.75833333333333,37.925,38.8675,36.69,38.4375,38.43805555555556,38.0575,38.80472222222222,37.85694444444444,35.97916666666667,35.97833333333333,40.78305555555556,40.7125,40.71277777777777,40.71277777777777,40.7125,41.22583333333333,40.80972222222222,37.60611111111111,38.18722222222222,38.05944444444444,37.83527777777778,37.85111111111111,37.85111111111111,37.96555555555555,37.965,37.96555555555555,37.96555555555555,37.95111111111111,37.95138888888889,38.04666666666667,38.04666666666667,40.80416666666667,40.80555555555556,40.80555555555556,38.17555555555555,37.92472222222222,38.03861111111111,38.05805555555555,37.80666666666666,37.92888888888889,37.92888888888889,38.7825,38.10888888888888,37.62555555555555,37.73194444444444,37.51861111111111,37.51833333333334,38.10444444444445,38.10444444444445,36.63694444444445,37.80944444444444,37.93111111111111,37.92083333333333,37.95972222222223,37.96,38.05611111111111],[-88.69555555555556,-75.71250000000001,-88.66833333333332,-88.94,-89.14694444444446,-89.14694444444446,-89.14750000000001,-75.65027777777777,-76.0425,-89.00722222222223,-88.87444444444444,-89.0188888888889,-86.90555555555557,-88.90472222222223,-88.90472222222223,-88.98166666666665,-88.97527777777778,-88.97555555555556,-88.97583333333334,-88.69527777777779,-88.69638888888889,-88.69583333333334,-86.77333333333334,-88.86499999999999,-89.0463888888889,-89.10222222222222,-89.10472222222222,-83.24111111111111,-82.98694444444445,-88.66833333333332,-86.76888888888888,-86.76861111111111,-86.89138888888888,-88.98999999999999,-88.97333333333334,-88.97361111111111,-89.10416666666666,-89.10388888888889,-89.10638888888889,-89.10722222222222,-89.10555555555555,-89.1825,-89.18166666666667,-89.18138888888889,-89.18222222222222,-89.18194444444445,-89.18222222222222,-89.18444444444445,-88.69472222222223,-83.22277777777778,-89.14777777777779,-89.14638888888889,-88.70083333333334,-88.70083333333334,-89.02333333333334,-89.02333333333334,-89.01750000000001,-89.01750000000001,-89.00861111111112,-89.0125,-88.96138888888889,-89.00805555555556,-83.23833333333333,-83.23833333333333,-89.02500000000001,-89.19388888888889,-88.94861111111112,-88.69833333333334,-88.69833333333334,-86.86277777777778,-88.9813888888889,-89.03611111111111,-89.01916666666668,-89.01972222222223,-89.01944444444445,-89.01944444444445,-89.01194444444445,-89.01194444444445,-89.19388888888889,-89.19305555555556,-89.13305555555556,-89.13305555555556,-87.1911111111111,-89.13916666666667,-88.86749999999999,-88.86749999999999,-86.91222222222223,-86.9063888888889,-86.90611111111112,-89.14500000000001,-88.90472222222223,-86.36916666666667,-86.76861111111111,-88.97527777777778,-88.97583333333334,-88.89027777777778,-88.88944444444445,-88.88916666666667,-88.69444444444446,-88.69444444444446,-88.69416666666667,-88.69444444444446,-88.77250000000001,-88.69527777777779,-86.98694444444445,-87.1911111111111,-86.98694444444445,-75.71250000000001,-88.86499999999999,-88.86499999999999,-88.68277777777779,-88.70222222222223,-89.0463888888889,-89.14750000000001,-89.14750000000001,-87.19083333333333,-87.02361111111111,-87.02333333333333,-89.19277777777778,-89.19250000000001,-83.24083333333334,-83.24083333333334,-86.76888888888888,-86.89138888888888,-86.76777777777778,-75.64805555555556,-87.19083333333333,-73.48583000000001,-87.70333333333333,-86.99333333333333,-83.22277777777778,-89.18333333333334,-89.14638888888889,-89.14694444444446,-89.14777777777779,-89.14777777777779,-75.43666666666667,-75.43611111111112,-88.96055555555556,-87.28583333333334,-86.76861111111111,-85.76861111111111,-85.76833333333333,-89.12583333333333,-89.27527777777777,-89.26111111111112,-80.48583333333333,-80.48638888888888,-75.64277777777778,-75.59888888888889,-75.59888888888889,-75.59833333333334,-75.59888888888889,-76.04138888888889,-75.57083333333334,-88.90555555555557,-89.00666666666667,-89.02500000000001,-88.88194444444444,-89.015,-89.015,-88.94777777777779,-88.94694444444445,-88.94666666666667,-88.94666666666667,-89.15416666666667,-89.15416666666667,-88.67944444444444,-88.67944444444444,-75.57916666666667,-75.57222222222222,-75.57194444444445,-89.01166666666667,-88.95750000000001,-89.03611111111111,-89.01916666666668,-89.01222222222223,-89.19388888888889,-89.19388888888889,-89.27749999999999,-88.87805555555555,-88.97972222222222,-88.90611111111112,-89.0775,-88.80138888888888,-88.70166666666667,-88.70166666666667,-86.98638888888888,-89.00638888888889,-88.68666666666667,-88.98944444444444,-88.89055555555557,-88.89083333333333,-89.12638888888888],10,null,"group1",{"interactive":true,"className":"","stroke":null,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false,"spiderfyDistanceMultiplier":2,"maxClusterRadius":50},null,["<strong>E Francis Anderson<\/strong><br/><hr>Born: 23 Sep 1877 Died: 24 Oct 1899<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Elizabeth Minnich Brown<\/strong><br/><hr>Born: 1 July 1807 Died: 2 Feb 1888<br/><hr> in Egypt, Lehigh County , PA<br/>","<strong>L Earl Doley<\/strong><br/><hr>Born: 17 Apr 1889 Died: 19 Nov 1960<br/><hr>Webber Campground Cemetery in Galatia , IL<br/>","<strong>G Clyde Doley<\/strong><br/><hr>Born: 5 Aug 1894 Died: 1 June 1960<br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>Samuel Jackson Chapman Hess<\/strong><br/><hr>Born: 1854 Died: 1949<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>Catherine West Hess<\/strong><br/><hr>Born: 1856 Died: 1906<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>George Dougin Hess<\/strong><br/><hr>Born: 27 Feb 1864 Died: 3 Dec 1942<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>Anna Maria Kleppinger<\/strong><br/><hr>Born: 29 Sep 1748 Died: 19 June 1817<br/><hr>Zion Stone Church Cemetery in Kreidersville , PA<br/>","<strong>Johann Georg Nagel<\/strong><br/><hr>Born: 15 Feb 1746 Died: 3 June 1823<br/><hr>Hanover Green Cemetery in Wilkes-Barre , PA<br/>","<strong>Cynthia Ann Odom<\/strong><br/><hr> <br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>William Epps Pickard<\/strong><br/><hr>Born: 19 Feb 1839 Died: 6 Jan 1907<br/><hr>Ewing Cemetery in Franklin County , IL<br/>","<strong>Anna Lorena Sinks<\/strong><br/><hr> Died: 5 Aug 1909<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>James Allen Veach<\/strong><br/><hr>Born: 1860 Died: 1890<br/><hr>Mt Olive Methodist Church Cemetery in Johnson County , IL<br/>","<strong>John Logan Veach<\/strong><br/><hr>Born: 1863 Died: 1950<br/><hr>Vienna Fraternal Cemetery in Vienna , IL<br/>","<strong>Rose Ella Veach<\/strong><br/><hr>Born: 1868 Died: 1948<br/><hr>Vienna Fraternal Cemetery in Vienna , IL<br/>","<strong>Lucinda Jane Whiteside<\/strong><br/><hr>Born: 21 Apr 1858 Died: 31 Jan 1936<br/><hr>Casey Springs Cemetery in Johnson County , IL<br/>","<strong>Millie Caroline Woolard<\/strong><br/><hr>Born: 13 Nov 1837 Died: 19 Apr 1932<br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>John Edward Woolard<\/strong><br/><hr>Born: 21 Jan 1872 Died: 19 Oct 1936                                                                           <br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>C Leonard Woolard<\/strong><br/><hr>Born: 2 Oct 1882 Died: 9 Dec 1953<br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>Albert A Anderson<\/strong><br/><hr>Born: 28 Nov 1809 Died: 5 Nov 1882<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>William G Anderson<\/strong><br/><hr>Born: 26 Feb 1836 Died: 31 Dec 1895<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Nancy A Anderson<\/strong><br/><hr>Born: 2 Sep 1836 Died: 18 Oct 1917<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>E C Beasley<\/strong><br/><hr>Born: 13 May 1826 <br/><hr>Orlinda Cemetery in Robertson County , TN<br/>","<strong>W M Bundy<\/strong><br/><hr> <br/><hr>Liberty Methodist Cemetery in Franklin County , IL<br/>","<strong>W J Burgess<\/strong><br/><hr>Born: 1844 Died: 17 Dec 1907<br/><hr>Shakerag Masonic Cemetery in Williamson County , IL<br/>","<strong>G M Clayton<\/strong><br/><hr>Born: 9 Apr 1846 Died: 9 Mar 1919<br/><hr>Williams Prairie Baptist Church Cemetery in Williamson County , IL<br/>","<strong>L S Clayton<\/strong><br/><hr> Died: 25 May 1909<br/><hr>Williams Prairie Baptist Church Cemetery in Williamson County , IL<br/>","<strong>Catherine S Dolch<\/strong><br/><hr>Born: 11 Feb 1793 Died: 14 Feb 1867<br/><hr>Greenlawn Cemetery in Portsmouth , OH<br/>","<strong>Maggie M Doley<\/strong><br/><hr>Born: 1868 Died: 1917<br/><hr>Greenlawn Cemetery in Portsmouth , OH<br/>","<strong>William F Doley<\/strong><br/><hr>Born: 20 Dec 1862 Died: 24 Nov 1934<br/><hr>Webber Campground Cemetery in Galatia , IL<br/>","<strong>W P Dorris<\/strong><br/><hr>Born: 2 June 1790 Died: 5 Nov 1873<br/><hr>Bethlehem Baptist Church Cemetery in Springfield , TN<br/>","<strong>A C Dorris<\/strong><br/><hr> Died: 7 Aug 1853<br/><hr>Bethlehem Baptist Church Cemetery in Springfield , TN<br/>","<strong>Robert T Dorris<\/strong><br/><hr>Born: 24 Mar 1818 Died: 22 Aug 1894<br/><hr>Ebenezer Baptist Church Cemetery in Greenbrier , TN<br/>","<strong>Smith H Dorris<\/strong><br/><hr> <br/><hr>Denning Cemetery in W Frankfort , IL<br/>","<strong>John W Dorris<\/strong><br/><hr> <br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>W E Dorris<\/strong><br/><hr>Born: 1857 Died: 1936<br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>William T Dorris<\/strong><br/><hr>Born: 1867 Died: 1942<br/><hr>Williams Prairie Baptist Church Cemetery in Williamson County , IL<br/>","<strong>James J Dorris<\/strong><br/><hr> Died: 24 Mar 1877<br/><hr>Williams Prairie Baptist Church Cemetery in Williamson County , IL<br/>","<strong>W R Dorris<\/strong><br/><hr>Born: 2 Jan 1835 Died: 16 Feb 1898<br/><hr>Williams Prairie Baptist Church Cemetery in Williamson County , IL<br/>","<strong>E L Dorris<\/strong><br/><hr>Born: 17 Dec 1853 Died: 7 May 1907<br/><hr>Williams Prairie Baptist Church Cemetery in Williamson County , IL<br/>","<strong>James W Dorris<\/strong><br/><hr>Born: 1861 Died: 1921<br/><hr>Williams Prairie Baptist Church Cemetery in Williamson County , IL<br/>","<strong>Fawn W Follis<\/strong><br/><hr>Born: 9 Feb 1907 Died: 17 Nov 1909<br/><hr>Follis Cemetery in Franklin County , IL<br/>","<strong>Ralph R Follis<\/strong><br/><hr>Born: 7 Apr 1901 Died: 27 Feb 1906<br/><hr>Follis Cemetery in Franklin County , IL<br/>","<strong>A O Follis<\/strong><br/><hr> Died: 17 Oct 1887<br/><hr>Follis Cemetery in Franklin County , IL<br/>","<strong>Christian R Follis<\/strong><br/><hr> Died: 21 Oct 1892<br/><hr>Follis Cemetery in Franklin County , IL<br/>","<strong>G W Follis<\/strong><br/><hr> Died: 20 Aug 1899<br/><hr>Follis Cemetery in Franklin County , IL<br/>","<strong>E P Follis<\/strong><br/><hr> Died: 15 Mar 1890<br/><hr>Follis Cemetery in Franklin County , IL<br/>","<strong>Jeff M Follis<\/strong><br/><hr>Born: 10 Sep 1873 Died: 25 July 1905<br/><hr>Follis Cemetery in Franklin County , IL<br/>","<strong>Florence W Ford<\/strong><br/><hr>Born: 3 Sep 1866 Died: 1 July 1940<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Leonard N Gregory<\/strong><br/><hr>Born: 15 Mar 1887 Died: 13 June 1963<br/><hr>Greenlawn Cemetery in Portsmouth , OH<br/>","<strong>Jerome B Hess<\/strong><br/><hr>Born: 1849 Died: 1931<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>Bernice L Hess<\/strong><br/><hr>Born: 20 Sep 1894 Died: 27 Sep 1978<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>James N Johnson<\/strong><br/><hr>Born: 25 Feb 1837 <br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Mary E Johnson<\/strong><br/><hr>Born: 5 Sep, 1844 Died: 12 Nov 1895<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Levi A Jones<\/strong><br/><hr>Born: 1828 Died: 1892<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>Hester J Jones<\/strong><br/><hr>Born: 1841 Died: 1910<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>Ridley A Jones<\/strong><br/><hr> Died: 2 Mar 1863<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>James T Jones<\/strong><br/><hr>Born: 1863 Died: 1933<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>Ezra L Jones<\/strong><br/><hr>Born: 15 Sep 1867 Died: 19 May 1942<br/><hr>Hudgens Cemetery in Williamson County , IL<br/>","<strong>Samuel D Jones<\/strong><br/><hr>Born: 11 Feb 1876 Died: 22 Nov 1915<br/><hr>Hudgens Cemetery in Williamson County , IL<br/>","<strong>Willard M Karnes<\/strong><br/><hr>Born: 1 Dec 1911 Died: 27 Oct 1990<br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>Myrtie V Miller<\/strong><br/><hr>Born: 18 July 1896 Died: 7 Dec 1991<br/><hr>Hudgens Cemetery in Williamson County , IL<br/>","<strong>John D Nagle<\/strong><br/><hr> Died: 23 Nov 1870<br/><hr>Greenlawn Cemetery in Portsmouth , OH<br/>","<strong>Will F Nagel<\/strong><br/><hr>Born: 1858 Died: 1916<br/><hr>Greenlawn Cemetery in Portsmouth , OH<br/>","<strong>G W Odom<\/strong><br/><hr>Born: 1854 Died: 1943<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>Karl F Pletz<\/strong><br/><hr>Born: 1914 Died: 1975<br/><hr> in Williamson County , IL<br/>","<strong>George W Rex<\/strong><br/><hr> Died: 8 Dec 1891<br/><hr>Spillertown Cemetery in Spillertown , IL<br/>","<strong>J M Ritter<\/strong><br/><hr> Died: 11 Nov 1917<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Mary J Ritter<\/strong><br/><hr> Died: 10 Mat 1903<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>A T Sinks<\/strong><br/><hr> <br/><hr>Nashville National Cemetery in Nashville , TN<br/>","<strong>Francis A Sinks<\/strong><br/><hr>Born: 20 Nov 1837 Died: 17 Jan 1909<br/><hr>Oddfellow Cemetery in West Frankfort , IL<br/>","<strong>Martha J Sinks<\/strong><br/><hr>Born: 1856 Died: 1924<br/><hr>Boner Cemetery in West Frankfort , IL<br/>","<strong>John H Sinks<\/strong><br/><hr> Died: 20 Nov 1893<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>Mary E Sinks<\/strong><br/><hr> Died: 23 Aug 1906<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>William D Sinks<\/strong><br/><hr> Died: 27 Sep 1953<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>Charlotte J Sinks<\/strong><br/><hr> Died: 31 Oct 1910<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>John A Sinks<\/strong><br/><hr> Died: 28 Jan 1918<br/><hr>Hudgens Cemetery in Williamson County , IL<br/>","<strong>Sena L Sinks<\/strong><br/><hr>Born: 18 Sep 1888 Died: 13 Dec 1972<br/><hr>Hudgens Cemetery in Williamson County , IL<br/>","<strong>William J Sinks<\/strong><br/><hr>Born: 11 Sep 1914 Died: 30 Sep 1986<br/><hr>Maplewood Cemetery in Marion , IL<br/>","<strong>Jewell S Sweet<\/strong><br/><hr>Born: 1912 Died: 1990<br/><hr>Maplewood Cemetery in Marion , IL<br/>","<strong>Arlie T Sinks<\/strong><br/><hr>Born: 27 July 1916 Died: 4 July 2009<br/><hr>Rose Hill Cemetery in Marion , IL<br/>","<strong>Eva E Sinks<\/strong><br/><hr>Born: 15 Jan 1914 Died: 8 Sep 1002<br/><hr>Rose Hill Cemetery in Marion , IL<br/>","<strong>Richard G Steen<\/strong><br/><hr> <br/><hr>Baldwin Cemetery in Daviess County , IN<br/>","<strong>Martin T VanCleve<\/strong><br/><hr>Born: 1860 Died: 1946<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>W F VanCleve<\/strong><br/><hr>Born: 1 Jan 1813 Died: 20 May 1886<br/><hr>Robinson Cemetery in Johnson County , IL<br/>","<strong>J E VanCleve<\/strong><br/><hr>Born: 20 Dec 1850 Died: 31 Oct 1872<br/><hr>Robinson Cemetery in Johnson County , IL<br/>","<strong>Pleasant G Veach<\/strong><br/><hr>Born: 19 Dec 1845 Died: 23 Jan 1917<br/><hr>Mt Olive Methodist Church Cemetery in Johnson County , IL<br/>","<strong>Ward B Veach<\/strong><br/><hr>Born: 1886 Died: 1916<br/><hr>Mt Olive Methodist Church Cemetery in Johnson County , IL<br/>","<strong>Cynthia M Veach<\/strong><br/><hr>Born: 1861 Died: 1921<br/><hr>Mt Olive Methodist Church Cemetery in Johnson County , IL<br/>","<strong>James C Veach<\/strong><br/><hr>Born: 1857 Died: 1939<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>Ruth E Veach<\/strong><br/><hr>Born: 1900 Died: 1901<br/><hr>Vienna Fraternal Cemetery in Vienna , IL<br/>","<strong>James C Weir<\/strong><br/><hr>Born: 1799 Died: 1879<br/><hr>Weir Cemetery in Lebanon , TN<br/>","<strong>Sallie J Wilson<\/strong><br/><hr>Born: 15 Oct 1807 Died: 4 Apr 1866<br/><hr>Bethlehem Baptist Church Cemetery in Springfield , TN<br/>","<strong>Lawrence A Woolard<\/strong><br/><hr>Born: 25 Dec 1877 Died: 12 May 1923<br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>James B Woolard<\/strong><br/><hr>Born: 30 June 1908 Died: 12 Oct 1966<br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>L B Woolard<\/strong><br/><hr>Born: 15 Sep 1811 Died: 9 May 1878<br/><hr>Ebenezer Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>James H Woolard<\/strong><br/><hr>Born: 12 Apr 1848 Died: 7 Sep 1888<br/><hr>Ebenezer Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Romey D Woolard<\/strong><br/><hr>Born: 23 May 1922 Died: 12 Sep 1944<br/><hr>Ebenezer Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Anna F Woolard<\/strong><br/><hr> Died: 30 Sep 1887<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Francis J Woolard<\/strong><br/><hr> Died: 20 Feb 1867<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Turner W Woolard<\/strong><br/><hr> Died: 20 Oct 1861<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>William C Woolard<\/strong><br/><hr>Born: 22 Aug 1857 Died: 2 Jan 1858<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Zady Anderson<\/strong><br/><hr>Born: 18 Apr 1812 Died: 12 Dec 1839<br/><hr>Pleasant Valley Baptist Church Cemetery in Saline County , IL<br/>","<strong>Adesia Anderson<\/strong><br/><hr>Born: 17 Mar 1808 Died: 26 Sep 1864<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Richard Appleton<\/strong><br/><hr>Born: 1 Aug 1817 Died: 6 Oct 1897<br/><hr>Baggett Cemetery in Robertson County , TN<br/>","<strong>William Baldwin<\/strong><br/><hr> <br/><hr>Baldwin Cemetery in Daviess County , IN<br/>","<strong>Mahalia Baggett<\/strong><br/><hr>Born: 3 June 1832 Died: 6 June 1897<br/><hr>Baggett Cemetery in Robertson County , TN<br/>","<strong>Joel Brown<\/strong><br/><hr>Born: 20 Dec 1803 <br/><hr> in Egypt, Lehigh County , PA<br/>","<strong>Clem Bundy<\/strong><br/><hr> <br/><hr>Liberty Methodist Cemetery in Franklin County , IL<br/>","<strong>Nancy Bundy<\/strong><br/><hr> <br/><hr>Liberty Methodist Cemetery in Franklin County , IL<br/>","<strong>Thomas Bundy<\/strong><br/><hr>Born: 4 Feb 1881 Died: 22 Apr 1892<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>George Bundy<\/strong><br/><hr>Born: 1864 Died: 1949<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Alzada Burgess<\/strong><br/><hr>Born: 1854 Died: 1931<br/><hr>Shakerag Masonic Cemetery in Williamson County , IL<br/>","<strong>Caroline Chapman<\/strong><br/><hr> Died: 24 Jan 1861<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>Samuel Chapman<\/strong><br/><hr>Born: 14 May 1794 Died: 15 Apr 1863<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>Polly Chapman<\/strong><br/><hr> <br/><hr>Baldwin Cemetery in Daviess County , IN<br/>","<strong>Mandy Crockett<\/strong><br/><hr>Born: 3 Sep 1844 Died: 5 Nov 1914<br/><hr>Bethlehem Baptist Church Cemetery in Robertson County , TN<br/>","<strong>John Crockett<\/strong><br/><hr>Born: 4 Oct 1844 Died: 25 July 1919<br/><hr>Bethlehem Baptist Church Cemetery in Robertson County , TN<br/>","<strong>Ezra Davis<\/strong><br/><hr>Born: 1887 Died: 1949<br/><hr> in Williamson County , IL<br/>","<strong>Lizzie Davis<\/strong><br/><hr>Born: 1886 Died: 1955<br/><hr> in Williamson County , IL<br/>","<strong>Christian Dolch<\/strong><br/><hr>Born: 24 Dec 1794 Died: 29 Aug 1874<br/><hr>Greenlawn Cemetery in Portsmouth , OH<br/>","<strong>Peter Dolch<\/strong><br/><hr> Died: 16 July 1862<br/><hr>Greenlawn Cemetery in Portsmouth , OH<br/>","<strong>Sarah Dorris<\/strong><br/><hr>Born: 2 June 1790 Died: 23 June 1862<br/><hr>Bethlehem Baptist Church Cemetery in Springfield , TN<br/>","<strong>Rebecca Dorris<\/strong><br/><hr>Born: 22 mar 1829 Died: 24 Apr 1910<br/><hr>Ebenezer Baptist Church Cemetery in Greenbrier , TN<br/>","<strong>Mary Drake<\/strong><br/><hr>Born: 1843 Died: 1909<br/><hr>Orlinda Cemetery in Robertson County , TN<br/>","<strong>Johannes Dreisbach<\/strong><br/><hr>Born: 21 Aug 1752 Died: 20 Sep 1825<br/><hr>Zion Stone Church Cemetery in Kreidersville , PA<br/>","<strong>Semantha Everett<\/strong><br/><hr> Died: Apr 1845<br/><hr>Baldwin Cemetery in Daviess County , IN<br/>","<strong>Isaac Finch<\/strong><br/><hr> Died: 26 Nov 1813<br/><hr>Blockhouse Cemetery in Peru, Clinton County , NY<br/>","<strong>Ebenezer Frost<\/strong><br/><hr> <br/><hr>Grapevine Cemetery in Madisonville  , Ky<br/>","<strong>William Fuqua<\/strong><br/><hr> <br/><hr>Oak Grove Cemetery in Robertson County , Tn<br/>","<strong>Lucille Gregory<\/strong><br/><hr>Born: 1899 Died: 1986<br/><hr>Greenlawn Cemetery in Portsmouth , OH<br/>","<strong>Parmelia Hart<\/strong><br/><hr>Born: 14 May 1847 Died: 17 Sep 1878<br/><hr>Follis Cemetery in Franklin County , IL<br/>","<strong>Amalphus Hess<\/strong><br/><hr> Died: 27 Mar 1872<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>Adolphus Hess<\/strong><br/><hr> Died: 23 June 1871<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>Samuel Hess<\/strong><br/><hr>Born: 23 Dec 1823 Died: 5 Mar 1901<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>Franklin Hess<\/strong><br/><hr>Born: 1857 Died: 1935<br/><hr>Vienna Fraternal Cemetery in Johnson County , IL<br/>","<strong>Daniel Horlacher<\/strong><br/><hr>Born: 4 Aug 1735 Died: 24 Sep 1804<br/><hr>St Paul's Lutheran \"Blue\" Church Cemetery in Coopersburg , PA<br/>","<strong>Margaretha Horlacher<\/strong><br/><hr>Born: 4 Jan 1741 Died: 22 Apr 1806<br/><hr>St Paul's Lutheran \"Blue\" Church Cemetery in Coopersburg , PA<br/>","<strong>Polly Horrall<\/strong><br/><hr> <br/><hr>Trinity Methodist Church Cemetery in West Frankfort , IL<br/>","<strong>William Horrall<\/strong><br/><hr> <br/><hr>Old Bethel Cemetery in Daviess , IN<br/>","<strong>Elizabeth Hurt<\/strong><br/><hr> <br/><hr>Bethlehem Baptist Church Cemetery in Springfield , TN<br/>","<strong>Jeremiah Jacobs<\/strong><br/><hr> Died: 30 Dec 1824<br/><hr>New Chapel Methodist Church Cemetery in Watson , IN<br/>","<strong>Rebecca Jacobs<\/strong><br/><hr> Died: 18 July 1813<br/><hr>New Chapel Methodist Church Cemetery in Watson , IN<br/>","<strong>John Jones<\/strong><br/><hr> <br/><hr>Harmony Free Will Baptist Church Cemetery in Williamson County , IL<br/>","<strong>Joe Lipsey<\/strong><br/><hr>Born: 1888 Died: 1928<br/><hr> in Centralia , IL<br/>","<strong>Jon Loomis<\/strong><br/><hr> <br/><hr>Green Cemetery in Makanda , IL<br/>","<strong>Azariah Merrell<\/strong><br/><hr>Born: 20 May 1777 Died: 25 Jan 1844<br/><hr>Jersey Baptis Church Cemetery in Lexington , NC<br/>","<strong>Abigail Merrell<\/strong><br/><hr>Born: 1781 Died: 11 June 1844<br/><hr>Jersey Baptis Church Cemetery in Lexington , NC<br/>","<strong>Nicolaus Mildenberger<\/strong><br/><hr>Born: 15 Oct 1781 Died:  19 Oct 1856<br/><hr>Zion Stone Church Cemetery in Kreidersville , PA<br/>","<strong>Catherina Mory<\/strong><br/><hr>Born: 8 May 1758 Died: 25 Aug 1837<br/><hr>Friedensville Evangelican Lutheran Church Cemetery in Friedensville , PA<br/>","<strong>Gotthard Mory<\/strong><br/><hr>Born: 20 Mar 1752 Died: 26 May 1843<br/><hr>Friedensville Evangelican Lutheran Church Cemetery in Friedensville , PA<br/>","<strong>Magdelena Mory<\/strong><br/><hr>Born: 17 Sep 1759 Died: 26 Nov 1827<br/><hr>Friedensville Evangelican Lutheran Church Cemetery in Friedensville , PA<br/>","<strong>Peter Mory<\/strong><br/><hr>Born: 3 May 1757 Died: [grass blocks date]<br/><hr>Friedensville Evangelican Lutheran Church Cemetery in Friedensville , PA<br/>","<strong>Caty Nagel<\/strong><br/><hr> Died: 4 May 1817<br/><hr>Hanover Green Cemetery in Wilkes-Barre , PA<br/>","<strong>Daniel Nagel<\/strong><br/><hr> Died:   7 May 1866<br/><hr>Christ Church Cemetery in Schoenersville , PA<br/>","<strong>Beatrice Nutty<\/strong><br/><hr>Born: 1909 Died: 1989<br/><hr>Vienna Fraternal Cemetery in Vienna , IL<br/>","<strong>Archibald Odom<\/strong><br/><hr>Born: 20 Feb 1838 Died: 20 May 1915<br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>Sarah Odom<\/strong><br/><hr>Born: 14 June 1854 Died: 24 Oct 1910<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>Wiley Odum<\/strong><br/><hr>Born: 21 May 1879 Died: 2 Mar 1937<br/><hr>Union Grove Cemetery in Williamson County , IL<br/>","<strong>Daniel Peters<\/strong><br/><hr> Died: 20 Aug 1808<br/><hr>White Ash Cemetery in Williamson County , IL<br/>","<strong>Charlotte Peters<\/strong><br/><hr> Died: 20 June 1880<br/><hr>White Ash Cemetery in Williamson County , IL<br/>","<strong>Bertie Rex<\/strong><br/><hr> Died: 5 Nov 1887<br/><hr>Spillertown Cemetery in Spillertown , IL<br/>","<strong>Lulie Rex<\/strong><br/><hr>Born: 10 Oct 1877 Died:   2 Oct 1878<br/><hr>Spillertown Cemetery in Spillertown , IL<br/>","<strong>Lily Rex<\/strong><br/><hr>Born: 21 Sep 1871 Died: 11 Oct 1872<br/><hr>Spillertown Cemetery in Spillertown , IL<br/>","<strong>Arthur Rex<\/strong><br/><hr>Born: 11 Aug 1870 Died: 25 Aug 1870<br/><hr>Spillertown Cemetery in Spillertown , IL<br/>","<strong>Guy Rex<\/strong><br/><hr>Born: 28 May 1889 Died: 14 Oct 1983<br/><hr>Rose Hill Cemetery in Marion , IL<br/>","<strong>Harlie Rex<\/strong><br/><hr>Born: 9 Sep 1890 Died: 10 May 1979<br/><hr>Rose Hill Cemetery in Marion , IL<br/>","<strong>Solomon Riegel<\/strong><br/><hr> Died: 18 May 1827<br/><hr>Webber Campground Cemetery in Saline County , IL<br/>","<strong>Catherine Riegel<\/strong><br/><hr> Died: 27 Dec 1882<br/><hr>Webber Campground Cemetery in Saline County , IL<br/>","<strong>Elisabetha Rockel<\/strong><br/><hr>Born: 24 June 1719 Died: 16 Oct 1794<br/><hr>Christ Church Cemetery in Schoenersville , PA<br/>","<strong>Johannes Rockel<\/strong><br/><hr>Born: 23 Mar 1749 Died: 4 Jan 1838<br/><hr>Christ Church Cemetery in Schoenersville , PA<br/>","<strong>Elizabeth Rockel<\/strong><br/><hr>Born: 7 Oct 1764 Died: 1 Mar 1835<br/><hr>Christ Church Cemetery in Schoenersville , PA<br/>","<strong>Euna Ross<\/strong><br/><hr>Born: 2 July 1885 Died: 19 Mar 1938<br/><hr>Masonic & Odd Fellows Cemetery in Benton , IL<br/>","<strong>Salem Sinks<\/strong><br/><hr> Died: 26 Oct 1869<br/><hr>Trinity Methodist Church Cemetery in West Frankfort , IL<br/>","<strong>Daniel Sinks<\/strong><br/><hr>Born: 1841 Died: 1923<br/><hr>Boner Cemetery in West Frankfort , IL<br/>","<strong>Elizabeth Sinks<\/strong><br/><hr>Born: 10 Mar 1835 Died: 10 Aug 1911<br/><hr>Lake Creek Cemetery in Williamson County , IL<br/>","<strong>Etta Faye Sinks<\/strong><br/><hr>Born: 31 Mar 1910 Died: 19 Mar 1989<br/><hr>Hudgens Cemetery in Williamson County , IL<br/>","<strong>Arlie Sinks<\/strong><br/><hr>Born: 1883 Died: 1951<br/><hr>Maplewood Cemetery in Marion , IL<br/>","<strong>Viola Sinks<\/strong><br/><hr>Born: 1882 Died: 1966<br/><hr>Maplewood Cemetery in Marion , IL<br/>","<strong>Mae Sinks<\/strong><br/><hr> <br/><hr> in Centralia , IL<br/>","<strong>Caroline Sinks<\/strong><br/><hr> Died: 17 Apr 1876<br/><hr>Miller Cemetery in Franklin County , IL<br/>","<strong>John Veatch<\/strong><br/><hr>Born: 11 Nov 1776 Died: 17 Sep 1844<br/><hr>Casey Springs Cemetery in Vienna , IL<br/>","<strong>Pleasant Veach<\/strong><br/><hr>Born: 1 Oct 1837 Died: 18 Jan 1895<br/><hr>Mt Olive Methodist Church Cemetery in Johnson County , IL<br/>","<strong>Mary Veatch<\/strong><br/><hr>Born: 5 Feb 1842 <br/><hr>Chapman-Veatch Cemetery in Johnson County , IL<br/>","<strong>Frelin Veatch<\/strong><br/><hr>Born: 21 Mar 1825 Died: 18 Jan 1848<br/><hr>Chapman-Veatch Cemetery in Johnson County , IL<br/>","<strong>Turner Ware<\/strong><br/><hr>Born: 14 Feb 1817 Died: 5 Feb 1902<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Martha Ware<\/strong><br/><hr> Died: 23 Mar 1881<br/><hr>Lebanon Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Joseph Wilson<\/strong><br/><hr>Born: 26 Feb 1825 Died: Jan 1862<br/><hr>Baggett Cemetery in Robertson County , TN<br/>","<strong>Thomas Wilson<\/strong><br/><hr> Died: 1922<br/><hr>Hartwell Cemetery in Williamson , IL<br/>","<strong>Luvena Wise<\/strong><br/><hr> <br/><hr>Masonic Cemetery in Raleigh , IL<br/>","<strong>Nettie Woolard<\/strong><br/><hr>Born: 8 Sep 1874 Died: 28 Nov 1910<br/><hr>Oddfellow Cemetery in West Frankfort , IL<br/>","<strong>Ama Woolard<\/strong><br/><hr>Born: 23 May 1819 Died: 5 Dec 1891<br/><hr>Ebenezer Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>Robert Woolard<\/strong><br/><hr>Born: 1863 Died: 1938<br/><hr>Ebenezer Cumberland Presbyterian Church Cemetery in Saline County , IL<br/>","<strong>George Woolard<\/strong><br/><hr>Born: 28 Mar 1867 Died: 5 Jan 1935<br/><hr>Harmony Free Will Baptist Church Cemetery in Williamson County , IL<br/>"],null,["<strong> E Francis Anderson <\/strong>","<strong> Elizabeth Minnich Brown <\/strong>","<strong> L Earl Doley <\/strong>","<strong> G Clyde Doley <\/strong>","<strong> Samuel Jackson Chapman Hess <\/strong>","<strong> Catherine West Hess <\/strong>","<strong> George Dougin Hess <\/strong>","<strong> Anna Maria Kleppinger <\/strong>","<strong> Johann Georg Nagel <\/strong>","<strong> Cynthia Ann Odom <\/strong>","<strong> William Epps Pickard <\/strong>","<strong> Anna Lorena Sinks <\/strong>","<strong> James Allen Veach <\/strong>","<strong> John Logan Veach <\/strong>","<strong> Rose Ella Veach <\/strong>","<strong> Lucinda Jane Whiteside <\/strong>","<strong> Millie Caroline Woolard <\/strong>","<strong> John Edward Woolard <\/strong>","<strong> C Leonard Woolard <\/strong>","<strong> Albert A Anderson <\/strong>","<strong> William G Anderson <\/strong>","<strong> Nancy A Anderson <\/strong>","<strong> E C Beasley <\/strong>","<strong> W M Bundy <\/strong>","<strong> W J Burgess <\/strong>","<strong> G M Clayton <\/strong>","<strong> L S Clayton <\/strong>","<strong> Catherine S Dolch <\/strong>","<strong> Maggie M Doley <\/strong>","<strong> William F Doley <\/strong>","<strong> W P Dorris <\/strong>","<strong> A C Dorris <\/strong>","<strong> Robert T Dorris <\/strong>","<strong> Smith H Dorris <\/strong>","<strong> John W Dorris <\/strong>","<strong> W E Dorris <\/strong>","<strong> William T Dorris <\/strong>","<strong> James J Dorris <\/strong>","<strong> W R Dorris <\/strong>","<strong> E L Dorris <\/strong>","<strong> James W Dorris <\/strong>","<strong> Fawn W Follis <\/strong>","<strong> Ralph R Follis <\/strong>","<strong> A O Follis <\/strong>","<strong> Christian R Follis <\/strong>","<strong> G W Follis <\/strong>","<strong> E P Follis <\/strong>","<strong> Jeff M Follis <\/strong>","<strong> Florence W Ford <\/strong>","<strong> Leonard N Gregory <\/strong>","<strong> Jerome B Hess <\/strong>","<strong> Bernice L Hess <\/strong>","<strong> James N Johnson <\/strong>","<strong> Mary E Johnson <\/strong>","<strong> Levi A Jones <\/strong>","<strong> Hester J Jones <\/strong>","<strong> Ridley A Jones <\/strong>","<strong> James T Jones <\/strong>","<strong> Ezra L Jones <\/strong>","<strong> Samuel D Jones <\/strong>","<strong> Willard M Karnes <\/strong>","<strong> Myrtie V Miller <\/strong>","<strong> John D Nagle <\/strong>","<strong> Will F Nagel <\/strong>","<strong> G W Odom <\/strong>","<strong> Karl F Pletz <\/strong>","<strong> George W Rex <\/strong>","<strong> J M Ritter <\/strong>","<strong> Mary J Ritter <\/strong>","<strong> A T Sinks <\/strong>","<strong> Francis A Sinks <\/strong>","<strong> Martha J Sinks <\/strong>","<strong> John H Sinks <\/strong>","<strong> Mary E Sinks <\/strong>","<strong> William D Sinks <\/strong>","<strong> Charlotte J Sinks <\/strong>","<strong> John A Sinks <\/strong>","<strong> Sena L Sinks <\/strong>","<strong> William J Sinks <\/strong>","<strong> Jewell S Sweet <\/strong>","<strong> Arlie T Sinks <\/strong>","<strong> Eva E Sinks <\/strong>","<strong> Richard G Steen <\/strong>","<strong> Martin T VanCleve <\/strong>","<strong> W F VanCleve <\/strong>","<strong> J E VanCleve <\/strong>","<strong> Pleasant G Veach <\/strong>","<strong> Ward B Veach <\/strong>","<strong> Cynthia M Veach <\/strong>","<strong> James C Veach <\/strong>","<strong> Ruth E Veach <\/strong>","<strong> James C Weir <\/strong>","<strong> Sallie J Wilson <\/strong>","<strong> Lawrence A Woolard <\/strong>","<strong> James B Woolard <\/strong>","<strong> L B Woolard <\/strong>","<strong> James H Woolard <\/strong>","<strong> Romey D Woolard <\/strong>","<strong> Anna F Woolard <\/strong>","<strong> Francis J Woolard <\/strong>","<strong> Turner W Woolard <\/strong>","<strong> William C Woolard <\/strong>","<strong> Zady Anderson <\/strong>","<strong> Adesia Anderson <\/strong>","<strong> Richard Appleton <\/strong>","<strong> William Baldwin <\/strong>","<strong> Mahalia Baggett <\/strong>","<strong> Joel Brown <\/strong>","<strong> Clem Bundy <\/strong>","<strong> Nancy Bundy <\/strong>","<strong> Thomas Bundy <\/strong>","<strong> George Bundy <\/strong>","<strong> Alzada Burgess <\/strong>","<strong> Caroline Chapman <\/strong>","<strong> Samuel Chapman <\/strong>","<strong> Polly Chapman <\/strong>","<strong> Mandy Crockett <\/strong>","<strong> John Crockett <\/strong>","<strong> Ezra Davis <\/strong>","<strong> Lizzie Davis <\/strong>","<strong> Christian Dolch <\/strong>","<strong> Peter Dolch <\/strong>","<strong> Sarah Dorris <\/strong>","<strong> Rebecca Dorris <\/strong>","<strong> Mary Drake <\/strong>","<strong> Johannes Dreisbach <\/strong>","<strong> Semantha Everett <\/strong>","<strong> Isaac Finch <\/strong>","<strong> Ebenezer Frost <\/strong>","<strong> William Fuqua <\/strong>","<strong> Lucille Gregory <\/strong>","<strong> Parmelia Hart <\/strong>","<strong> Amalphus Hess <\/strong>","<strong> Adolphus Hess <\/strong>","<strong> Samuel Hess <\/strong>","<strong> Franklin Hess <\/strong>","<strong> Daniel Horlacher <\/strong>","<strong> Margaretha Horlacher <\/strong>","<strong> Polly Horrall <\/strong>","<strong> William Horrall <\/strong>","<strong> Elizabeth Hurt <\/strong>","<strong> Jeremiah Jacobs <\/strong>","<strong> Rebecca Jacobs <\/strong>","<strong> John Jones <\/strong>","<strong> Joe Lipsey <\/strong>","<strong> Jon Loomis <\/strong>","<strong> Azariah Merrell <\/strong>","<strong> Abigail Merrell <\/strong>","<strong> Nicolaus Mildenberger <\/strong>","<strong> Catherina Mory <\/strong>","<strong> Gotthard Mory <\/strong>","<strong> Magdelena Mory <\/strong>","<strong> Peter Mory <\/strong>","<strong> Caty Nagel <\/strong>","<strong> Daniel Nagel <\/strong>","<strong> Beatrice Nutty <\/strong>","<strong> Archibald Odom <\/strong>","<strong> Sarah Odom <\/strong>","<strong> Wiley Odum <\/strong>","<strong> Daniel Peters <\/strong>","<strong> Charlotte Peters <\/strong>","<strong> Bertie Rex <\/strong>","<strong> Lulie Rex <\/strong>","<strong> Lily Rex <\/strong>","<strong> Arthur Rex <\/strong>","<strong> Guy Rex <\/strong>","<strong> Harlie Rex <\/strong>","<strong> Solomon Riegel <\/strong>","<strong> Catherine Riegel <\/strong>","<strong> Elisabetha Rockel <\/strong>","<strong> Johannes Rockel <\/strong>","<strong> Elizabeth Rockel <\/strong>","<strong> Euna Ross <\/strong>","<strong> Salem Sinks <\/strong>","<strong> Daniel Sinks <\/strong>","<strong> Elizabeth Sinks <\/strong>","<strong> Etta Faye Sinks <\/strong>","<strong> Arlie Sinks <\/strong>","<strong> Viola Sinks <\/strong>","<strong> Mae Sinks <\/strong>","<strong> Caroline Sinks <\/strong>","<strong> John Veatch <\/strong>","<strong> Pleasant Veach <\/strong>","<strong> Mary Veatch <\/strong>","<strong> Frelin Veatch <\/strong>","<strong> Turner Ware <\/strong>","<strong> Martha Ware <\/strong>","<strong> Joseph Wilson <\/strong>","<strong> Thomas Wilson <\/strong>","<strong> Luvena Wise <\/strong>","<strong> Nettie Woolard <\/strong>","<strong> Ama Woolard <\/strong>","<strong> Robert Woolard <\/strong>","<strong> George Woolard <\/strong>"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"imagePopup","args":[["Anderson E Francis.JPG","Brown Elizabeth Minnich.jpg","Doley L Earl.JPG","Doley G Clyde and D Hilda.JPG","Hess Samuel Jackson Chapman.JPG","Hess Catherine West.JPG","Hess George Dougin.JPG","Kleppinger Anna Maria_panel.png","Nagel Johann Georg_panel.png","Odom Cynthia Ann.JPG","Pickard William Epps.JPG","Sinks Anna Lorena.JPG","Veach James Allen.JPG","Veach John Logan.JPG","Veach Rose Ella.JPG","Whiteside Lucinda Jane and John V.jpg","Woolard Millie Caroline.JPG","Woolard John Edward.JPG","Woolard C Leonard and Blanche B.JPG","Anderson Albert A.JPG","Anderson William G.JPG","Anderson Nancy A.JPG","Beasley EC_panel.png","Bundy WM chalk.jpg","Burgess WJ.JPG","Clayton GM Ellen P.JPG","Clayton LS Mary A.JPG","Dolch Catherine S_panel.png","Doley Maggie M.JPG","Doley William F.JPG","Dorris WP_panel.png","Dorris AC_panel.png","Dorris Robert T Chalk.JPG","Dorris Smith H.jpg","Dorris John W_panel.png","Dorris WE.JPG","Dorris William T Mary C.JPG","Dorris James J.JPG","Dorris WR.JPG","Dorris EL and Sarah E.JPG","Dorris James W and Georgia A.JPG","Follis Fawn W_panel.png","Follis Ralph R chalk.JPG","Follis A O_panel.png","Follis Christian R chalk.JPG","Follis G W_panel.png","Follis E P challk.JPG","Follis Jeff M_panel.png","Ford Florence W.JPG","Gregory Leonard N.JPG","Hess Jerome B.JPG","Hess Bernice L.JPG","Johnson James N.JPG","Johnson Mary E.JPG","Jones Levi A Jones Hester J.JPG","Jones Levi A Jones Hester J.JPG","Jones Ridley A.JPG","Jones James T  Tina.JPG","Jones Ezra L  Nannie C.JPG","Jones Samuel D Melverda.JPG","Karnes Willard M_panel.png","Miller Myrtie V.JPG","Nagle John D distance.JPG","Nagel Will F Adeline L.JPG","Odom GW.JPG","Pletz Karl F.JPG","Rex George W_panel.png","Ritter J M_panel.png","Ritter Mary J_panel.png","Sinks A T_panel.png","Sinks Francis A_panel.png","Sinks Martha J.JPG","Sinks John H.JPG","Sinks Mary E.JPG","Sinks William D_panel.png","Sinks Charlotte J.JPG","Sinks John A.JPG","Sinks Sena L.JPG","Sinks William J_panel.png","Sweet Jewell S.JPG","Sinks Arlie T.JPG","Sinks Eva E  Arlie T.JPG","Steen Richard G.JPG","VanCleve Martin T Florence A.jpg","VanCleve WF.JPG","VanCleve JE.JPG","Veach Pleasant G Victoria.JPG","Veach Ward B.JPG","Veach Cynthia M.JPG","Veach James C Nannie.JPG","Veach Ruth E.JPG","Weir James C Mary Bell No challk.JPG","Wilson Sallie J_panel.png","Woolard Lawrence A and Etta G.JPG","Woolard James B.JPG","Woolard LB.JPG","Woolard James H.JPG","Woolard Romey D.JPG","Woolard Anna F.JPG","Woolard Francis J.JPG","Woolard Turner W.JPG","Woolard William C.JPG","Anderson Zady_panel.png","Anderson Adesia.JPG","Appleton Richard_panel.png","Baldwin William_panel.png","Baggett Mahalia_panel.png","Brown Joel_panel.png","Bundy Clem_panel.png","Bundy Nancy chalk.jpg","Bundy Thomas.JPG","Bundy George and Lora L.JPG","Burgess Alzada_panel.png","Chapman Caroline_panel.png","Chapman Samuel_panel.png","Chapman Polly_panel.png","Crockett Mandy_panel.png","Crockett John_panel.png","Davis Ezra N.JPG","Davis Lizzie.JPG","Dolch Christian_panel.png","Dolch Peter.JPG","Dorris Sarah_panel.png","Dorris Rebecca_panel.png","Drake Mary.jpg","Dreisbach Johannes.JPG","Everett Semantha_panel.png","Finch Isaac_panel.png","Frost Ebenezer_panel.png","Fuqua William_panel.png","Gregory Lucille Doley.JPG","Hart Parmelia_panel.png","Hess Amalphus_panel.png","Hess Adolphus_panel.png","Hess Samuel_panel.png","Hess Franklin.JPG","Horlacher Daniel_panel.png","Horlacher Margaretha_panel.png","Horrall Polly wf J.JPG","Horrall William_panel.png","Hurt Elizabeth chalk.jpg","Jacobs Jeremiah_panel.png","Jacobs Rebecca.JPG","Jones John.JPG","Lipsey Joe F.JPG","Loomis Jon_panel.png","Merrell Azariah_panel.png","Merrell Abigail_panel.png","Mildenberger Nicolaus.JPG","Mory Catherina..JPG","Mory Gotthard.JPG","Mory Magdelena_panel.png","Mory Peter.JPG","Nagel Caty_panel.png","Nagel Daniel.jpg","Nutty Beatrice.JPG","Odom Archibald_panel.png","Odom Sarah M.JPG","Odum Wiley Sallie A.jpg","Peters Daniel_panel.png","Peters Charlotte_panel.png","Rex Bertie.JPG","Rex Lulie.JPG","Rex Lily.JPG","Rex Arthur.JPG","Rex Guy.JPG","Rex Harlie G.JPG","Riegel Solomon_panel.png","Riegel Catherine_panel.png","Rockel Elisabetha Lehrer no chalk.JPG","Rockel Johannes_panel.png","Rockel Elizabeth_panel.png","Ross Euna.jpg","Sinks Salem_panel.png","Sinks Daniel.JPG","Sinks Elizabeth.JPG","Sinks Etta Faye.JPG","Sinks Arlie.JPG","Sinks Viola.JPG","Sinks Mae.JPG","Sinks Caroline_panel.png","Veatch John_panel.png","Veach Pleasant_panel.png","Veatch Mary_panel.png","Veatch Frelin_panel.png","Ware Turner chalk.JPG","Ware Martha A.JPG","Wilson Joseph_panel.png","Wilson Thomas Sarah.jpg","Wise Luvena Woolard.jpg","Woolard Nettie.JPG","Woolard Ama_panel.png","Woolard Robert.JPG","Woolard George H and Nancy V Woolard.JPG"],"group1",[400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400],[533.3333333333333,300,300,300,300,300,300,266.6666666666666,177.7777777777778,533.3333333333333,300,533.3333333333333,300,300,300,590.493435943866,300,300,300,533.3333333333333,533.3333333333333,533.3333333333333,266.6666666666666,533.3333333333333,300,300,533.3333333333333,266.6666666666666,300,300,266.6666666666666,266.6666666666666,533.3333333333333,576.6871165644171,309.9893730074389,349.2170022371365,300,533.3333333333333,533.3333333333333,533.3333333333333,300,150,300,100,300,150,300,150,300,300,300,300,533.3333333333333,533.3333333333333,300,300,533.3333333333333,300,300,300,150,300,533.3333333333333,300,300,300,266.6666666666666,173.505853357979,192.8767123287671,266.6666666666666,150,300,533.3333333333333,300,150,300,300,300,150,300,300,300,533.3333333333333,300,533.3333333333333,533.3333333333333,300,300,300,300,300,533.3333333333333,266.6666666666666,300,300,533.3333333333333,533.3333333333333,300,533.3333333333333,533.3333333333333,533.3333333333333,533.3333333333333,228.5714285714286,533.3333333333333,266.6666666666666,266.6666666666666,266.6666666666666,150,266.6666666666666,533.3333333333333,533.3333333333333,300,150,228.5714285714286,228.5714285714286,266.6666666666666,266.6666666666666,266.6666666666666,300,300,266.6666666666666,533.3333333333333,100,266.6666666666666,543.5587457499056,533.3333333333333,266.6666666666666,160,75,150,300,100,150,100,150,300,266.6666666666666,177.7777777777778,300,228.5714285714286,533.3333333333333,228.5714285714286,533.3333333333333,533.3333333333333,300,150,266.6666666666666,266.6666666666666,533.3333333333333,533.3333333333333,533.3333333333333,266.6666666666666,533.3333333333333,266.6666666666666,533.3333333333333,300,231.6926008256589,533.3333333333333,300,150,150,533.3333333333333,533.3333333333333,533.3333333333333,533.3333333333333,300,300,100,150,533.3333333333333,133.3333333333333,96.66180382734059,262.0272314674735,266.6666666666666,300,300,300,300,300,300,150,266.6666666666666,583.1081081081081,177.7777777777778,266.6666666666666,533.3333333333333,533.3333333333333,266.6666666666666,494.4172380019588,647.0532767562471,533.3333333333333,228.5714285714286,300,300],["l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l","l"],["Anderson E Francis","Brown Elizabeth Minnich","Doley L Earl","Doley G Clyde and D Hilda","Hess Samuel Jackson Chapman","Hess Catherine West","Hess George Dougin","Kleppinger Anna Maria_panel","Nagel Johann Georg_panel","Odom Cynthia Ann","Pickard William Epps","Sinks Anna Lorena","Veach James Allen","Veach John Logan","Veach Rose Ella","Whiteside Lucinda Jane and John V","Woolard Millie Caroline","Woolard John Edward","Woolard C Leonard and Blanche B","Anderson Albert A","Anderson William G","Anderson Nancy A","Beasley EC_panel","Bundy WM chalk","Burgess WJ","Clayton GM Ellen P","Clayton LS Mary A","Dolch Catherine S_panel","Doley Maggie M","Doley William F","Dorris WP_panel","Dorris AC_panel","Dorris Robert T Chalk","Dorris Smith H","Dorris John W_panel","Dorris WE","Dorris William T Mary C","Dorris James J","Dorris WR","Dorris EL and Sarah E","Dorris James W and Georgia A","Follis Fawn W_panel","Follis Ralph R chalk","Follis A O_panel","Follis Christian R chalk","Follis G W_panel","Follis E P challk","Follis Jeff M_panel","Ford Florence W","Gregory Leonard N","Hess Jerome B","Hess Bernice L","Johnson James N","Johnson Mary E","Jones Levi A Jones Hester J","Jones Levi A Jones Hester J","Jones Ridley A","Jones James T  Tina","Jones Ezra L  Nannie C","Jones Samuel D Melverda","Karnes Willard M_panel","Miller Myrtie V","Nagle John D distance","Nagel Will F Adeline L","Odom GW","Pletz Karl F","Rex George W_panel","Ritter J M_panel","Ritter Mary J_panel","Sinks A T_panel","Sinks Francis A_panel","Sinks Martha J","Sinks John H","Sinks Mary E","Sinks William D_panel","Sinks Charlotte J","Sinks John A","Sinks Sena L","Sinks William J_panel","Sweet Jewell S","Sinks Arlie T","Sinks Eva E  Arlie T","Steen Richard G","VanCleve Martin T Florence A","VanCleve WF","VanCleve JE","Veach Pleasant G Victoria","Veach Ward B","Veach Cynthia M","Veach James C Nannie","Veach Ruth E","Weir James C Mary Bell No challk","Wilson Sallie J_panel","Woolard Lawrence A and Etta G","Woolard James B","Woolard LB","Woolard James H","Woolard Romey D","Woolard Anna F","Woolard Francis J","Woolard Turner W","Woolard William C","Anderson Zady_panel","Anderson Adesia","Appleton Richard_panel","Baldwin William_panel","Baggett Mahalia_panel","Brown Joel_panel","Bundy Clem_panel","Bundy Nancy chalk","Bundy Thomas","Bundy George and Lora L","Burgess Alzada_panel","Chapman Caroline_panel","Chapman Samuel_panel","Chapman Polly_panel","Crockett Mandy_panel","Crockett John_panel","Davis Ezra N","Davis Lizzie","Dolch Christian_panel","Dolch Peter","Dorris Sarah_panel","Dorris Rebecca_panel","Drake Mary","Dreisbach Johannes","Everett Semantha_panel","Finch Isaac_panel","Frost Ebenezer_panel","Fuqua William_panel","Gregory Lucille Doley","Hart Parmelia_panel","Hess Amalphus_panel","Hess Adolphus_panel","Hess Samuel_panel","Hess Franklin","Horlacher Daniel_panel","Horlacher Margaretha_panel","Horrall Polly wf J","Horrall William_panel","Hurt Elizabeth chalk","Jacobs Jeremiah_panel","Jacobs Rebecca","Jones John","Lipsey Joe F","Loomis Jon_panel","Merrell Azariah_panel","Merrell Abigail_panel","Mildenberger Nicolaus","Mory Catherina..JPG","Mory Gotthard","Mory Magdelena_panel","Mory Peter","Nagel Caty_panel","Nagel Daniel","Nutty Beatrice","Odom Archibald_panel","Odom Sarah M","Odum Wiley Sallie A","Peters Daniel_panel","Peters Charlotte_panel","Rex Bertie","Rex Lulie","Rex Lily","Rex Arthur","Rex Guy","Rex Harlie G","Riegel Solomon_panel","Riegel Catherine_panel","Rockel Elisabetha Lehrer no chalk","Rockel Johannes_panel","Rockel Elizabeth_panel","Ross Euna","Sinks Salem_panel","Sinks Daniel","Sinks Elizabeth","Sinks Etta Faye","Sinks Arlie","Sinks Viola","Sinks Mae","Sinks Caroline_panel","Veatch John_panel","Veach Pleasant_panel","Veatch Mary_panel","Veatch Frelin_panel","Ware Turner chalk","Ware Martha A","Wilson Joseph_panel","Wilson Thomas Sarah","Wise Luvena Woolard","Woolard Nettie","Woolard Ama_panel","Woolard Robert","Woolard George H and Nancy V Woolard"],false,{"maxWidth":400,"src":["function (expr, envir = new.env()) ","eval.parent(substitute(eval(quote(expr), envir)))"],"maxHeight":300}]}],"limits":{"lat":[35.97833333333333,44.75056],"lng":[-89.27749999999999,-73.48583000000001]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The map can be saved with <code>saveWidget()</code> from <a href="https://cran.r-project.org/web/packages/htmlwidgets/htmlwidgets.pdf">htmlwidgets</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># fancy interactive map to upload</span></span>
<span id="cb34-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">saveWidget</span>(final_map, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">file =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"map_to_upload.html"</span>)</span></code></pre></div>
</div>
</section>
</section>
<section id="publishing-this-on-wordpress" class="level1">
<h1>Publishing this on WordPress</h1>
<p>Now, I actually created this for a website for my father. I created that in WordPress. I am a complete novice when it comes to WordPress.</p>
<p>To embed this html object in a WordPress site, you need to put it in an iframe. I found the tutorials <a href="https://wpastra.com/guides-and-tutorials/embed-iframe-in-wordpress/">here</a> and <a href="https://www.thinkingondata.com/embedding-a-leaflet-map-on-wordpress/">here</a> helpful.</p>
<p>The map with embedded photos ended up being larger than the default upload limit on the WordPress site, so I had to upload it with the ftp client and then register it into the media gallery. I used the <a href="https://wordpress.com/plugins/add-from-server">Add From Server widget</a> to do so. There are other options outlined in <a href="https://jetpack.com/blog/how-to-bulk-upload-files-to-wordpress-via-ftp/">this article</a>.</p>
</section>
<section id="conclusions" class="level1">
<h1>Conclusions</h1>
<p>The final map is published <a href="http://sinksfamilyhistory.com/tombstones/">here</a>. The blog portion of the website is a work in progress, and it is very messy at the time of publishing this blog post.</p>
<p>The map is sometimes slow to load at the WordPress site, though it seems okay here on this blog. I might be able to speed it up by reducing the size of the photos. I think hosting the photos separately and just using a hyperlink to access them would also be fast, but so many of the maps I looked at that used this technique had broken pic icons due to bad hyperlinks. It seemed a more robust strategy to embed the pics within the map.</p>
<p>I had originally wanted to have the map be searchable by name, which I thought I could do with the <code>leaflet.extras</code> package. Given the status of the package as archived/ abandoned, I decided not to include searching at this time.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sinks2023,
  author = {Sinks, Louise E.},
  title = {Mapping for the {Tombstone} {Project}},
  date = {2023-08-15},
  url = {https://lsinks.github.io/posts/2023-08-14-mapping-tombstone/tombstones-mapping-leaflet.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sinks2023" class="csl-entry quarto-appendix-citeas">
Sinks, Louise E. 2023. <span>“Mapping for the Tombstone Project.”</span>
August 15, 2023. <a href="https://lsinks.github.io/posts/2023-08-14-mapping-tombstone/tombstones-mapping-leaflet.html">https://lsinks.github.io/posts/2023-08-14-mapping-tombstone/tombstones-mapping-leaflet.html</a>.
</div></div></section></div> ]]></description>
  <category>data visualization</category>
  <category>R</category>
  <category>R-code</category>
  <category>leaflet</category>
  <category>quarto</category>
  <category>problem solving</category>
  <category>mapping</category>
  <category>code-along</category>
  <category>spatial join</category>
  <category>wordPress</category>
  <category>leafpop</category>
  <category>st_jitter</category>
  <guid>https://sarahsmithtripp.github.io/posts/2023-08-14-mapping-tombstone/tombstone_mapping_leaflet.html</guid>
  <pubDate>Tue, 15 Aug 2023 07:00:00 GMT</pubDate>
  <media:content url="https://sarahsmithtripp.github.io/posts/2023-08-14-mapping-tombstone/thumbnail.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Tidy Tuesday Twofer (32 and 33)</title>
  <dc:creator>Louise E. Sinks</dc:creator>
  <link>https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer.html</link>
  <description><![CDATA[ 




<p>Last week I played around with the <a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-08-08/readme.md">TidyTuesday data on hot sauces</a>, but I didn’t polish anything or write any text. This week’s <a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-08-15/readme.md">TidyTuesday data concerns spam email</a>. I’m going to cover them both in this blog post.</p>
<section id="loading-libraries" class="level1">
<h1>Loading Libraries</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># who doesn't want to be tidy</span></span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(gt) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># to make nice tables</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(skimr) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># to survey the data</span></span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(corrplot) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># to make correlation plots</span></span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>corrplot 0.92 loaded</code></pre>
</div>
</div>
</section>
<section id="tidytuesday-32-hot-sauces" class="level1">
<h1>TidyTuesday 32: Hot Sauces</h1>
<section id="loading-the-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-data">Loading the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">tuesdata <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tidytuesdayR<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tt_load</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2023</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">week =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Compiling #TidyTuesday Information for 2023-08-08 ----</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- There are 3 files available ---</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Starting Download ---</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Downloading file 1 of 3: `episodes.csv`
    Downloading file 2 of 3: `sauces.csv`
    Downloading file 3 of 3: `seasons.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Download complete ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">episodes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tuesdata<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>episodes</span>
<span id="cb11-2">sauces <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tuesdata<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>sauces</span>
<span id="cb11-3">seasons <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tuesdata<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>seasons</span></code></pre></div>
</div>
<p>The data is taken from some show where apparently people are interviewed while eating hot sauce. As the interview proceeds (as measured by the question number), the hot sauces get hotter.</p>
</section>
<section id="how-much-hotter" class="level2">
<h2 class="anchored" data-anchor-id="how-much-hotter">How much hotter?</h2>
<p>I made a factor out of the <code>sauce_number</code>/ question number. You can see the x-axis label is nicer for the version with the factor <code>sauce_number2</code>.</p>
<section id="column-plot" class="level3">
<h3 class="anchored" data-anchor-id="column-plot">Column Plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#making a factor</span></span>
<span id="cb12-2">sauces <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sauces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sauce_number2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(sauce_number))</span>
<span id="cb12-4"></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#numeric</span></span>
<span id="cb12-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sauces, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(sauce_number, scoville, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> season)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodge2"</span>) </span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#factor</span></span>
<span id="cb13-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sauces, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(sauce_number2, scoville, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> season)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodge2"</span>) </span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>And having that variable as a factor allows for a really nice box plot as well. ggplot generates a box plot for each level of the factor and displays them in a single plot. Using the numeric form of the variable gives a warning that it is expecting a group and puts everything into a single box plot. (You can add <code>group = sauce_number</code> to the <code>aes</code> to recreate the plot you get straight out of the box with the factor version.)</p>
</section>
<section id="histogram" class="level3">
<h3 class="anchored" data-anchor-id="histogram">Histogram</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#numeric</span></span>
<span id="cb14-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sauces, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(sauce_number, scoville)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb14-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_log10</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb14-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>()</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Continuous x aesthetic
ℹ did you forget `aes(group = ...)`?</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#factor</span></span>
<span id="cb16-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sauces, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(sauce_number2, scoville)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb16-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_log10</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb16-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_boxplot</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The increase in heat level as the questions proceed looks like it has exponential behavior to me. Also looks like some questions # have more variation in the heat level. Questions 8 and 10 seem to have settled in on a specific sauce after the first few seasons.</p>
</section>
<section id="question-10-sauces" class="level3">
<h3 class="anchored" data-anchor-id="question-10-sauces">Question 10 Sauces</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">sauces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(sauce_number <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb17-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(season, sauce_name, scoville) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="xzofpysrol" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xzofpysrol table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xzofpysrol thead, #xzofpysrol tbody, #xzofpysrol tfoot, #xzofpysrol tr, #xzofpysrol td, #xzofpysrol th {
  border-style: none;
}

#xzofpysrol p {
  margin: 0;
  padding: 0;
}

#xzofpysrol .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xzofpysrol .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xzofpysrol .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xzofpysrol .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xzofpysrol .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xzofpysrol .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xzofpysrol .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xzofpysrol .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xzofpysrol .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xzofpysrol .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xzofpysrol .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xzofpysrol .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xzofpysrol .gt_spanner_row {
  border-bottom-style: hidden;
}

#xzofpysrol .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xzofpysrol .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xzofpysrol .gt_from_md > :first-child {
  margin-top: 0;
}

#xzofpysrol .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xzofpysrol .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xzofpysrol .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xzofpysrol .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xzofpysrol .gt_row_group_first td {
  border-top-width: 2px;
}

#xzofpysrol .gt_row_group_first th {
  border-top-width: 2px;
}

#xzofpysrol .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xzofpysrol .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xzofpysrol .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xzofpysrol .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xzofpysrol .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xzofpysrol .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xzofpysrol .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xzofpysrol .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xzofpysrol .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xzofpysrol .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xzofpysrol .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xzofpysrol .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xzofpysrol .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xzofpysrol .gt_left {
  text-align: left;
}

#xzofpysrol .gt_center {
  text-align: center;
}

#xzofpysrol .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xzofpysrol .gt_font_normal {
  font-weight: normal;
}

#xzofpysrol .gt_font_bold {
  font-weight: bold;
}

#xzofpysrol .gt_font_italic {
  font-style: italic;
}

#xzofpysrol .gt_super {
  font-size: 65%;
}

#xzofpysrol .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xzofpysrol .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xzofpysrol .gt_indent_1 {
  text-indent: 5px;
}

#xzofpysrol .gt_indent_2 {
  text-indent: 10px;
}

#xzofpysrol .gt_indent_3 {
  text-indent: 15px;
}

#xzofpysrol .gt_indent_4 {
  text-indent: 20px;
}

#xzofpysrol .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="season" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">season</th>
<th id="sauce_name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">sauce_name</th>
<th id="scoville" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">scoville</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="season">1</td>
<td class="gt_row gt_left" headers="sauce_name">Mad Dog 357</td>
<td class="gt_row gt_right" headers="scoville">357000</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="season">2</td>
<td class="gt_row gt_left" headers="sauce_name">Blair's Mega Death Sauce</td>
<td class="gt_row gt_right" headers="scoville">550000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="season">3</td>
<td class="gt_row gt_left" headers="sauce_name">Blair's Mega Death Sauce</td>
<td class="gt_row gt_right" headers="scoville">550000</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="season">4</td>
<td class="gt_row gt_left" headers="sauce_name">The Last Dab</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="season">5</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab (Reaper Edition)</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="season">6</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab Reduxx</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="season">7</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab Reduxx</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="season">8</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab: Reduxx</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="season">9</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab Reduxx</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="season">10</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab XXX</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="season">11</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab XXX</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="season">12</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab XXX</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="season">13</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab: Apollo</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="season">14</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab: Apollo</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="season">15</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab: Apollo</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="season">16</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab: Apollo</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="season">17</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab: Apollo</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="season">18</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab: Apollo</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="season">19</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab: Apollo</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="season">20</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab: Apollo</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="season">21</td>
<td class="gt_row gt_left" headers="sauce_name">Hot Ones – The Last Dab: Apollo</td>
<td class="gt_row gt_right" headers="scoville">2000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>So it looks like once they found a 2 million scoville sauce they used variations of it or rebranded it as a show tie in for the remaining seasons.</p>
</section>
<section id="log-scale-column-plot" class="level3">
<h3 class="anchored" data-anchor-id="log-scale-column-plot">Log Scale Column Plot</h3>
<p>For exponential data, you can plot on a log scale to see more details. (Season 8 and 10 really stand out with their flat tops.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sauces, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(sauce_number2, scoville, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> season)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb18-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodge2"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb18-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_log10</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It looks like there are a few different regimes. The first three or four questions, the heat level rises sharply with each question. Then for the middle questions, the increase is somewhat more gradual. For the last two or three questions, the heat level again rises steeply.</p>
</section>
<section id="average-heat-per-question" class="level3">
<h3 class="anchored" data-anchor-id="average-heat-per-question">Average Heat per Question</h3>
<p>This might be more easily seen by plotting the average heat for each question across all seasons.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">average_sauce <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sauces <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(sauce_number) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hot =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(scoville))</span>
<span id="cb19-2"></span>
<span id="cb19-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(average_sauce, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span> sauce_number, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> hot)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb19-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb19-5">   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_log10</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That seems pretty clear that there are 3 regions.</p>
</section>
<section id="exponential-fit" class="level3">
<h3 class="anchored" data-anchor-id="exponential-fit">Exponential Fit</h3>
<p>But, we get a decent-ish fit just assuming an exponential increase. I’m not doing anything fancy here. I’m just using geom_smooth and passing it an exponential formula. This isn’t serious model fitting, this is more a guide to the eye.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sauces, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> sauce_number, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span>  scoville)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> (y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exp</span>(x)))</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(average_sauce, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> sauce_number, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> hot)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb21-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb21-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> (y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exp</span>(x)))</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer_files/figure-html/unnamed-chunk-8-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="what-does-this-mean" class="level2">
<h2 class="anchored" data-anchor-id="what-does-this-mean">What does this mean?</h2>
<p>Honestly, probably nothing. :) It is possible that the producers were trying to have some sort of exponential increase in the heat level, so the experience got much worse with each question. But I doubt anyone sat down and simulated what Scoville levels they needed for each question.</p>
</section>
</section>
<section id="tidytuesday-33-spam-emails" class="level1">
<h1>TidyTuesday 33: Spam Emails</h1>
<section id="load-the-data" class="level2">
<h2 class="anchored" data-anchor-id="load-the-data">Load the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">tuesdata <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tidytuesdayR<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tt_load</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2023</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">week =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">33</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Compiling #TidyTuesday Information for 2023-08-15 ----</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- There is 1 file available ---</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Starting Download ---</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Downloading file 1 of 1: `spam.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--- Download complete ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1">spam <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tuesdata<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>spam</span></code></pre></div>
</div>
<p>All the variables are complete. This is a subset of the data submitted to the <a href="https://archive.ics.uci.edu/dataset/94/spambase">UCI Machine Learning Repository</a>. Looking at <a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-08-15/readme.md#data-dictionary">the data dictionary</a>, we might expect all the variable to be positively correlated with spam.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 10%">
<col style="width: 11%">
<col style="width: 77%">
</colgroup>
<thead>
<tr class="header">
<th>variable</th>
<th>class</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>crl.tot</td>
<td>double</td>
<td>Total length of uninterrupted sequences of capitals</td>
</tr>
<tr class="even">
<td>dollar</td>
<td>double</td>
<td>Occurrences of the dollar sign, as percent of total number of characters</td>
</tr>
<tr class="odd">
<td>bang</td>
<td>double</td>
<td>Occurrences of ‘!’, as percent of total number of characters</td>
</tr>
<tr class="even">
<td>money</td>
<td>double</td>
<td>Occurrences of ‘money’, as percent of total number of characters</td>
</tr>
<tr class="odd">
<td>n000</td>
<td>double</td>
<td>Occurrences of the string ‘000’, as percent of total number of words</td>
</tr>
<tr class="even">
<td>make</td>
<td>double</td>
<td>Occurrences of ‘make’, as a percent of total number of words</td>
</tr>
<tr class="odd">
<td>yesno</td>
<td>character</td>
<td>Outcome variable, a factor with levels ‘n’ not spam, ‘y’ spam</td>
</tr>
</tbody>
</table>
<p>I’m using skim to examine the data. I’ve discussed it before <a href="https://lsinks.github.io/posts/2023-03-24-tidytuesday-figure-polishing/#skimr-to-understand-your-data">here</a>; it is a great tool that gives more information than summary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">skim</span>(spam)</span></code></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">spam</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">4601</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">yesno</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 11%">
<col style="width: 16%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">crl.tot</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">283.29</td>
<td style="text-align: right;">606.35</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">266.00</td>
<td style="text-align: right;">15841.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">dollar</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bang</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.27</td>
<td style="text-align: right;">0.82</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.32</td>
<td style="text-align: right;">32.48</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">money</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.44</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">12.50</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">n000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">0.35</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">5.45</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">make</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">0.31</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">4.54</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="is-this-an-imbalanced-data-set" class="level2">
<h2 class="anchored" data-anchor-id="is-this-an-imbalanced-data-set">Is this an imbalanced data set?</h2>
<p>Often classification data sets have much more normal data than abnormal data. Are there reasonable numbers of spam entries in this collection?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(spam, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(yesno)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s not too bad. I’m going to calculate the percentage of spam messages by converting this to a numerical variable and taking the mean. I need a number anyway for my correlation plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1">spam <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> spam <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb31-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yesno_num =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(yesno<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'y'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))</span>
<span id="cb31-3"></span>
<span id="cb31-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(spam<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>yesno_num)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3940448</code></pre>
</div>
</div>
</section>
<section id="correlation-plot" class="level2">
<h2 class="anchored" data-anchor-id="correlation-plot">Correlation plot</h2>
<p>One of my all time favorite packages is <a href="https://CRAN.R-project.org/package=corrplot">corrplot</a>. Correlations can suggest what variables are likely to be important to the outcome and they can also flag potential issues that could arise from multicollinearity among the predictors. I’m normally default to a table over a viz, but corrplot presents the data so beautifully that I just can’t resist using it.</p>
<p>A correlation plot is pretty technical, so I probably would not use it in most circumstances. I use it in my own EDA but I wouldn’t include it in a communication to a general audience. If I were sharing this, I’d clean up the variable names to be clearer.</p>
<p>Correlations need to be calculated between numeric variables, so I am removing the categorical yesno and keeping my numerical one.</p>
<p>Corrplot has <a href="https://cran.r-project.org/web/packages/corrplot/vignettes/corrplot-intro.html">so many different customizations</a>. I’ve annotated my code to reflect what the different parameters do, but there are <a href="https://cran.r-project.org/web/packages/corrplot/corrplot.pdf">dozens of others</a> that can be used for more customization. I like to include the actual numerical values (addCoef.col), omit the diagonal since it will be all ones (diag) and only show one half of the matrix ( type = ‘lower’ or ‘upper’). I also like to have the magnitude (abs value ) reflected by the size of the circle and the value (including sign reflected by the color). The features in this data set are all positively correlated with each other and</p>
<p>Sometimes labels get cropped. This might need to be fixed via the <a href="https://stefaneng.github.io/corrplot-title-cut-off/">margin parameter (mar)</a> within the call to corrplot or via the <a href="https://stackoverflow.com/questions/41679136/r-corrplot-crops-bottom-axis-label">par statement</a> before the call.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xpd =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># allows corrplot labels into the margin. fixes clipping</span></span>
<span id="cb33-2"></span>
<span id="cb33-3">spam <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>yesno) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb33-4">  cor <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb33-5">  {.[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">order</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(.[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>]), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>),</span>
<span id="cb33-6">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">order</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(.[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>]), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)]} <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb33-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">corrplot</span>(</span>
<span id="cb33-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'circle'</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#circle is default and I think it is the best anyway</span></span>
<span id="cb33-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lower'</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># upper, lower, or full</span></span>
<span id="cb33-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tl.col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black'</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#color of text label</span></span>
<span id="cb33-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">addCoef.col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black'</span>,<span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#color of the coefficients</span></span>
<span id="cb33-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cl.ratio =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#size of the color bar legend</span></span>
<span id="cb33-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tl.srt =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># this sets the angle of the text</span></span>
<span id="cb33-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">COL2</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'PuOr'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#this sets the color palette, COL2 is diverging</span></span>
<span id="cb33-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">diag =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># don't show diag</span></span>
<span id="cb33-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mar =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), </span>
<span id="cb33-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What features are correlated with Spam?"</span>,</span>
<span id="cb33-18">  )</span>
<span id="cb33-19">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sub=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Data from UCI Machine Learning Repository via Rdatasets"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>All of them have some positive correlation. None of the predictors look strongly correlated with each other either.</p>
</section>
<section id="what-would-i-do-next-if-i-were-going-to-model-this-data-set" class="level2">
<h2 class="anchored" data-anchor-id="what-would-i-do-next-if-i-were-going-to-model-this-data-set">What would I do next if I were going to model this data set?</h2>
<p>I’ve written about classification problems before and I’d probably start with the fitting methods I used <a href="https://lsinks.github.io/posts/2023-03-24-tidytuesday-figure-polishing/#skimr-to-understand-your-data">there</a>.</p>
<p>All of the numerical variables had pretty skewed distributions based on the skim output. Lots of models require more normally distributed data. I’d transform the data and scale and normalize it as well. There is a <a href="https://www.tmwr.org/pre-proc-table.html">great table</a> in the <a href="https://www.tmwr.org/">Tidy Modeling with R</a> which goes over which preprocessing steps are required or beneficial for different types of fitting.</p>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sinks2023,
  author = {Sinks, Louise E.},
  title = {Tidy {Tuesday} {Twofer} (32 and 33)},
  date = {2023-08-15},
  url = {https://lsinks.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sinks2023" class="csl-entry quarto-appendix-citeas">
Sinks, Louise E. 2023. <span>“Tidy Tuesday Twofer (32 and 33).”</span>
August 15, 2023. <a href="https://lsinks.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer.html">https://lsinks.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer.html</a>.
</div></div></section></div> ]]></description>
  <category>R</category>
  <category>R-code</category>
  <category>code-along</category>
  <category>tidyTuesday</category>
  <category>corrplot</category>
  <guid>https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/tidytuesday-twofer.html</guid>
  <pubDate>Tue, 15 Aug 2023 07:00:00 GMT</pubDate>
  <media:content url="https://sarahsmithtripp.github.io/posts/2023-08-15-TidyTuesday-Twofer/thumbnail.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
